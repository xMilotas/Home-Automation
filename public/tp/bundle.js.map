{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://google-calendar-clone-vanilla/./src/components/forms/entryForm.js","webpack://google-calendar-clone-vanilla/./src/components/forms/formUtils.js","webpack://google-calendar-clone-vanilla/./src/components/forms/goto.js","webpack://google-calendar-clone-vanilla/./src/components/forms/setForm.js","webpack://google-calendar-clone-vanilla/./src/components/menus/datepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/editCategory.js","webpack://google-calendar-clone-vanilla/./src/components/menus/entryOptions.js","webpack://google-calendar-clone-vanilla/./src/components/menus/header.js","webpack://google-calendar-clone-vanilla/./src/components/menus/shortcutsModal.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarCategories.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarDatepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarFooter.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarSubMenu.js","webpack://google-calendar-clone-vanilla/./src/components/toastPopups/toast.js","webpack://google-calendar-clone-vanilla/./src/components/trainingpeaks/api.js","webpack://google-calendar-clone-vanilla/./src/components/trainingpeaks/handlers.js","webpack://google-calendar-clone-vanilla/./src/components/views/dayview.js","webpack://google-calendar-clone-vanilla/./src/components/views/listview.js","webpack://google-calendar-clone-vanilla/./src/components/views/monthview.js","webpack://google-calendar-clone-vanilla/./src/components/views/weekview.js","webpack://google-calendar-clone-vanilla/./src/components/views/yearview.js","webpack://google-calendar-clone-vanilla/./src/config/appDefaults.js","webpack://google-calendar-clone-vanilla/./src/config/renderViews.js","webpack://google-calendar-clone-vanilla/./src/config/setViews.js","webpack://google-calendar-clone-vanilla/./src/context/appContext.js","webpack://google-calendar-clone-vanilla/./src/context/constants.js","webpack://google-calendar-clone-vanilla/./src/context/store.js","webpack://google-calendar-clone-vanilla/./src/factory/entries.js","webpack://google-calendar-clone-vanilla/./src/factory/queries.js","webpack://google-calendar-clone-vanilla/./src/factory/workouts.js","webpack://google-calendar-clone-vanilla/./src/locales/en.js","webpack://google-calendar-clone-vanilla/./src/locales/kbDefault.js","webpack://google-calendar-clone-vanilla/./src/utilities/dateutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/dragutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/helpers.js","webpack://google-calendar-clone-vanilla/./src/utilities/svgs.js","webpack://google-calendar-clone-vanilla/./src/utilities/timeutils.js","webpack://google-calendar-clone-vanilla/webpack/bootstrap","webpack://google-calendar-clone-vanilla/webpack/runtime/define property getters","webpack://google-calendar-clone-vanilla/webpack/runtime/hasOwnProperty shorthand","webpack://google-calendar-clone-vanilla/webpack/runtime/make namespace object","webpack://google-calendar-clone-vanilla/./src/index.js"],"sourcesContent":["// render methods\nimport setViews from \"../../config/setViews\";\nimport setDatepicker from \"../menus/datepicker\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport locales from \"../../locales/en\";\n\n// svgs\nimport { createCheckIcon } from \"../../utilities/svgs\";\n\n// popups confirmation\nimport createToast from \"../toastPopups/toast\";\n\n// event helpers\nimport {\n  getClosest,\n  placePopup,\n  throttle\n} from \"../../utilities/helpers\";\n\n// date / time helpers\nimport {\n  getDateForStore,\n  isBeforeDate,\n  isDate,\n  getDateFromAttribute,\n} from \"../../utilities/dateutils\";\n\n// main app sidebar\nconst sidebar = document.querySelector(\".sidebar\");\n// main app datepicker / overlay\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\n\n// form wrappers / overlay\nconst formOverlay = document.querySelector(\".form-overlay\");\nconst formModalOverlay = document.querySelector(\".form-modal-overlay\");\nconst entriesFormWrapper = document.querySelector(\".entries__form\");\nconst entriesFormHeader = document.querySelector(\".entries__form--header\")\nconst entriesForm = document.querySelector(\".entry-form\");\nconst entriesFormBody = document.querySelector(\".entries__form--body\");\n\n// title / description inputs\nconst titleInput = document.querySelector(\".form--body__title-input\");\nconst descriptionInput = document.querySelector(\".form--body__description-input\");\n\n// start date / time\n// end date / time\nconst startDateInput = document.querySelector(\".form--body-start__date\");\nconst endDateInput = document.querySelector(\".form--body-end__date\");\n\nconst startTimeInput = document.querySelector(\".form--body-start__time\");\nconst endTimeInput = document.querySelector(\".form--body-end__time\");\n\n// category modal\nconst categoryModal = document.querySelector(\".form--body__category-modal\");\nconst closeCategoryModalBtn = document.querySelector(\".close-options-floating__btn\");\nconst categoryModalIcon = document.querySelector(\".form--body__category-icon\");\nconst categoryModalWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\nconst selectedCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper-selection\");\nconst selectedCategoryColor = document.querySelector(\".form--body__category-modal--wrapper__color\");\nconst selectedCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\n\n// reset / save btns\nconst formSubmitButton = document.querySelector(\".form--footer__button-save\");\n\n\n/**\n * function table of contents\n * I attempted to give a break down of the thought process / order of operations and by page 16 I realized this may well be the worst thing I have ever done.\n * I am haunted by this mess.\n *  \n * \n * closetimepicker\n * setEndDateToNextDay\n * setEndDateToNextHour\n * createTimepicker\n * renderSidebarDatepickerForm\n * getDefaultCategory\n * setInitialFormCategory\n * setFormInitialValues\n * getDatePicker\n * handleOverlayClose\n * handleSetDate\n * getDateFormatViaAttr\n * getTimeFormatViaAttr\n * getDateTimeFormatted\n * configDatesForStore\n * checkFormValidity\n * removeErrorMessages\n * handleFormErrors\n * removeLastFormEntry\n * handleFormClose\n * handleSubmissionRender\n * handleFormSubmission\n * handleCategorySelection\n * closeCategoryModal\n * createCategoryOptions\n * openCategoryModal\n * dragFormAnywhere\n * delegateCategorySelection\n * handleTimepickerSetup\n * delegateEntryFormEvents\n * delegateFormKeyDown\n */\n\nexport default function setEntryForm(context, store, datepickerContext) {\n  let categories;\n  let activeCategories;\n  let currentComponent;\n  let [year, month, day] = [null, null, null];\n\n  function closetimepicker() {\n    const timep = document?.querySelector(\".timepicker\");\n    const timepoverlay = document?.querySelector(\".timepicker-overlay\");\n    const timepcontainer = document?.querySelector(\".timepicker-times__container\");\n    const activeTimeElement = document?.querySelector(\".active-form-time\");\n    if (timep) {\n      timep.scrollTo(0, 0);\n      timep.remove();\n      timepoverlay.remove();\n      timepoverlay.onclick = null;\n      timepcontainer.onclick = null;\n    }\n\n    if (activeTimeElement) {\n      activeTimeElement.classList.remove(\"active-form-time\");\n    }\n  }\n\n  function setEndDateToNextDay() {\n    const startCurrentDate = startDateInput.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\n    let nextDay = new Date(\n      startCurrentDate[0],\n      startCurrentDate[1],\n      startCurrentDate[2] + 1\n    );\n    let nextDayString = `${nextDay.getFullYear()}-${nextDay.getMonth()}-${nextDay.getDate()}`;\n    let nextDayTitle = locales.labels.monthsShort[nextDay.getMonth()] + \" \" + nextDay.getDate() + \", \" + nextDay.getFullYear();\n\n    endDateInput.setAttribute(\"data-form-date\", nextDayString);\n    endDateInput.textContent = nextDayTitle;\n    endTimeInput.setAttribute(\"data-form-time\", \"00:30\");\n    endTimeInput.textContent = \"12:30am\";\n  }\n\n  function setEndDateToNextHour() {\n    const startCurrentTime = startTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\n\n    let [newh, newm] = [\n      startCurrentTime[0] < 23 ? startCurrentTime[0] + 1 : 23,\n      startCurrentTime[0] < 23 ? startCurrentTime[1] : 45\n    ];\n\n    let nextHour = new Date(0, 0, 0, newh, newm);\n    let md = nextHour.getHours() > 12 ? \"pm\" : \"am\";\n\n    let nextHourString = `${nextHour.getHours()}:${nextHour.getMinutes()}`;\n    let nextHourTitle = `${+nextHour.getHours() % 12}:${+nextHour.getMinutes() == 0 ? \"00\" : nextHour.getMinutes()}${md}`;\n\n    endTimeInput.setAttribute(\"data-form-time\", nextHourString);\n    endTimeInput.textContent = nextHourTitle;\n  }\n\n  function createTimepicker(coords, currentTime, end, endLimit) {\n    const timepicker = document.createElement(\"div\");\n    timepicker.classList.add(\"timepicker\");\n    timepicker.style.top = `${coords.y}px`;\n    timepicker.style.left = `${coords.x}px`;\n\n    const timepickerOverlay = document.createElement(\"div\");\n    timepickerOverlay.classList.add(\"timepicker-overlay\");\n\n    const timepickerTimesContainer = document.createElement(\"div\");\n    timepickerTimesContainer.classList.add(\"timepicker-times__container\");\n\n    let hours = [\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\n    ];\n    let md = [\n      'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am',\n      'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm',\n    ];\n\n    let minutes = [\"00\", \"15\", \"30\", \"45\"];\n\n    let [currenthour, currentmin] = currentTime.split(\":\").map((x) => {\n      return parseInt(x);\n    });\n\n    let currentmd = currenthour > 12 ? \"pm\" : \"am\";\n\n    let isSameDay = startDateInput.getAttribute(\"data-form-date\") === endDateInput.getAttribute(\"data-form-date\");\n    let shouldTestReset = false;\n\n    if (end && currenthour === 23 && currentmin === 45) {\n      shouldTestReset = true;\n    }\n\n    currenthour > 12 ? currenthour -= 12 : currenthour;\n\n    if (endLimit !== null && isSameDay) {\n      let [h, m] = endLimit.split(\":\").map(x => parseInt(x));\n      if (shouldTestReset) {\n        if (h === 23 && m >= 15) {\n          setEndDateToNextDay();\n          closetimepicker();\n          return;\n        }\n      }\n\n      if (h === 23) {\n        if (m === 45) {\n          setEndDateToNextDay();\n        } else {\n          hours = [12];\n          md = ['pm'];\n          m = m.slice(-1);\n        }\n      } else {\n        hours = hours.slice(+h + 1, hours.length);\n        md = md.slice(+h + 1, md.length);\n      }\n    }\n\n    let count = 0;\n    let si;\n    hours.forEach((hour, houridx) => {\n      minutes.forEach(min => {\n        const timepickerTime = document.createElement(\"div\");\n        timepickerTime.classList.add(\"timepicker-time\");\n        let attr;\n        if (md[houridx] === \"am\") {\n          if (+hour === 12) {\n            attr = `00:${min}`;\n          } else {\n            attr = `${hour}:${min}`;\n          }\n        } else if (md[houridx] === \"pm\") {\n          if (hour === 12) {\n            attr = `12:${min}`;\n          } else {\n            attr = `${hour + 12}:${min}`;\n          }\n        }\n\n        timepickerTime.setAttribute(\"data-tp-time\", attr);\n        timepickerTime.textContent = `${hour}:${min}${md[houridx]}`;\n        count++;\n\n        if (!end) {\n          if (+hour == +currenthour && +min == +currentmin) {\n            if (currentmd === \"pm\" && md[houridx] === \"pm\") {\n              timepickerTime.classList.add(\"timepicker-time--selected\");\n              si = count;\n            } else if (currentmd === \"am\" && md[houridx] === \"am\") {\n              timepickerTime.classList.add(\"timepicker-time--selected\");\n              si = count;\n            }\n          }\n        }\n\n        timepickerTimesContainer.appendChild(timepickerTime);\n      });\n    });\n\n\n    function setnewtime(e) {\n      const time = e.target.textContent;\n      let attr = e.target.getAttribute(\"data-tp-time\");\n\n      if (!end) {\n        startTimeInput.textContent = time;\n        startTimeInput.setAttribute(\"data-form-time\", attr);\n\n        let [testhour, testminute] = attr.split(\":\").map(x => +x);\n        let [endTestHour, endTestMinute] = endTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\n\n        if (isSameDay) {\n          if (testhour === 23 && testminute === 45) {\n            setEndDateToNextDay();\n          } else {\n            if (testhour > endTestHour || (testhour === endTestHour && testminute >= endTestMinute)) {\n              setEndDateToNextHour();\n            }\n          }\n        }\n      } else {\n        endTimeInput.textContent = time;\n        endTimeInput.setAttribute(\"data-form-time\", attr);\n      }\n      closetimepicker();\n    }\n\n    const delegateNewTime = (e) => {\n      if (getClosest(e, \".timepicker-time\")) {\n        setnewtime(e);\n        return;\n      }\n    };\n\n    timepicker.appendChild(timepickerTimesContainer);\n    const [x, y] = coords;\n    timepicker.setAttribute(\"style\", `top:${y}px; left:${x}px;`);\n    document.body.prepend(timepickerOverlay, timepicker);\n    timepickerOverlay.onclick = closetimepicker;\n    timepickerTimesContainer.onclick = delegateNewTime;\n    if (!end) {\n      if (si > 0) {\n        timepicker.scrollTo(0, parseInt(si * 40) - 40);\n      } else {\n        timepicker.scrollTo(0, 0);\n      }\n    } else {\n      timepicker.scrollTo(0, 0);\n    }\n  }\n\n  function renderSidebarDatepickerForm() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      context.setDateSelected(day);\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function getDatePicker(year, month, day) {\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\n    datepicker.classList.remove(\"hide-datepicker\");\n    store.addActiveOverlay(\"hide-datepicker-overlay\");\n    datepickerContext.setDate(year, month, day);\n    datepickerContext.setDateSelected(day);\n    setDatepicker(context, store, datepickerContext, \"form\");\n  }\n\n  function handleSetDate(e, type) {\n    e.preventDefault();\n    if (type === \"start\") {\n      startDateInput.setAttribute(\"class\", \"form--body-start__date active-form-date\");\n      endDateInput.setAttribute(\"class\", \"form--body-end__date inactive-form-date\");\n    } else {\n      startDateInput.setAttribute(\"class\", \"form--body-start__date inactive-form-date\");\n      endDateInput.setAttribute(\"class\", \"form--body-end__date active-form-date\");\n    }\n\n    const [y, m, d] = getDateFromAttribute(e.target, \"data-form-date\");\n    const rect = e.target.getBoundingClientRect();\n    const datepickerLeft = parseInt(rect.left);\n    const bott = parseInt(rect.bottom);\n    let datepickerTop = parseInt(rect.top);\n\n    if (type === \"end\") {\n      datepickerTop -= 40;\n    }\n\n    if (window.innerHeight - 216 <= bott) {\n      datepickerTop = window.innerHeight - 242;\n    }\n\n    datepicker.setAttribute(\"style\", `top:${datepickerTop}px;left:${datepickerLeft}px;`);\n    getDatePicker(y, m, d);\n  }\n\n  function getDateFormatViaAttr(dateAttr) {\n    const [year, month, day] = dateAttr.split(\"-\").map(x => parseInt(x));\n    return new Date(year, month, day);\n  }\n\n  function getTimeFormatViaAttr(timeAttr) {\n    return timeAttr.split(\":\").map(x => parseInt(x));\n  }\n\n  function getDateTimeFormatted(dateAttr, timeAttr) {\n    dateAttr.setHours(timeAttr[0]);\n    dateAttr.setMinutes(timeAttr[1]);\n    dateAttr.setSeconds(0);\n    return dateAttr;\n  }\n\n  function configDatesForStore() {\n    let startDateAttr = startDateInput.getAttribute(\"data-form-date\");\n    let startDate = getDateFormatViaAttr(startDateAttr);\n    let startTimeAttr = startTimeInput.getAttribute(\"data-form-time\");\n    let [starthour, startminute] = getTimeFormatViaAttr(startTimeAttr);\n\n    let endDateAttr = endDateInput.getAttribute(\"data-form-date\");\n    let endDate = getDateFormatViaAttr(endDateAttr);\n    let endTimeAttr = endTimeInput.getAttribute(\"data-form-time\");\n    let [endhour, endminute] = getTimeFormatViaAttr(endTimeAttr);\n\n    return [\n      getDateTimeFormatted(startDate, [starthour, startminute]),\n      getDateTimeFormatted(endDate, [endhour, endminute])\n    ];\n  }\n\n  function checkFormValidity(title, description, category, startDate, endDate) {\n    // all inputs are valid by default \n    // if any input becomes invalid, only the error message for that input will be returned through a error object defined below\n    const status = {\n      title: true,\n      description: true,\n      startDate: true,\n      endDate: true,\n      valid: true,\n    };\n    /* ************************ */\n    /*  TITLE VALIDATION CHECK */\n    if (typeof title === \"string\") {\n      const titlecheck = title.trim().replace(/[^a-zA-Z0-9\\s_-]+|\\s{2,}/g, ' ');\n      if (titlecheck.length > 50) {\n        status.title = \"Title must be Less than 50 characters\";\n        status.valid = false;\n      } else if (titlecheck.length === 0) {\n        status.title = \"Title cannot be empty\";\n        status.valid = false;\n      }\n    } else {\n      status.title = \"Title cannot be empty\";\n    }\n    /* ***************************** */\n    /*  DESCRIPTION VALIDATION CHECK */\n    if (description.length >= 200) {\n      status.description = \"Description must be less than 200 characters\";\n      status.valid = false;\n    }\n    /* ************************** */\n    /*  CATEGORY VALIDATION CHECK */\n    if (!store.hasCtg(category) || !category) {\n      categoryModalWrapper.setAttribute(\"data-form-category\", \"default\");\n    }\n    /* **************************** */\n    /*  START DATE VALIDATION CHECK */\n    if (!startDate) {\n      status.startDate = \"Start date cannot be empty\";\n      status.valid = false;\n    } else if (!isDate(startDate)) {\n      status.startDate = \"Start date is not valid\";\n      status.valid = false;\n    }\n    /* **************************** */\n    /*  END DATE VALIDATION CHECK */\n    if (!endDate) {\n      status.endDate = \"End date cannot be empty\";\n      status.valid = false;\n    } else if (!isDate(endDate)) {\n      status.endDate = \"End date is not valid\";\n      status.valid = false;\n    } else if (!isBeforeDate(startDate, endDate)) {\n      status.endDate = \"End date must be after start date\";\n      status.valid = false;\n    }\n    /* ************* */\n    /*  congregate any errors  */\n    let errors = {};\n    let hasErrors;\n    for (let key in status) {\n      if (status[key] !== true) {\n        errors[key] = status[key];\n        hasErrors = true;\n      }\n    }\n\n    if (hasErrors) {\n      return errors;\n    } else {\n      return true;\n    }\n  }\n\n  function removeErrorMessages(e) {\n    if (e.target.classList.contains(\"form-input-error\")) {\n      e.preventDefault();\n      e.target.classList.remove(\"form-input-error\");\n      e.target.removeAttribute(\"data-form-error-message\");\n      e.target.firstElementChild.focus();\n    } else if (e.target.classList.contains(\"form-input-error__custom-input\")) {\n      e.target.classList.remove(\"form-input-error__custom-input\");\n      e.target.removeAttribute(\"data-form-error-message\");\n      e.target.focus();\n    } else {\n      return;\n    }\n  }\n\n  /**\n   * \n   * @param {object} errorMessages object key represents the input name and the value represents the string error message\n   * \n   * Use object key to get the input HTML element class name and append the error message as a data attribute to the input element using the err object.\n   * \n   * Set the submit button to disabled until all errors are resolved\n   * \n   */\n  function handleFormErrors(errorMessages) {\n    titleInput.blur();\n\n    const components = {\n      title: titleInput,\n      description: descriptionInput,\n      startDate: startDateInput,\n      endDate: endDateInput,\n    };\n    const err = {\n      inputAttr: \"data-form-error-message\",\n      inputClass: \"form-input-error\",\n      svgClass: \"form-input-error__custom-input\",\n      submitbtn: \"form-error__submit-btn\"\n    };\n\n    for (let key in errorMessages) {\n      if (components[key]) {\n        if (key === \"title\" || key === \"description\") {\n          components[key].parentElement.setAttribute(err.inputAttr, errorMessages[key]);\n          components[key].parentElement.classList.add(err.inputClass);\n        } else {\n          components[key].setAttribute(err.inputAttr, errorMessages[key]);\n          components[key].classList.add(err.svgClass);\n          const svg = components[key].parentElement.parentElement.firstElementChild.firstElementChild;\n          svg.style.fill = \"var(--red2)\";\n          setTimeout(() => { svg.style.fill = \"var(--white3)\"; }, 1000);\n        }\n      }\n    }\n\n    formSubmitButton.classList.add(err.submitbtn);\n    setTimeout(() => { formSubmitButton.classList.remove(err.submitbtn); }, 1000);\n  }\n\n  function removeLastFormEntry() {\n    store.removeLastEntry();\n    setViews(currentComponent, context, store, datepickerContext);\n  }\n\n  function undoLastFormEdit(id, entryBefore) {\n    const start = new Date(entryBefore.start);\n    store.updateEntry(\n      id,\n      {\n        category: entryBefore.category,\n        completed: entryBefore.completed,\n        description: entryBefore.description,\n        end: new Date(entryBefore.end),\n        id: id,\n        start: start,\n        title: entryBefore.title,\n      }\n    );\n\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\n    context.setDateSelected(start.getDate());\n    setViews(currentComponent, context, store, datepickerContext);\n  }\n\n  function clearAllErrors() {\n    const inputErrElements = document?.querySelectorAll(\".form-input-error\");\n    if (inputErrElements) {\n      inputErrElements.forEach((el) => {\n        el.classList.remove(\"form-input-error\");\n        el.removeAttribute(\"data-form-error-message\");\n      });\n    }\n  }\n\n  function handleFormClose(e) {\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\n      datepicker.classList.add(\"hide-datepicker\");\n      datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\n    }\n\n    clearAllErrors();\n\n    formOverlay.onclick = null;\n    entriesFormHeader.onmousedown = null;\n    entriesFormWrapper.onclick = null;\n    document.removeEventListener(\"keydown\", delegateFormKeyDown);\n    entriesFormWrapper.classList.add(\"hide-form\");\n    formOverlay.classList.add(\"hide-form-overlay\");\n    store.removeActiveOverlay(\"hide-datepicker-overlay\");\n    store.removeActiveOverlay(\"hide-form-overlay\");\n    entriesForm.reset();\n    descriptionInput.value = \"\";\n    titleInput.value = \"\";\n\n    if (categoryModalWrapper.classList.contains(\"category-modal-open\")) {\n      closeCategoryModal();\n    }\n\n    const resetCurrentView = store.getFormResetHandle(currentComponent);\n    if (resetCurrentView !== null) {\n      resetCurrentView();\n      store.setFormResetHandle(currentComponent, null);\n    } else {\n      return;\n    }\n  }\n\n  function handleSubmissionRender(start, type, id, entryBefore) {\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\n    context.setDateSelected(start.getDate());\n    setViews(currentComponent, context, store, datepickerContext);\n\n    if (store.getDayEntriesArray(context.getDate()).length <= 1) {\n      renderSidebarDatepickerForm();\n    }\n\n    handleFormClose();\n\n    // if the submission type is create, pass a callback function to allow user to remove the last entry if they wish\n    if (type === \"create\") {\n      setTimeout(() => {\n        createToast(\"Event created\", removeLastFormEntry);\n      }, 4);\n    } else {\n      // if the submission type is edit, pass a callback function to allow user to undo the last edit if they wish\n\n      // determine whether the entry was edited or not\n      const shouldCreateToast = store.compareEntries(\n        entryBefore,\n        store.getEntry(id)\n      );\n\n      if (!shouldCreateToast) {\n        const handleUndoLastEdit = () => {\n          undoLastFormEdit(id, entryBefore);\n        };\n        setTimeout(() => {\n          createToast(\"Event updated\", handleUndoLastEdit);\n        }, 4);\n      }\n    }\n  }\n\n  function handleFormSubmission(e) {\n    e.preventDefault();\n    const title = titleInput.value;\n    const description = descriptionInput.value;\n    const [startDate, endDate] = configDatesForStore();\n    const category = categoryModalWrapper.getAttribute(\"data-form-category\");\n\n    // if errors exist, validityStatus will represent an object with keys that match the input names, and values that represent the error messages as strings;\n    // note that two types of submissions are possible: edit and create\n    const validityStatus = checkFormValidity(\n      title, description, category, startDate, endDate,\n    );\n\n    if (validityStatus !== true) {\n      handleFormErrors(validityStatus);\n      return;\n    } else {\n      // submission : edit\n      if (formSubmitButton.getAttribute(\"data-form-action\") === \"edit\") {\n        const id = formSubmitButton.getAttribute(\"data-form-entry-id\");\n        const entryBefore = JSON.parse(JSON.stringify(store.getEntry(id)));\n\n        store.updateEntry(\n          id,\n          {\n            category: category,\n            completed: false,\n            description: description,\n            end: endDate,\n            id: id,\n            start: startDate,\n            title: title,\n          }\n        );\n\n        handleSubmissionRender(\n          startDate, 'edit', id, entryBefore\n        );\n        return;\n      } else {\n        // submission : create\n        store.createEntry(\n          category, false, description, endDate, startDate, title\n        );\n        handleSubmissionRender(\n          startDate, 'create', store.getLastEntryId(), null\n        );\n      }\n    }\n  }\n\n  function handleCategorySelection(e) {\n    const title = e.target.getAttribute(\"data-form-category-title\");\n    const color = e.target.getAttribute(\"data-form-category-color\");\n    categoryModalWrapper.setAttribute(\"data-form-category\", title);\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", color);\n\n    selectedCategoryWrapper.style.backgroundColor = color;\n    selectedCategoryColor.style.backgroundColor = color;\n    selectedCategoryTitle.textContent = title;\n    closeCategoryModal();\n  }\n\n  function closeCategoryModal() {\n    closeCategoryModalBtn.style.display = \"none\";\n    categoryModalWrapper.classList.remove(\"category-modal-open\");\n    categoryModal.classList.add(\"hide-form-category-modal\");\n    selectedCategoryWrapper.classList.remove(\"hide-form-category-selection\");\n    formModalOverlay.classList.add(\"hide-form-overlay\");\n    categoryModalWrapper.removeAttribute(\"style\");\n    categoryModal.innerText = \"\";\n  }\n\n  function createCategoryOptions(parent, categories) {\n    const currentCategory = categoryModalWrapper.getAttribute(\"data-form-category\");\n\n    categories.forEach(([key, value]) => {\n      const color = value.color;\n      const categoryWrapper = document.createElement(\"div\");\n      categoryWrapper.classList.add(\"category-modal--category\");\n      categoryWrapper.style.width = \"200px\";\n\n      categoryWrapper.style.backgroundColor = color;\n      categoryWrapper.setAttribute(\"data-form-category-title\", key);\n      categoryWrapper.setAttribute(\"data-form-category-color\", color);\n\n      const categoryDisplayColor = document.createElement(\"div\");\n      categoryDisplayColor.classList.add(\"category-modal--category-color\");\n      categoryDisplayColor.style.backgroundColor = color;\n\n      const categoryTitle = document.createElement(\"div\");\n      categoryTitle.classList.add(\"category-modal--category-title\");\n      categoryTitle.textContent = key;\n\n      if (key === currentCategory) {\n        const checkIcon = createCheckIcon(\"var(--white4)\");\n        const checkIconWrapper = document.createElement(\"div\");\n        checkIconWrapper.classList.add(\"category-modal--category-check\");\n        checkIconWrapper.appendChild(checkIcon);\n\n        categoryWrapper.append(\n          categoryDisplayColor,\n          categoryTitle,\n          checkIconWrapper\n        );\n\n      } else {\n        categoryWrapper.append(categoryDisplayColor, categoryTitle);\n      }\n\n      parent.appendChild(categoryWrapper);\n    });\n  }\n\n  function openCategoryModal(e, categories) {\n    const length = categories.length;\n    if (length === 1) return;\n\n    closeCategoryModalBtn.removeAttribute(\"style\");\n    setTimeout(() => {\n      entriesFormBody.scrollTo({\n        top: entriesFormBody.scrollHeight,\n        behavior: \"smooth\"\n      });\n    }, 5);\n\n    if (length >= 5) {\n      closeCategoryModalBtn.setAttribute(\"style\", `top: -100px`);\n    } else {\n      closeCategoryModalBtn.setAttribute(\"style\", `top: ${(length * 20) * -1}px`);\n    }\n\n    categoryModalWrapper.classList.add(\"category-modal-open\");\n    if (length < 5) {\n      categoryModalWrapper.style.height = `${length * 32}px`;\n    } else {\n      categoryModalWrapper.style.height = \"160px\";\n    }\n\n    selectedCategoryWrapper.classList.add(\"hide-form-category-selection\");\n    categoryModal.classList.remove(\"hide-form-category-modal\");\n    categoryModal.style.height = `${length * 32}px`;\n    categoryModal.innerText = \"\";\n    createCategoryOptions(categoryModal, categories);\n    formModalOverlay.classList.remove(\"hide-form-overlay\");\n  }\n\n  function dragFormAnywhere(e) {\n    const closeBtn = document.querySelector(\".form--header__icon-close\");\n    const rect = entriesFormWrapper.getBoundingClientRect();\n\n    // get current left / top form position\n    const [currleft, currtop] = [\n      parseInt(rect.left),\n      parseInt(rect.top),\n    ];\n\n    entriesFormWrapper.style.margin = \"0\";\n    entriesFormWrapper.style.opacity = \"0.8\";\n    entriesFormWrapper.style.userSelect = \"none\";\n    entriesFormWrapper.style.top = currtop + \"px\";\n    entriesFormWrapper.style.left = currleft + \"px\";\n    entriesFormWrapper.style.bottom = \"0\";\n    entriesFormWrapper.style.right = \"0\";\n    closeBtn.style.pointerEvents = \"none\";\n    entriesForm.style.pointerEvents = \"none\";\n\n    let [leftBefore, topBefore] = [e.clientX, e.clientY];\n    const [winH, winW] = [window.innerHeight, window.innerWidth];\n\n    function mousemove(e) {\n      let [leftAfter, topAfter] = [\n        leftBefore - e.clientX, topBefore - e.clientY\n      ];\n\n      leftBefore = e.clientX;\n      topBefore = e.clientY;\n\n      if (entriesFormWrapper.offsetTop < 0) {\n        entriesFormWrapper.style.top = \"0px\";\n      }\n\n      if (entriesFormWrapper.offsetLeft < 0) {\n        entriesFormWrapper.style.left = \"0px\";\n      }\n\n      if ((entriesFormWrapper.offsetLeft + entriesFormWrapper.offsetWidth) > winW) {\n        entriesFormWrapper.style.left = winW - entriesFormWrapper.offsetWidth + \"px\";\n      }\n\n      if ((entriesFormWrapper.offsetTop + entriesFormWrapper.offsetHeight) > winH) {\n        entriesFormWrapper.style.top = winH - entriesFormWrapper.offsetHeight + \"px\";\n      }\n\n      entriesFormWrapper.style.top = entriesFormWrapper.offsetTop - topAfter + \"px\";\n      entriesFormWrapper.style.left = entriesFormWrapper.offsetLeft - leftAfter + \"px\";\n    }\n\n    const throttlemove = throttle(mousemove, 10);\n\n    function mouseup() {\n      entriesFormWrapper.style.opacity = \"1\";\n      entriesFormWrapper.style.userSelect = \"all\";\n      closeBtn.removeAttribute(\"style\");\n      entriesForm.removeAttribute(\"style\");\n      document.removeEventListener(\"mousemove\", throttlemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n\n    document.addEventListener(\"mousemove\", throttlemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function handleTimepickerSetup(target) {\n    const rect = target.getBoundingClientRect();\n    let [x, y] = placePopup(\n      180,\n      200,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight],\n      false,\n    );\n    return [x, y];\n  }\n\n  function delegateEntryHeader(e) {\n    const dragHeader = getClosest(e, \".form-header--dragarea\");\n    const closeicon = getClosest(e, \".form--header__icon-close\");\n    if (dragHeader) {\n      if (window.innerWidth < 500 || window.innerHeight < 500) {\n        return;\n      } else\n        dragFormAnywhere(e);\n      return;\n    }\n\n    if (closeicon) {\n      handleFormClose(e);\n      return;\n    }\n  }\n\n  function delegateEntryFormEvents(e) {\n    // date / time inputs\n    const startdate = getClosest(e, \".form--body-start__date\");\n    const starttime = getClosest(e, \".form--body-start__time\");\n    const enddate = getClosest(e, \".form--body-end__date\");\n    const endtime = getClosest(e, \".form--body-end__time\");\n\n    // category selection\n    const getCategoryModal = getClosest(e, \".form--body__category-modal\");\n    const category = getClosest(e, \".form--body__category-modal--wrapper-selection\");\n    const getcloseCategoryModalBtn = getClosest(e, \".close-options-floating__btn\");\n    const getCategoryModalOverlay = getClosest(e, \".form-modal-overlay\");\n\n    // error msg : <input> / <textarea>\n    const inputError = getClosest(e, \".form-input-error\");\n\n    // error msg : custom inputs (date / time)\n    const customInputError = getClosest(e, \".form-input-error__custom-input\");\n\n    // form footer buttons\n    const resetbtn = getClosest(e, \".form--footer__button-cancel\");\n    const submitbtn = getClosest(e, \".form--footer__button-save\");\n\n    if (startdate) {\n      handleSetDate(e, \"start\");\n      return;\n    }\n\n    if (starttime) {\n      e.target.classList.add(\"active-form-time\");\n      createTimepicker(\n        handleTimepickerSetup(e.target),\n        startTimeInput.getAttribute(\"data-form-time\"),\n        false,\n        null\n      );\n      return;\n    }\n\n    if (enddate) {\n      handleSetDate(e, \"end\");\n      return;\n    }\n\n    if (endtime) {\n      e.target.classList.add(\"active-form-time\");\n      createTimepicker(\n        handleTimepickerSetup(e.target),\n        endTimeInput.getAttribute(\"data-form-time\"),\n        true,\n        startTimeInput.getAttribute(\"data-form-time\"),\n      );\n      return;\n    }\n\n    if (getCategoryModal) {\n      if (categoryModal.childElementCount > 0) {\n        handleCategorySelection(e);\n      }\n      return;\n    }\n\n    if (category) {\n      openCategoryModal(e, categories);\n      return;\n    }\n\n    if (getcloseCategoryModalBtn) {\n      closeCategoryModal();\n      return;\n    }\n\n    if (getCategoryModalOverlay) {\n      closeCategoryModal();\n      return;\n    }\n\n    if (inputError) {\n      removeErrorMessages(e);\n      return;\n    }\n\n    if (customInputError) {\n      removeErrorMessages(e);\n      return;\n    }\n\n    if (resetbtn) {\n      entriesForm.reset();\n      clearAllErrors();\n      setFormInitialValues();\n      closeCategoryModal();\n      return;\n    }\n\n    if (submitbtn) {\n      handleFormSubmission(e);\n      return;\n    }\n  }\n\n  function delegateFormKeyDown(e) {\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\n      return;\n    } else {\n      const timep = document?.querySelector(\".timepicker\");\n      const catsAct = document?.querySelector(\".hide-form-category-modal\");\n\n      if (e.key === \"Escape\") {\n        if (timep !== null) {\n          closetimepicker();\n        } else if (catsAct === null) {\n          closeCategoryModal();\n        } else {\n          handleFormClose(e);\n        }\n      }\n\n      if (e.key === \"Enter\") {\n        if (timep !== null) {\n          closetimepicker();\n        } else if (catsAct === null) {\n          closeCategoryModal();\n        } else {\n          handleFormSubmission(e);\n        }\n      }\n    }\n  }\n\n  function setFormInitialValues() {\n    // variable setup\n    categories = Object.entries(store.getAllCtg());\n    activeCategories = store.getActiveCategoriesKeyPair();\n    currentComponent = context.getComponent();\n    year = context.getYear();\n    month = context.getMonth();\n    day = context.getDay();\n\n    // ****************************************** //\n    // title / description\n    descriptionInput.value = \"\";\n    titleInput.blur();\n    titleInput.value = \"\";\n    setTimeout(() => {\n      titleInput.focus();\n    }, 10);\n\n    // ****************************************** //\n    // category setup \n    setInitialFormCategory();\n\n    // ****************************************** // \n    // date picker setup\n    datepickerContext.setDate(year, month, day);\n    context.setDateSelected(day);\n\n    // ****************************************** // \n    // date inputs setup\n    const dateSelected = `${context.getMonthName().slice(0, 3)} ${day}, ${year}`;\n    // DATES : START/END\n    startDateInput.textContent = dateSelected;\n    startDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\n    // startDateInput.setAttribute(\"tabindex\", \"1\")\n    endDateInput.textContent = dateSelected;\n    endDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\n    // endDateInput.setAttribute(\"tabindex\", \"2\")\n\n    // TIME : START/END \n    const temphours = new Date().getHours();\n    startTimeInput.setAttribute(\"data-form-time\", `${temphours}:00`);\n    endTimeInput.setAttribute(\"data-form-time\", `${temphours}:30`);\n    const getTimeAndMd = (hour, min) => {\n      return `${+hour === 0 || +hour === 12 ? 12 : hour % 12}:${min}${hour < 12 ? \"am\" : \"pm\"}`;\n    };\n    startTimeInput.textContent = getTimeAndMd(temphours, \"00\");\n    endTimeInput.textContent = getTimeAndMd(temphours, \"30\");\n\n    // ****************************************** // \n    // submit button setup \n    formSubmitButton.setAttribute(\"data-form-action\", \"create\");\n    formSubmitButton.setAttribute(\"data-form-id\", \"\");\n\n    // ****************************************** // \n    // approve form event delegation\n    entriesFormHeader.onmousedown = delegateEntryHeader;\n    formOverlay.onclick = handleFormClose;\n    entriesFormWrapper.onclick = delegateEntryFormEvents;\n    document.addEventListener(\"keydown\", delegateFormKeyDown);\n    // ****************************************** // \n  }\n\n  function getDefaultCategory() {\n    if (activeCategories.length === 0) {\n      return [categories[0][0], categories[0][1].color];\n    } else {\n      return [activeCategories[0][0], activeCategories[0][1].color];\n    }\n  }\n\n  function setInitialFormCategory() {\n    let [categoryTitle, categoryColor] = getDefaultCategory();\n    categoryModalWrapper.setAttribute(\"data-form-category\", categoryTitle);\n\n    selectedCategoryWrapper.style.backgroundColor = categoryColor;\n    selectedCategoryTitle.textContent = categoryTitle;\n    selectedCategoryColor.style.backgroundColor = categoryColor;\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", categoryColor);\n  }\n\n  setFormInitialValues();\n}","import locales from \"../../locales/en\";\nimport { placePopup } from \"../../utilities/helpers\";\nclass FormConfig {\n  constructor () {\n    this.monthNames = locales.labels.monthsShort;\n    this.headerOffset = document.querySelector(\".header\");\n    this.form = document.querySelector(\".entries__form\");\n    this.formBody = document.querySelector(\".entries__form--body\");\n    this.formTitleDescription = document.querySelectorAll(\".form-body-single\");\n    this.formStartEndCtg = document.querySelectorAll(\".form-body-double\");\n    this.formsubmitbtn = document.querySelector(\".form--footer__button-save\");\n    this.formCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\n    this.formCategorySelect = document.querySelector(\".form--body__category-modal--wrapper-selection\");\n    this.formCategoryWrapperIcon = document.querySelector(\".form--body__category-modal--wrapper__color\");\n    this.formCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\n    this.formCatgoryIcon = document.querySelector(\".form--body__category-icon\");\n  }\n\n  /**\n   * \n   * @param {number} eX element left\n   * @param {number} eY element top\n   * @param {boolean} shouldCenter (optional) should the form be centered to the element\n   * @param {number} centerOffset (optional) offset from the center of the element\n   */\n  setFormStyle(eX, eY, shouldCenter, centerOffset) {\n    if (!shouldCenter) {\n      shouldCenter = false;\n    }\n    if (!centerOffset) {\n      centerOffset = null;\n    }\n    let [x, y] = placePopup(\n      this.form.offsetWidth,\n      this.form.offsetHeight,\n      [eX, eY],\n      [window.innerWidth, window.innerHeight],\n      shouldCenter,\n      centerOffset\n    );\n    this.form.style.left = `${x}px`;\n    this.form.style.top = `${y}px`;\n    this.form.style.margin = \"0\";\n  }\n\n  setFormSubmitType(type, id) {\n    this.formsubmitbtn.setAttribute(\"data-form-action\", type);\n    this.formsubmitbtn.setAttribute(\n      \"data-form-entry-id\",\n      id === null ? id = \"\" : id\n    );\n  }\n\n  configFormTitleDescriptionInput(title, description) {\n    this.formTitleDescription.forEach((input, idx) => {\n      input.firstElementChild.value = [title, description][idx];\n    });\n  }\n\n  /**\n   * \n   * @param {HTML} input \n   * @param {object} date \n   * @param {number} minutes \n   * @param {string} dateFormatted \n   * @desc\n   * Set the date & time for the form input fields\n   * Set attributes for date/time inputs\n   * Format date/time for display\n   */\n  setFormDateInput(input, date, minutes, dateFormatted) {\n    const [dateinput, timeinput] = [\n      input.firstElementChild,\n      input.lastElementChild\n    ];\n\n    const timeformatted = `${date.getHours()}:${minutes}`;\n    timeinput.setAttribute(\n      \"data-form-time\",\n      timeformatted\n    );\n\n    // darn yankee time\n    timeinput.textContent = `${+date.getHours() === 0 || +date.getHours() === 12 ? 12 : date.getHours() % 12}:${minutes}${date.getHours() < 12 ? \"am\" : \"pm\"}`;\n\n    dateinput.setAttribute(\"data-form-date\", dateFormatted);\n    dateinput.textContent = `${this.monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n  }\n\n  setFormDatepickerDate(context, datepickerContext, start) {\n    start = new Date(start);\n    context.setDateSelected(start.getDate());\n    datepickerContext.setDate(\n      context.getYear(),\n      context.getMonth(),\n      context.getDay(),\n    );\n    datepickerContext.setDateSelected(start.getDate());\n  }\n\n  /**\n   * \n   * @param {object} dates \n   * @desc\n   * Iterate through object containing the data below to both the start date/time & end date/time form inputs\n   * \n   * DateObject: [Date(start), Date(end)]\n   * \n   * Minutes: [start minutes, end minutes]\n   * \n   * DateString [start date, end date]\n   * \n   */\n  configFormDateInputs(dates) {\n    for (let i = 0; i < 2; i++) {\n      this.setFormDateInput(\n        this.formStartEndCtg[i].lastElementChild,\n        dates.dateObj[i],\n        dates.minutes[i],\n        dates.formatted[i],\n      );\n    }\n  }\n\n  configFormCategoryInput(categoryData) {\n    const [title, color] = categoryData;\n    this.formCategoryWrapper.setAttribute(\"data-form-category\", title);\n    this.formCategorySelect.style.backgroundColor = color;\n    this.formCategoryWrapperIcon.style.backgroundColor = color;\n    this.formCatgoryIcon.firstChild.setAttribute(\"fill\", color);\n    this.formCategoryTitle.textContent = title;\n  }\n\n  getConfig(data) {\n    this.setFormSubmitType(\n      data.submission.type,\n      data.submission.id\n    );\n\n    this.configFormCategoryInput([\n      data.category.name,\n      data.category.color,\n    ]);\n\n    this.configFormDateInputs(\n      data.dates.object\n    );\n\n    if (data.submission.type === \"edit\") {\n      this.configFormTitleDescriptionInput(\n        data.submission.title,\n        data.submission.description\n      );\n    }\n  }\n}\n\nconst fullFormConfig = new FormConfig();\nexport default fullFormConfig;","import locales from \"../../locales/en\";\nimport setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nconst monthsArray = locales.labels.monthsShortLower;\nconst monthsArrayLong = locales.labels.monthsLongLower;\nconst gotoOverlay = document.querySelector(\".go-to-date-overlay\");\nconst goto = document.querySelector(\".go-to-date\");\nconst gotoInput = document.querySelector(\".go-to-input\");\nconst inputErrMessage = document.querySelector(\".go-to-err\");\nconst cancelGoto = document.querySelector(\".cancel-go-to\");\nconst submitGoto = document.querySelector(\".submit-go-to\");\nexport default function createGoTo(context, store, datepickerContext) {\n  function validateDate(date) {\n    let arr;\n    let haserr = false;\n\n    // accepts two formats: DD/MM/YYYY or jan 1 2021\n    if (date.includes(\"/\")) {\n      arr = date.split(\"/\");\n    } else {\n      arr = date.split(\" \");\n    }\n\n    if (arr.length !== 3) {\n      haserr = true;\n    }\n\n    // convert string year/month/day to int\n    // convert 'jan' to 0 || 'january' to 0\n    const [month, day, year] = arr.map((date, idx) => {\n      let dateInt = parseInt(date);\n      let tempMonth = null; // in case of month string\n\n\n      if (isNaN(dateInt)) {\n        if (date.length > 3) {\n          tempMonth = monthsArrayLong.indexOf(date.toLowerCase());\n        } else {\n          tempMonth = monthsArray.indexOf(date.toLowerCase());\n        }\n      }\n\n      if (idx === 0 && tempMonth === null) {\n        dateInt -= 1;\n        if (dateInt === -1) {\n          dateInt = 0;\n        }\n      }\n\n      if (tempMonth === -1) {\n        haserr = true;\n      }\n\n      // check if year is valid\n      // if user inputs value less than 100, assume they mean 2000s\n      // do not allow year greater than 2100 or less than 1901\n      if (idx === 2) {\n        if (dateInt < 100) {\n          dateInt += 2000;\n        } else if (dateInt > 2100) {\n          haserr = true;\n        } else if (dateInt > 100 && dateInt < 1901) {\n          haserr = true;\n        }\n      }\n\n      return tempMonth === null ? dateInt : tempMonth;\n    });\n\n\n    // form date object and check if valid\n    const dateObj = new Date(year, month, day);\n    if (dateObj.toString() === \"Invalid Date\") {\n      haserr = true;\n    }\n\n    return haserr ? false : dateObj;\n  }\n\n  function removeError() {\n    inputErrMessage.style.display = \"none\";\n    inputErrMessage.onmousedown = null;\n  }\n\n  function handleError() {\n    inputErrMessage.style.display = \"block\";\n    inputErrMessage.onmousedown = removeError;\n  }\n\n  function handleGoTo() {\n    const newdate = validateDate(gotoInput.value);\n    if (newdate instanceof Date) {\n      context.setDate(\n        newdate.getFullYear(),\n        newdate.getMonth(),\n        newdate.getDate()\n      );\n\n      context.setDateSelected(newdate.getDate());\n      if (context.getSidebarState() !== \"hide\") {\n        setSidebarDatepicker(context, store, datepickerContext);\n      }\n\n      let component = context.getComponent();\n      if (component === 'list') {\n        component = 'day';\n      }\n\n      closeGoTo();\n      setViews(component, context, store, datepickerContext);\n    } else {\n      handleError();\n    }\n  }\n\n  function closeGoToOnEscape(e) {\n    const key = e.key.toLowerCase();\n    if (key === \"escape\") {\n      if (inputErrMessage.style.display === \"block\") {\n        removeError();\n      } else {\n        closeGoTo();\n      }\n      return;\n    }\n\n    if (key === \"enter\") {\n      handleGoTo();\n      return;\n    }\n  }\n\n  function closeGoTo() {\n    document.removeEventListener(\"keydown\", closeGoToOnEscape);\n    cancelGoto.onclick = null;\n    submitGoto.onclick = null;\n    store.removeActiveOverlay(\"hide-gotodate\");\n    gotoOverlay.classList.add(\"hide-gotodate\");\n    goto.classList.add(\"hide-gotodate\");\n    gotoInput.value = \"\";\n  }\n\n  function formatStart() {\n    const [year, month, day] = [\n      context.getYear(),\n      context.getMonth(),\n      context.getDay(),\n    ];\n    return `${monthsArray[month]} ${day} ${year}`;\n  }\n\n  function openGoTo() {\n    // prevent keyboard shortcut from being registering in input field onload\n    removeError();\n    setTimeout(() => {\n      gotoInput.focus();\n      gotoInput.value = formatStart();\n    }, 10); // 10ms is within browser threshold\n    gotoOverlay.classList.remove(\"hide-gotodate\");\n    goto.classList.remove(\"hide-gotodate\");\n    store.addActiveOverlay(\"hide-gotodate\");\n    document.addEventListener(\"keydown\", closeGoToOnEscape);\n    cancelGoto.onclick = closeGoTo;\n    submitGoto.onclick = handleGoTo;\n  }\n\n  openGoTo();\n}","export default class FormSetup {\n  constructor () {\n    this.submission;\n    this.category;\n    this.dates;\n  }\n\n  /**\n   * \n   * @param {string} type (\"edit\" / \"create\")\n   * @param {string} id (entry ID || null)\n   * @param {string} title || null\n   * @param {string} description || nulll\n   */\n  setSubmission(type, id, title, description) {\n    this.submission = {\n      type: type,\n      id: id || null,\n      title: title || null,\n      description: description || null,\n    };\n  }\n\n  /**\n   * \n   * @param {string} name (store category name)\n   * @param {string} color (store category color)\n   * @param {string} offsetColor (category color rgba 0.5)\n   */\n  setCategory(name, color) {\n    this.category = {\n      name: name,\n      color: color,\n    };\n  }\n\n  /**\n   * \n   * @param {object} \n   * : {Dates: [new Date(start), new Date(end)]}\n   * : {Dates: [start(\"YYYY-MM-DD\"), end(\"YYYY-MM-DD\")]}\n   * : {Minutes: [number, number]}\n   */\n  setDates(object) {\n    this.dates = { object: object };\n  }\n\n  getSetup() {\n    return {\n      submission: this.submission,\n      category: this.category,\n      dates: this.dates,\n    };\n  }\n}","import { getClosest, throttle } from \"../../utilities/helpers\";\nimport {\n  getDateForStore,\n  compareDates,\n  getDateFromAttribute,\n  isBeforeDate\n} from \"../../utilities/dateutils\";\nimport setViews from \"../../config/setViews\";\n\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\nconst datepickerBody = document.querySelector(\".datepicker__body--dates\");\nconst datepickerTitle = document.querySelector(\".datepicker-title\");\nconst datepickerChangeDate = document.querySelector(\".datepicker-change-date\");\n\n// prev and next buttons aside from main app header datewrapper\nconst headerPrevBtn = document.querySelector(\".prev\");\nconst headerNextBtn = document.querySelector(\".next\");\n\nconst yearpickerTitle = document.querySelector(\".yearpicker-title\");\nconst monthpickerMonths = document.querySelectorAll(\".monthpicker__month\");\n\nexport default function setDatepicker(context, store, datepickerContext, type) {\n  let montharray = datepickerContext.getMonthArray();\n  let count = 0;\n  let hasweek;\n  let testDateSelected = type === \"form\" ? datepickerContext.getDateSelected() : context.getDateSelected();\n  let [checkmonth, checkyear] = [null, null];\n  const datepickerKeypressThrottle = throttle(handleKeydownNav, 100);\n\n  function setDatepickerHeader() {\n    const y = datepickerContext.getYear();\n    const m = datepickerContext.getMonthName();\n    datepickerTitle.textContent = `${m} ${y}`;\n  }\n\n  function createCells(montharray) {\n    datepickerBody.innerText = \"\";\n    let groupedEntries = store.getMonthEntryDates(montharray);\n    let currentWeekStart = context.getWeek();\n    let isDaySelected = false;\n\n    for (let i = 0; i < montharray.length; i++) {\n      const cell = document.createElement(\"div\");\n      const datename = document.createElement(\"div\");\n      cell.classList.add(\"datepicker__body--dates-cell\");\n      datename.classList.add(\"datepicker__body--datename\");\n\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\n        datename.classList.add(\"datepicker__body--datename-disabled\");\n      }\n\n      if (compareDates(montharray[i], currentWeekStart) && context.getComponent() === \"week\") {\n        hasweek = true;\n      }\n\n      if (hasweek) {\n        count++;\n        if (count <= 7) {\n          cell.classList.add(\"datepicker__body--dates-week\");\n        }\n      } else {\n        cell.classList.remove(\"datepicker__body--dates-week\");\n      }\n\n      if (montharray[i].getDate() === testDateSelected && montharray[i].getMonth() === datepickerContext.getMonth()) {\n        if (!datename.classList.contains(\"datepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\n          datename.classList.add(\"datepicker__body--datename-selected\");\n        }\n      }\n\n      if (context.isToday(montharray[i])) {\n        datename.setAttribute(\"class\", \"datepicker__body--datename\");\n        datename.classList.add(\"datepicker__body--datename-today\");\n      }\n\n      datename.innerText = montharray[i].getDate();\n      const formattedDate = getDateForStore(montharray[i]);\n\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\n      if (groupedEntries.includes(formattedDate)) {\n        if (!datename.classList.contains(\"datepicker__body--datename-today\") && !datename.classList.contains(\"datepicker__body--datename-selected\")) {\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\n          datename.classList.add(\"datepicker__body--datename-entries\");\n        }\n      } else {\n        datename.classList.remove(\"datepicker__body--datename-entries\");\n      }\n\n      cell.appendChild(datename);\n      datepickerBody.appendChild(cell);\n    }\n\n    currentWeekStart = null;\n    groupedEntries = [];\n  }\n\n  function renderpicker(y, m, d) {\n    context.setDate(y, m, d);\n    context.setDateSelected(d);\n    setViews(context.getComponent(), context, store, datepickerContext);\n    datepickerContext.setDate(y, m, d);\n    closeDatepicker();\n  }\n\n  function handleFormDate(y, m, d) {\n    datepickerContext.setDate(y, m, d);\n    context.setDateSelected(d);\n    const datepickerDate = datepickerContext.getDate();\n\n    const activeFormDate = document.querySelector(\".active-form-date\");\n    activeFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\n    activeFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\n\n    const inactiveFormDate = document?.querySelector(\".inactive-form-date\");\n    const inactiveValue = inactiveFormDate.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\n    const inactiveDate = new Date(inactiveValue[0], inactiveValue[1], inactiveValue[2]);\n    const inactiveDateType = inactiveFormDate.getAttribute(\"data-form-date-type\");\n\n    /**\n     * FORM DATEPICKER CONDITIONS\n     * 1. if user selects start date that is after end date\n     *   -- set end date to start date\n     * 2. if user selects end date that is before start date\n     *  -- set start date to end date\n     */\n    if ((isBeforeDate(inactiveDate, datepickerDate) && inactiveDateType === \"end\") || (isBeforeDate(datepickerDate, inactiveDate) && inactiveDateType === \"start\")) {\n      inactiveFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\n      inactiveFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\n    }\n  }\n\n  function setNewDate(e, data) {\n    let [y, m, d] = [null, null, null];\n    if (e === null) {\n      y = data[0];\n      m = data[1];\n      d = data[2];\n    } else {\n      let temp = getDateFromAttribute(e.target, \"data-datepicker-date\");\n      y = temp[0];\n      m = temp[1];\n      d = temp[2];\n    }\n    if (type === \"form\") {\n      handleFormDate(y, m, d);\n      closeDatepicker();\n    } else {\n      renderpicker(y, m, d);\n    }\n  }\n\n  function setCheckMonthYear() {\n    checkmonth = datepickerContext.getMonth();\n    checkyear = datepickerContext.getYear();\n  }\n\n  function getMonthYearCheck() {\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\n  }\n\n  function renderNextMonth() {\n    datepickerContext.setNextMonth();\n    montharray = datepickerContext.getMonthArray();\n    createCells(montharray);\n    setDatepickerHeader();\n  }\n\n  function renderPrevMonth() {\n    datepickerContext.setPrevMonth();\n    montharray = datepickerContext.getMonthArray();\n    createCells(montharray);\n    setDatepickerHeader();\n  }\n\n  function setSelectedToNextDay() {\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\n    const parent = curr.parentElement;\n    const next = parent?.nextElementSibling?.firstElementChild;\n\n    if (!next || next === undefined || next === null) {\n      renderNextMonth();\n      datepickerContext.setDateSelected(1);\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      let frst = document.querySelectorAll(\".datepicker__body--datename\");\n      frst[0].classList.add(\"datepicker__body--datename-selected\");\n      return;\n    } else {\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      next.classList.add(\"datepicker__body--datename-selected\");\n      let attr = next.getAttribute(\"data-datepicker-date\");\n      let newDateSelected = parseInt(attr.split(\"-\")[2]);\n      datepickerContext.setDateSelected(newDateSelected);\n      return;\n    }\n  }\n\n  function setSelectedToPrevDay() {\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\n    const parent = curr.parentElement;\n    const prev = parent?.previousElementSibling?.firstElementChild;\n\n    if (!prev || prev === undefined || prev === null) {\n      renderPrevMonth();\n      const lastday = datepickerContext.getDaysInMonth();\n      datepickerContext.setDateSelected(+lastday);\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      let last = document.querySelectorAll(\".datepicker__body--datename\");\n      last[last.length - 1].classList.add(\"datepicker__body--datename-selected\");\n      return;\n    } else {\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      prev.classList.add(\"datepicker__body--datename-selected\");\n      return;\n    }\n  }\n\n  function monthpickerSetMonth(val, init) {\n    const newmonth = val;\n\n    if (!init && newmonth === datepickerContext.getMonth()) return;\n    datepickerContext.setMonth(newmonth);\n    monthpickerMonths.forEach((month, idx) => {\n      if (idx === newmonth) {\n        month.classList.add(\"monthpicker__active-month\");\n      } else {\n        month.classList.remove(\"monthpicker__active-month\");\n      }\n    });\n  }\n\n  function yearpickerSetYear(increment, init) {\n    if (init) {\n      yearpickerTitle.textContent = datepickerContext.getYear();\n      return;\n    }\n\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\n    if (newyear == +datepickerContext.getYear()) return;\n    datepickerContext.setYear(newyear);\n    yearpickerTitle.textContent = newyear;\n  }\n\n  function handleMonthpicker(dir) {\n    const target = document.querySelector(\".monthpicker__active-month\");\n    let attr = parseInt(target.getAttribute(\"data-dp-month\"));\n    if (dir === \"next\") {\n      monthpickerSetMonth((attr + 1) % 12);\n    } else {\n      if (attr === 0) {\n        monthpickerSetMonth(11);\n      } else {\n        monthpickerSetMonth(attr - 1);\n      }\n    }\n  }\n\n  function openChangeDateModal() {\n    setCheckMonthYear();\n    datepickerChangeDate.classList.add(\"show-dpcd\");\n    yearpickerSetYear(null, true);\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\n  }\n\n  function closeChangeDateModal() {\n    // check if date has changed;\n    if (!getMonthYearCheck()) {\n      montharray = datepickerContext.getMonthArray();\n      createCells(montharray);\n      setDatepickerHeader();\n    }\n    datepickerChangeDate.classList.remove(\"show-dpcd\");\n  }\n\n  function closeDatepicker() {\n    datepicker.classList.add(\"hide-datepicker\");\n    datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\n    closeChangeDateModal();\n    const formOpen = store.getActiveOverlay().has(\"hide-form-overlay\");\n    const listOpen = context.getComponent() !== \"list\";\n    if (listOpen || !formOpen) {\n      headerPrevBtn.removeAttribute(\"style\");\n      headerNextBtn.removeAttribute(\"style\");\n    }\n\n    if (type === \"form\") {\n      document.querySelector(\".active-form-date\")?.classList.remove(\"active-form-date\");\n    }\n\n    datepickerBody.innerText = \"\";\n    datepicker.removeAttribute(\"tabindex\");\n    count = 0;\n    checkmonth = null;\n    checkyear = null;\n    montharray = [];\n\n    datepickeroverlay.onclick = null;\n    datepicker.onclick = null;\n    document.removeEventListener(\"keydown\", datepickerKeypressThrottle);\n  }\n\n  function delegateDatepickerEvents(e) {\n    const datenumber = getClosest(e, \".datepicker__body--datename\");\n    const navnext = getClosest(e, \".datepicker-nav--next\");\n    const navprev = getClosest(e, \".datepicker-nav--prev\");\n    const title = getClosest(e, \".datepicker-title\");\n    const closeChangeDateBtn = getClosest(e, \".close-change-date\");\n    const ypNext = getClosest(e, \".yearpicker-next\");\n    const ypPrev = getClosest(e, \".yearpicker-prev\");\n    const mpMonth = getClosest(e, \".monthpicker__month\");\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (navnext) {\n      renderNextMonth();\n      return;\n    }\n\n    if (navprev) {\n      renderPrevMonth();\n      return;\n    }\n\n    if (title) {\n      openChangeDateModal();\n      return;\n    }\n\n    if (closeChangeDateBtn) {\n      closeChangeDateModal();\n      return;\n    }\n\n    if (ypNext) {\n      yearpickerSetYear(1, false);\n      return;\n    }\n\n    if (ypPrev) {\n      yearpickerSetYear(-1, false);\n      return;\n    }\n\n    if (mpMonth) {\n      const newmonth = parseInt(e.target.getAttribute(\"data-dp-month\"));\n      monthpickerSetMonth(newmonth, false);\n      return;\n    }\n  }\n\n  function handleKeydownNav(e) {\n    // functionality will change depending on whether the change date modal is open -- use flag to check\n    const flag = datepickerChangeDate.classList.contains(\"show-dpcd\");\n    switch (e.key) {\n\n      case \"ArrowDown\":\n        flag ? yearpickerSetYear(-1, false) : renderPrevMonth();\n        break;\n\n      case \"ArrowUp\":\n        flag ? yearpickerSetYear(1, false) : renderNextMonth();\n        break;\n\n      case \"ArrowRight\":\n        flag ? handleMonthpicker(\"next\") : setSelectedToNextDay();\n        break;\n\n      case \"ArrowLeft\":\n        flag ? handleMonthpicker(\"prev\") : setSelectedToPrevDay();\n        break;\n\n      case \"Enter\":\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\n          closeChangeDateModal();\n        } else {\n          const target = document.querySelector(\".datepicker__body--datename-selected\");\n          if (target === null || !target) {\n            // the last selected day in the previous month was longer than the days in the current month\n            setNewDate(null, [\n              datepickerContext.getYear(),\n              datepickerContext.getMonth(),\n              28\n            ]);\n          } else {\n            let attr = getDateFromAttribute(target, \"data-datepicker-date\");\n            setNewDate(null, attr);\n          }\n        }\n        break;\n\n      case \"Escape\":\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\n          closeChangeDateModal();\n        } else {\n          closeDatepicker();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function initDatepicker() {\n    setDatepickerHeader();\n    createCells(montharray);\n    store.setResetDatepickerCallback(closeDatepicker);\n    datepickeroverlay.onclick = closeDatepicker;\n    datepicker.onclick = delegateDatepickerEvents;\n    document.addEventListener(\"keydown\", datepickerKeypressThrottle);\n    montharray = [];\n  };\n\n  initDatepicker();\n}\n","import locales from \"../../locales/en\";\nimport { createCheckIcon } from \"../../utilities/svgs\";\nimport { isNumeric, placePopup } from \"../../utilities/helpers\";\nconst checkIcon = createCheckIcon('var(--taskcolor');\nconst colors = Object.values(locales.colors);\n\nclass CatFormHelper {\n  constructor (catname, catcolor) {\n    this.catname = catname;\n    this.catcolor = catcolor;\n    this.errMsg = '';\n    this.prevColorIdx = catcolor;\n    this.originalName = catname;\n    this.originalColor = catcolor;\n  }\n  setName(name) { this.catname = name; }\n  setColor(color) { this.catcolor = color; }\n  setPrevColor(color) { this.prevColorIdx = color; }\n  getName() { return this.catname; }\n  getColor() { return this.catcolor; }\n  prevColor() { return this.prevColorIdx; }\n  setErrMsg(msg) { this.errMsg = msg; }\n  getErrMsg() { return this.errMsg; }\n  getOriginalName() { return this.originalName; }\n  getOriginalColor() { return this.originalColor; }\n}\n\nconst ctgform = document.querySelector(\".category__form\");\nconst ctgformoverlay = document.querySelector(\".category__form-overlay\");\nconst ctgformInput = document.querySelector(\".category__form-input\");\nconst colorPickerTitle = document.querySelector(\".color-picker__title\");\nconst colorPickerOptions = document.querySelector(\".color-picker__options\");\nconst ctgErrMsg = document.querySelector(\".ctg-input--err\");\n\nexport default function createCategoryForm(store, selectedCategory, editing, resetParent) {\n\n  const formhelper = new CatFormHelper(\n    selectedCategory.name,\n    selectedCategory.color\n  );\n\n  function createColorOption(color, selected) {\n    const colorOption = document.createElement(\"div\");\n    colorOption.classList.add(\"color-picker--option\");\n    colorOption.style.backgroundColor = color;\n    colorOption.setAttribute(\"data-color-hex\", color);\n\n    if (color === selected) {\n      colorOption.append(checkIcon);\n      formhelper.setColor(color);\n    }\n\n    return colorOption;\n  }\n\n  function createPickerOptions(currentColor) {\n    colorPickerOptions.innerText = \"\";\n    colors.forEach((color) => {\n      for (let i = 1; i < 8; i++) {\n        colorPickerOptions.append(\n          createColorOption(color[i], currentColor)\n        );\n      }\n    });\n  }\n\n  function handleColorSelection(e, current) {\n    const target = e.target;\n    const color = target.getAttribute(\"data-color-hex\");\n\n    if (color === current) return;\n\n    const colorOptions = document.querySelectorAll(\".color-picker--option\");\n    colorOptions.forEach((option) => {\n      option.innerText = \"\";\n    });\n    target.appendChild(checkIcon);\n    colorPickerTitle.style.background = color;\n    formhelper.setColor(color);\n  }\n\n  function handleInputErr() {\n    const removeInputErr = () => {\n      ctgErrMsg.classList.add(\"hide-ctg-err\");\n      ctgformInput.focus();\n    };\n    ctgErrMsg.textContent = formhelper.getErrMsg();\n    ctgErrMsg.onclick = removeInputErr;\n  }\n\n  function validateNewCategory(categoryName, color) {\n    let trimName = categoryName.trim().replace(/[^a-zA-Z0-9\\s]+|\\s{2,}/g, ' ').trim();\n\n    if (isNumeric(trimName)) {\n      trimName = `category ${trimName}`;\n    }\n\n    const origName = formhelper.getOriginalName();\n\n    let errormsg = false;\n    if (trimName.length < 1) {\n      formhelper.setErrMsg(\"Category name is required\");\n      errormsg = true;\n    } else if (store.hasCtg(trimName)) {\n      if (!editing || (editing && origName !== trimName)) {\n        formhelper.setErrMsg(\"Category already exists\");\n        errormsg = true;\n      }\n    }\n\n    if (errormsg) {\n      ctgErrMsg.classList.remove(\"hide-ctg-err\");\n      handleInputErr(errormsg);\n      return;\n    } else {\n      if (editing) {\n        if (origName === trimName && formhelper.getOriginalColor() === color) {\n          closeCategoryForm();\n          return;\n        } else {\n          if (origName !== trimName) {\n            store.updateCtg(trimName, color, formhelper.getName());\n          } else {\n            store.updateCtgColor(origName, color);\n          }\n        }\n      } else {\n        store.addNewCtg(trimName, color);\n      }\n\n      const fullrenderCtg = store.getRenderCategoriesCallback();\n      closeCategoryForm();\n      fullrenderCtg();\n    }\n  }\n\n  function closeCategoryForm() {\n    if (resetParent !== null) {\n      resetParent.removeAttribute(\"style\");\n    }\n    colorPickerOptions.innerText = \"\";\n    ctgform.classList.add(\"hide-ctg-form\");\n    ctgformoverlay.classList.add(\"hide-ctg-form\");\n    ctgformInput.value = \"\";\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\n    store.removeActiveOverlay('hide-ctg-form');\n    ctgform.onmousedown = null;\n    ctgformoverlay.onclick = null;\n    document.removeEventListener(\"keydown\", closeCategoryFormOnEsc);\n  }\n\n  function closeCategoryFormOnEsc(e) {\n    const val = e.key.toLowerCase();\n    if (val === \"escape\") {\n      if (!ctgErrMsg.classList.contains(\"hide-ctg-err\")) {\n        ctgErrMsg.classList.add(\"hide-ctg-err\");\n        ctgformInput.focus();\n        return;\n      } else {\n        closeCategoryForm();\n        return;\n      }\n    }\n    if (val === \"enter\") {\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\n      return;\n    }\n  }\n\n  function openCtgForm(editing) {\n    store.addActiveOverlay(\"hide-ctg-form\");\n    ctgformoverlay.classList.remove(\"hide-ctg-form\");\n    ctgform.classList.remove(\"hide-ctg-form\");\n    ctgform.removeAttribute(\"style\");\n\n    if (resetParent !== null) {\n      const rect = resetParent.getBoundingClientRect();\n      const getright = parseInt(rect.right);\n      const gettop = parseInt(rect.top);\n      const [x, y] = placePopup(\n        280,\n        352,\n        [getright - 20, gettop - 28],\n        [window.innerWidth, window.innerHeight],\n        false,\n        null\n      );\n      ctgform.setAttribute(\"style\", `left:${x}px;top:${y}px;`);\n    } else {\n      ctgform.setAttribute(\"style\", \"left:5%;top:5%;right:5%;margin:auto;\");\n    }\n\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\n    colorPickerTitle.style.backgroundColor = formhelper.getColor();\n    setTimeout(() => {\n      if (editing) {\n        ctgformInput.value = formhelper.getName();\n      } else {\n        ctgformInput.placeholder = \"Create new category\";\n      }\n      ctgformInput.focus();\n    }, 4);\n  }\n\n  function gc(e, element) {\n    return e.target.closest(element);\n  }\n\n  function delegateCtgForm(e) {\n    const cancelctgBtn = gc(e, \".category__form--cancel\");\n    const colorOption = gc(e, \".color-picker--option\");\n    const submitctgBtn = gc(e, \".category__form--submit\");\n\n    if (cancelctgBtn) {\n      closeCategoryForm(e);\n      return;\n    }\n\n    if (colorOption) {\n      handleColorSelection(e, formhelper.getColor());\n      return;\n    }\n\n    if (submitctgBtn) {\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\n      return;\n    }\n  }\n\n  const initCtgForm = () => {\n    createPickerOptions(formhelper.getColor());\n    openCtgForm(editing);\n    ctgform.onmousedown = delegateCtgForm;\n    ctgformoverlay.onclick = closeCategoryForm;\n    document.addEventListener(\"keydown\", closeCategoryFormOnEsc);\n  };\n\n  initCtgForm();\n}","import setViews from \"../../config/setViews\";\nimport { getClosest } from \"../../utilities/helpers\";\n\nimport {\n  formatEntryOptionsDate,\n  compareDates,\n} from \"../../utilities/dateutils\";\n\nconst entryOptionsOverlay = document.querySelector(\".entry__options--overlay\");\nconst entryOptionsWrapper = document.querySelector('.entry__options');\nconst entryOptionsHeaderWrapper = document.querySelector(\".entry__options--header\")\nconst entryOptionsDateHeader = document.querySelector('.entry__options-date');\nconst entryOptionsTimeHeader = document.querySelector('.entry__options-time');\nconst entryOptionTitle = document.querySelector(\".eob-title\");\nconst entryOptionDescription = document.querySelector('.eob-description');\nconst entryOptionCategoryIcon = document.querySelector(\".eob-category--icon\");\nconst entryOptionCategory = document.querySelector('.eob-category');\n\nexport default function getEntryOptionModal(context, store, entry, datepickerContext, finishSetup) {\n\n  function openEditForm() {\n    const openForm = store.getRenderFormCallback();\n    openForm();\n    finishSetup();\n    closeEntryOptions();\n  }\n\n  function proceedDelete(entry) {\n    store.deleteEntry(entry.id);\n    closeEntryOptions();\n    setViews(context.getComponent(), context, store, datepickerContext);\n  }\n\n  function openDeleteWarning() {\n    const deletepopup = document.createElement(\"div\");\n    deletepopup.classList.add(\"delete-popup\");\n\n    const deletebtns = document.createElement(\"div\");\n    deletebtns.classList.add(\"delete-popup__btns\");\n\n    const deletepopupCancel = document.createElement(\"button\");\n    deletepopupCancel.classList.add(\"delete-popup__cancel\");\n    deletepopupCancel.textContent = \"Cancel\";\n\n    const deletepopupConfirm = document.createElement(\"button\");\n    deletepopupConfirm.classList.add(\"delete-popup__confirm\");\n    deletepopupConfirm.textContent = \"Delete\";\n\n    const deletepopupText = document.createElement(\"p\");\n    deletepopupText.classList.add(\"delete-popup__text\");\n    deletepopupText.textContent = \"Are you sure you want to delete this entry?\";\n\n    deletebtns.append(deletepopupCancel, deletepopupConfirm);\n    deletepopup.append(deletepopupText, deletebtns);\n    entryOptionsWrapper.append(deletepopup);\n\n    const removeDeletePopup = () => { deletepopup.remove(); };\n    const submitDelete = () => {\n      proceedDelete(entry);\n      removeDeletePopup();\n      const resetCurrentView = store.getFormResetHandle(context.getComponent());\n      if (resetCurrentView !== null) {\n        resetCurrentView();\n      }\n    };\n\n    deletepopupCancel.onclick = removeDeletePopup;\n    deletepopupConfirm.onclick = submitDelete;\n  }\n\n\n  /**\n   * formNegated\n   * @desc anytime the entry options modal is opened, the form is set to represent the entry selected. If user chooses to not open the form from this modal, reset form & modal to default state.\n   */\n  function formNegated() {\n    const resetCurrentView = store.getFormResetHandle(context.getComponent());\n    closeEntryOptions();\n    resetCurrentView();\n  }\n\n  function closeEntryOptions() {\n    [\n      entryOptionsDateHeader,\n      entryOptionsTimeHeader,\n      entryOptionTitle,\n      entryOptionDescription,\n      entryOptionCategory,\n    ].forEach(el => el.innerText = \"\");\n\n    entryOptionsWrapper.classList.add(\"entry__options--hidden\");\n    entryOptionsOverlay.classList.add(\"entry__options--hidden\");\n    store.removeActiveOverlay(\"entry__options--hidden\");\n    entryOptionDescription.parentElement.removeAttribute(\"style\");\n    entryOptionsWrapper.onclick = null;\n    entryOptionsOverlay.onclick = null;\n    entryOptionsHeaderWrapper.focus();\n    document.removeEventListener(\"keydown\", handleEntryOptionKD);\n  }\n\n  function setEntryDefaults() {\n    entryOptionsWrapper.classList.remove(\"entry__options--hidden\");\n    entryOptionsOverlay.classList.remove(\"entry__options--hidden\");\n    store.addActiveOverlay(\"entry__options--hidden\");\n\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\n    let istoday = false;\n    if (compareDates(start, new Date())) {\n      istoday = true;\n    }\n\n    const getDateTime = formatEntryOptionsDate(start, end);\n    entryOptionsDateHeader.textContent = getDateTime.date;\n    if (getDateTime.time !== null) {\n      if (getDateTime.time === undefined) {\n        let tempdate = new Date();\n        let secondsDiff = tempdate.getTime() - end.getTime();\n        let daysSince = Math.floor(secondsDiff / (1000 * 60 * 60 * 24));\n        let timeheadertitle;\n\n        /**\n         * If the entry has ended, display the time since it ended\n         * If the entry has ended today, display the time since it ended\n         * If the entry has ended yesterday, display \"ended yesterday\"\n         * If the entry starts today, display how long until it is scheduled to end\n         * If the entry is yet to start, display how long until it is scheduled to start\n         */\n        if (daysSince === 0) {\n          let hourSince = Math.floor(secondsDiff / (1000 * 60 * 60));\n          let minSince = Math.floor((secondsDiff - (hourSince * 1000 * 60 * 60)) / (1000 * 60));\n          if (hourSince === 0) {\n            if (minSince === 1) {\n              timeheadertitle = `ended ${minSince} minute ago`;\n            } else {\n              timeheadertitle = `ended ${minSince} minutes ago`;\n            }\n          } else if (hourSince === 1) {\n            timeheadertitle = `ended ${hourSince} hour ago`;\n          } else if (hourSince > 1) {\n            timeheadertitle = `ended ${hourSince} hours ago`;\n          }\n        } else if (daysSince === 1) {\n          timeheadertitle = \"ended yesterday\";\n        } else {\n          timeheadertitle = `ended ${daysSince} days ago`;\n        }\n        entryOptionsTimeHeader.textContent = timeheadertitle;\n      } else {\n        if (istoday) {\n          entryOptionsTimeHeader.textContent = \"ending in \" + getDateTime.time;\n        } else {\n          entryOptionsTimeHeader.textContent = getDateTime.time;\n        }\n      }\n    }\n\n    entryOptionTitle.textContent = entry.title;\n\n    entry.description.length === 0 ? entryOptionDescription.parentElement.style.display = \"none\" : entryOptionDescription.textContent = entry.description;\n\n    entryOptionCategoryIcon.setAttribute(\"fill\", store.getCtgColor(entry.category));\n    entryOptionCategory.textContent = entry.category;\n\n    entryOptionsWrapper.onclick = delegateEntryOptions;\n    entryOptionsOverlay.onclick = formNegated;\n    // entryOptionsWrapper.focus();\n    document.addEventListener(\"keydown\", handleEntryOptionKD);\n  }\n\n  function handleEntryOptionKD(e) {\n    const deletepopup = document?.querySelector(\".delete-popup\");\n\n    if (e.key === \"Escape\") {\n      if (deletepopup) {\n        deletepopup.remove();\n        return;\n      } else {\n        formNegated();\n      }\n    }\n\n    if (e.key.toLowerCase() === \"e\") {\n      openEditForm();\n    }\n\n    if (e.key === \"Delete\") {\n      openDeleteWarning();\n    }\n  }\n\n  function delegateEntryOptions(e) {\n    const editBtn = getClosest(e, \".eoi__edit\");\n    const deleteBtn = getClosest(e, \".eoi__delete\");\n    const closeBtn = getClosest(e, \".eoi__close\");\n\n    if (editBtn) {\n      openEditForm();\n      return;\n    }\n\n    if (deleteBtn) {\n      openDeleteWarning();\n      return;\n    }\n\n    if (closeBtn) {\n      formNegated();\n      return;\n    }\n  }\n\n  setEntryDefaults();\n}","import locales from \"../../locales/en\";\n\nexport default function setHeader(context, component, store) {\n  let temp = new Date();\n  const btntoday = document.querySelector(\".btn-today\");\n  btntoday.setAttribute(\"data-tooltip\", `${locales.labels.weekdaysLong[temp.getDay()]}, ${locales.labels.monthsLong[temp.getMonth()]} ${temp.getDate()}`);\n\n  const dateTimeTitle = document.querySelector(\".datetime-content--title\");\n  const header = document.querySelector(\".header\");\n  const selectElement = document.querySelector(\".select__modal\");\n  const btnprev = document.querySelector('.prev');\n  const btnnext = document.querySelector('.next');\n  const datetimeWrapper = document.querySelector(\".h-col-2\");\n  const datetimeContent = document.querySelector(\".datetime-content\");\n  const prevnext = document.querySelector(\".prev-next\");\n\n  const configHeader = (borderstyle, componentTitle) => {\n    header.style.borderBottom = borderstyle;\n    dateTimeTitle.textContent = componentTitle;\n    datetimeWrapper.classList.remove(\"datetime-inactive\");\n    datetimeWrapper.style.paddingRight = \"0\";\n    datetimeContent.removeAttribute(\"style\");\n    prevnext.removeAttribute(\"style\");\n  };\n\n  const setHeaderAttributes = (view) => {\n    if (view !== \"list\") {\n      btnprev.setAttribute(\"data-tooltip\", `prev ${view}`);\n      btnnext.setAttribute(\"data-tooltip\", `next ${view}`);\n    }\n    selectElement.textContent = view[0].toUpperCase() + view.slice(1);\n    selectElement.setAttribute(\"data-value\", view.slice(0, 1).toUpperCase());\n  };\n\n  switch (component) {\n    case \"day\":\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getDay()}, ${context.getYear()}`);\n      setHeaderAttributes(\"day\");\n      break;\n    case \"week\":\n      configHeader(\"1px solid transparent\", context.getWeekRange());\n      setHeaderAttributes(\"week\");\n      break;\n    case \"month\":\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getYear()}`);\n      setHeaderAttributes(\"month\");\n      break;\n    case \"year\":\n      configHeader(\"1px solid transparent\", context.getYear());\n      setHeaderAttributes(\"year\");\n      break;\n    case \"list\":\n      setHeaderAttributes(\"list\");\n      header.style.borderBottom = \"1px solid var(--mediumgrey1)\";\n      prevnext.setAttribute(\"style\", \"pointer-events:none;\");\n      // prevnext.setAttribute(\"style\", \"opacity: 0; pointer-events:none;\");\n      datetimeWrapper.classList.add(\"datetime-inactive\");\n      break;\n    default:\n      break;\n  }\n}\n","const shortcutsModalOverlay = document.querySelector(\".shortcuts-modal-overlay\");\nconst shortcutsModal = document.querySelector(\".shortcuts__modal\");\nconst shortcutsModalContent = document.querySelector(\".shortcuts-modal-content\");\nconst shortcutsModalClose = document.querySelector(\".close-shortcuts-modal\");\nconst notifyShortcutsStatus = document.querySelector(\".keyboard-disabled-sm-two\");\n\nexport default function handleShortCutsModal(store) {\n  function createShortcut(key, description) {\n    const shortcut = document.createElement(\"div\");\n    shortcut.classList.add(\"sm-item\");\n\n    const shortcutKey = document.createElement(\"div\");\n    shortcutKey.classList.add(\"sm-key\");\n    const keyone = document.createElement(\"span\");\n    if (Array.isArray(key)) {\n      const or = document.createElement(\"span\");\n      or.textContent = \" or \";\n      const keytwo = document.createElement(\"span\");\n      keyone.textContent = key[0].toUpperCase();\n      keytwo.textContent = key[1].toUpperCase();\n      shortcutKey.append(keyone, or, keytwo);\n    } else {\n      if (key == \"ENTER\" || key == \"ESCAPE\" || key == \"DELETE\") {\n        keyone.classList.add(\"key-full\");\n      }\n      keyone.textContent = key.toUpperCase();\n      shortcutKey.appendChild(keyone);\n    }\n\n    const shortcutDescription = document.createElement(\"div\");\n    shortcutDescription.classList.add(\"sm-description\");\n    if (Array.isArray(description)) {\n      shortcut.classList.add(\"sm-item--full\");\n      shortcutDescription.classList.add(\"sm-description--full\");\n      const descriptionOne = document.createElement(\"span\");\n      const descriptionTwo = document.createElement(\"span\");\n      descriptionOne.textContent = description[0];\n      descriptionTwo.textContent = description[1];\n      shortcutDescription.append(descriptionOne, descriptionTwo);\n    } else {\n      shortcutDescription.textContent = description;\n    }\n    shortcut.append(shortcutKey, shortcutDescription);\n    return shortcut;\n  }\n\n  function handleShortcutsModalClose() {\n    shortcutsModalContent.innerText = \"\";\n    shortcutsModalOverlay.classList.add(\"hide-shortcuts\");\n    shortcutsModal.classList.add(\"hide-shortcuts\");\n    store.removeActiveOverlay(\"hide-shortcuts\");\n    document.removeEventListener(\"keydown\", closeShortcutsOnKeydown);\n  }\n\n  function closeShortcutsOnKeydown(e) {\n    let inp = e.key.toLowerCase();\n    if (inp === \"escape\" || inp === \"/\" || inp === \"?\") {\n      handleShortcutsModalClose();\n    }\n  }\n\n  function setStatusIcon(status) {\n    if (status) {\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\n\n    } else {\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\n    }\n  }\n\n  function handleShortcutsModalOpen() {\n    shortcutsModalOverlay.classList.remove(\"hide-shortcuts\");\n    shortcutsModal.classList.remove(\"hide-shortcuts\");\n    store.addActiveOverlay(\"hide-shortcuts\");\n\n    const status = store.getShortcutsStatus();\n    setStatusIcon(status);\n\n    const shortcuts = store.getShortcuts();\n    for (let i = 0; i < Object.values(shortcuts).length; i++) {\n      const value = Object.values(shortcuts)[i];\n      shortcutsModalContent.appendChild(createShortcut(\n        value.shortcut,\n        value.action,\n      ));\n    }\n\n    function toggleShortcutsStatus() {\n      const status = store.getShortcutsStatus() === false ? true : false;\n      setStatusIcon(status);\n      store.setShortcutsStatus(status);\n    }\n\n    shortcutsModalOverlay.onclick = handleShortcutsModalClose;\n    shortcutsModalClose.onclick = handleShortcutsModalClose;\n    notifyShortcutsStatus.onclick = toggleShortcutsStatus;\n    document.addEventListener(\"keydown\", closeShortcutsOnKeydown);\n  }\n\n  handleShortcutsModalOpen();\n}","import setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\n\nimport {\n  createCheckIcon,\n  createEditIcon,\n  createCloseIcon,\n  createTrashIcon,\n} from \"../../utilities/svgs\";\n\nimport {\n  getClosest,\n  placePopup\n} from \"../../utilities/helpers\";\n\nimport createCategoryForm from \"./editCategory\";\n\nconst sidebarColTwo = document.querySelector(\".sb__categories\");\nconst cWrapper = document.querySelector(\".sb__categories--body\");\nconst categoriesContainer = document.querySelector(\".sb__categories--body-form\");\nconst categoriesHeader = document.querySelector(\".sb__categories--header\");\nconst categoryHeaderCaret = document.querySelector(\".sbch-caret\");\n// renders via menu click -- see ./renderViews.js\n\nexport default function handleSidebarCategories(context, store, datepickerContext) {\n  const defaultCtg = store.getDefaultCtg()[0];\n\n  function updateComponent() {\n    setViews(context.getComponent(), context, store, datepickerContext);\n  }\n\n  function renderSidebarDatepickerCtg() {\n    setSidebarDatepicker(context, store, datepickerContext);\n  }\n\n  function renderCategories() {\n    categoriesContainer.innerText = \"\";\n    const ctg = store.getAllCtg();\n    const keys = Object.keys(ctg);\n    for (let i = 0; i < keys.length; i++) {\n      let [ctgname, color, status] = [\n        keys[i],\n        ctg[keys[i]].color,\n        ctg[keys[i]].active\n      ];\n      createCategoryListItem(ctgname, color, status);\n    }\n  }\n\n  /**\n   * \n   * @param {string} ctgname - category name\n   * @param {string} ctgcolor - hex color\n   * @param {Boolean} status - checked or not\n   */\n  function createCategoryListItem(ctgname, ctgcolor, status) {\n    const row = document.createElement('div');\n    row.classList.add('sbch-form--item');\n    const colone = document.createElement('div');\n    colone.classList.add('sbch-form--item__col');\n    const checkboxWrapper = document.createElement('div');\n    checkboxWrapper.classList.add('sbch-form--item__checkbox--wrapper');\n    const checkbox = document.createElement('button');\n    checkbox.classList.add('sbch-form--item__checkbox');\n    checkbox.setAttribute(\"data-sbch-checked\", `${status}`);\n    checkbox.setAttribute(\"data-sbch-category\", ctgname);\n    \n    let checkIcon;\n    if (status) {\n      checkbox.style.backgroundColor = ctgcolor;\n      checkIcon = createCheckIcon(\"var(--taskcolor0)\");\n    } else {\n      checkbox.style.backgroundColor = \"var(--black1)\";\n      checkIcon = createCheckIcon(\"none\");\n    }\n\n    checkbox.style.border = `2px solid ${ctgcolor}`;\n    checkbox.appendChild(checkIcon);\n    checkboxWrapper.appendChild(checkbox);\n\n    const label = document.createElement('span');\n    label.classList.add('sbch-form--item__label');\n    label.textContent = ctgname;\n    colone.append(checkboxWrapper, label);\n\n    const coltwo = document.createElement('div');\n    coltwo.classList.add('sbch-form--item__col--actions');\n    const deleteicon = document.createElement('button');\n    deleteicon.classList.add('sbch-col--actions__delete-icon');\n    deleteicon.setAttribute(\"data-sbch-category\", ctgname);\n    deleteicon.setAttribute(\"data-sbch-color\", ctgcolor);\n    const editicon = document.createElement('button');\n    editicon.classList.add(\"sbch-col--actions__edit-icon\");\n    editicon.setAttribute(\"data-sbch-category\", ctgname);\n    editicon.setAttribute(\"data-sbch-color\", ctgcolor);\n\n    // must have at least one category, so default cannot be deleted\n    if (ctgname.toLowerCase() === defaultCtg) {\n      editicon.classList.add(\"sbch-col--actions__edit-icon--immutable\");\n    } else {\n      deleteicon.appendChild(createCloseIcon(\"var(--white2)\"));\n      coltwo.appendChild(deleteicon);\n    }\n\n\n    editicon.appendChild(createEditIcon(\"var(--white2)\"));\n    coltwo.appendChild(editicon);\n    row.append(colone, coltwo);\n    categoriesContainer.appendChild(row);\n  }\n\n  function handleCategoryModalToggle() {\n    cWrapper.classList.toggle(\"toggle-category--modal\");\n    if (!cWrapper.classList.contains(\"toggle-category--modal\")) {\n      categoryHeaderCaret.classList.add(\"sbch-caret--open\");\n    } else {\n      categoryHeaderCaret.classList.remove(\"sbch-caret--open\");\n    }\n    categoriesHeader.style.backgroundColor = \"var(--black0)\";\n    setTimeout(() => {\n      categoriesHeader.style.backgroundColor = \"var(--black1)\";\n    }, 200);\n  }\n\n  function createDeleteCategoryPopup(e) {\n    const ctgname = e.target.getAttribute(\"data-sbch-category\");\n    const ctgcolor = store.getCtgColor(ctgname);\n    const offsetColor = ctgcolor;\n    const categoryLength = store.getCtgLength(ctgname);\n    let noEntries = false;\n\n    // POPUP OVERLAY\n    const popupBoxOverlay = document.createElement(\"aside\");\n    popupBoxOverlay.classList.add(\"popup-delete-ctg__overlay\");\n\n    // POPUP BOX\n    const popupBox = document.createElement(\"aside\");\n    popupBox.classList.add(\"popup-delete-ctg\");\n    if (categoryLength === 0) {\n      noEntries = true;\n      popupBox.classList.add(\"popup-delete-ctg__no-entries\");\n    }\n    const ord = categoryLength === 1 ? \"entry\" : \"entries\";\n\n    /* **************************** */\n    // POPUP HEADER\n    const popupHeader = document.createElement(\"div\");\n    popupHeader.classList.add(\"popup-delete-ctg__header\");\n\n    const popupTitle = document.createElement(\"div\");\n    popupTitle.classList.add(\"popup-delete-ctg__title\");\n    popupTitle.style.border = `2px solid ${ctgcolor}`;\n    popupTitle.style.backgroundColor = offsetColor;\n    popupTitle.textContent = `removing  \"${ctgname}\"`;\n\n    const popupCategoryStats = document.createElement(\"div\");\n    popupCategoryStats.classList.add(\"popup-delete-ctg__stats\");\n    popupCategoryStats.textContent = `(${categoryLength} total ${ord} in this category)`;\n    /* **************************** */\n    popupHeader.append(popupTitle, popupCategoryStats);\n    popupBox.appendChild(popupHeader);\n\n\n    // category has entries -- provide options to move entries to another category or delete them\n    // const setChecked = (inp) => {\n    //   inp.checked = true;\n    // }\n    if (!noEntries) {\n      // POPUP BODY\n      const popupBody = document.createElement(\"div\");\n      popupBody.classList.add(\"popup-delete-ctg__body\");\n\n      // OPTION ONE : MOVE ENTRIES TO ANOTHER CATEGORY\n      const optionsWrapperOne = document.createElement(\"div\");\n      const categoryNames = store.getAllCtgNames();\n      optionsWrapperOne.classList.add(\"popup-delete-ctg__options\");\n      optionsWrapperOne.classList.add(\"popup-delete-act\");\n      optionsWrapperOne.style.backgroundColor = offsetColor;\n      optionsWrapperOne.style.border = `2px solid ${ctgcolor}`;\n      const optionMoveRadio = document.createElement(\"input\");\n      optionMoveRadio.setAttribute(\"type\", \"radio\");\n      optionMoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\n      optionMoveRadio.setAttribute(\"id\", \"ctg-move\");\n      optionMoveRadio.setAttribute(\"checked\", \"true\");\n\n      const optionMove = document.createElement(\"div\");\n      const optionMoveTitle = document.createElement(\"span\");\n      const optionMoveSelect = document.createElement(\"select\");\n      optionMove.classList.add(\"popup-delete-ctg__option--move\");\n      optionMoveTitle.textContent = `Move \"${ctgname}\" ${ord} to `;\n      optionMoveSelect.classList.add(\"popup-delete-ctg__option--move-select\");\n      for (let i = 0; i < categoryNames.length; i++) {\n        if (categoryNames[i] === ctgname) continue;\n        const option = document.createElement(\"option\");\n        option.value = categoryNames[i];\n        option.textContent = categoryNames[i];\n        optionMoveSelect.appendChild(option);\n      }\n      optionMove.append(optionMoveTitle, optionMoveSelect);\n      optionsWrapperOne.append(optionMoveRadio, optionMove);\n\n\n      /* ************ */\n      // OPTION TWO : REMOVE CATEGORY AND ENTRIES\n      const optionsWrapperTwo = document.createElement(\"div\");\n      optionsWrapperTwo.classList.add(\"popup-delete-ctg__options\");\n      optionsWrapperTwo.style.border = `2px solid ${ctgcolor}`;\n\n      const optionRemoveRadio = document.createElement(\"input\");\n      optionRemoveRadio.setAttribute(\"type\", \"radio\");\n      optionRemoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\n      optionRemoveRadio.setAttribute(\"id\", \"ctg-delete\");\n\n      const optionRemove = document.createElement(\"div\");\n      optionRemove.classList.add(\"popup-delete-ctg__option--remove\");\n      const optionRemoveTitle = document.createElement(\"span\");\n\n      optionRemoveTitle.textContent = `Delete \"${ctgname}\" and ${categoryLength} ${ord} (irreversible)`;\n      const optionRemoveIcon = createTrashIcon(ctgcolor);\n      const handleWrapperClick = (e) => {\n        if (e.target.id === \"ctg-delete\" || e.target.id === \"ctg-move\" || e.target.classList.contains(\"popup-delete-ctg__option--move\") || e.target.classList.contains(\"popup-delete-ctg__option--move-select\")) {\n          return;\n        } else {\n          e.target.closest(\".popup-delete-ctg__options\").querySelector(\"input\").checked = true;\n          document.querySelectorAll(\".popup-delete-ctg__options\").forEach((el) => {\n            // el.style.backgroundColor = \"transparent\";\n            el.setAttribute(\"style\", `background-color: transparent; border: 2px solid ${ctgcolor};`);\n            el.classList.remove(\"popup-delete-act\");\n          });\n          // popup-delete-act\n          e.target.closest(\".popup-delete-ctg__options\").setAttribute(\"style\", `background-color: ${offsetColor}; border: 2px solid ${ctgcolor};`);\n\n          e.target.closest(\".popup-delete-ctg__options\").classList.add(\"popup-delete-act\");\n        }\n      };\n\n      optionRemove.append(optionRemoveTitle, optionRemoveIcon);\n      optionsWrapperTwo.append(optionRemoveRadio, optionRemove);\n\n      popupBody.append(optionsWrapperOne, optionsWrapperTwo);\n      popupBox.appendChild(popupBody);\n      optionsWrapperOne.onclick = handleWrapperClick;\n      optionsWrapperTwo.onclick = handleWrapperClick;\n    }\n\n\n    /* **************************** */\n    // POPUP FOOTER\n    const popupFooter = document.createElement(\"div\");\n    popupFooter.classList.add(\"popup-delete-ctg__footer\");\n    const btncancel = document.createElement(\"button\");\n    btncancel.textContent = \"cancel\";\n    btncancel.classList.add(\"popup-delete-ctg__btn--cancel\");\n    btncancel.style.backgroundColor = offsetColor;\n    const btnproceed = document.createElement(\"button\");\n    btnproceed.classList.add(\"popup-delete-ctg__btn--proceed\");\n    btnproceed.textContent = \"proceed\";\n    /* **************************** */\n    popupFooter.append(btncancel, btnproceed);\n    popupBox.appendChild(popupFooter);\n    document.body.append(popupBoxOverlay, popupBox);\n\n    // EVENT LISTENERS\n    store.addActiveOverlay(\"popup-delete-ctg__overlay\");\n    const closeDeletePopupOnEscape = (e) => {\n      if (e.key === \"Escape\") closeDeletePopup();\n    };\n\n    const closeDeletePopup = () => {\n      popupBox.remove();\n      popupBoxOverlay.remove();\n      store.removeActiveOverlay(\"popup-delete-ctg__overlay\");\n      document.removeEventListener(\"keydown\", closeDeletePopupOnEscape);\n    };\n\n    const proceedDeletePopup = () => {\n      if (!noEntries) {\n        const selectedOption = document?.querySelector(\"input[name='popup-delete-ctg__option']:checked\").id;\n        const selectedCategory = document.querySelector(\".popup-delete-ctg__option--move-select\").value;\n        if (selectedOption === \"ctg-move\") {\n          store.moveCategoryEntriesToNewCategory(\n            ctgname, selectedCategory\n          );\n        } else if (selectedOption === \"ctg-delete\") {\n          store.removeCategoryAndEntries(ctgname);\n        }\n      } else {\n        store.deleteCategory(ctgname);\n      }\n\n      closeDeletePopup();\n      updateComponent();\n      renderSidebarDatepickerCtg();\n      renderCategories();\n    };\n\n    btnproceed.onclick = proceedDeletePopup;\n    popupBoxOverlay.onclick = closeDeletePopup;\n    btncancel.onclick = closeDeletePopup;\n    document.addEventListener(\"keydown\", closeDeletePopupOnEscape);\n  }\n\n  function handleCategorySelection(e) {\n    let checkbox = e.target.children[0].children[0];\n    let status = checkbox.getAttribute(\"data-sbch-checked\");\n    let cat = checkbox.getAttribute(\"data-sbch-category\");\n    let color = store.getCtgColor(cat);\n    if (status === \"true\") {\n      checkbox.setAttribute(\"data-sbch-checked\", \"false\");\n      store.setCategoryStatus(cat, false);\n      checkbox.style.backgroundColor = \"var(--black1)\";\n      checkbox.firstChild.setAttribute(\"fill\", \"none\");\n    } else {\n      checkbox.setAttribute(\"data-sbch-checked\", \"true\");\n      store.setCategoryStatus(cat, true);\n      checkbox.style.backgroundColor = color;\n      checkbox.firstChild.setAttribute(\"fill\", \"var(--taskcolor0)\");\n    }\n    renderSidebarDatepickerCtg();\n    updateComponent();\n  }\n\n  function openCategoryOptionsMenu(e, data) {\n    const [targetCtg, targetElement] = data;\n    let [x, y] = placePopup(\n      192,\n      128,\n      [\n        e.clientX,\n        parseInt(targetElement.getBoundingClientRect().top) - 8\n      ],\n      [window.innerWidth, window.innerHeight],\n      false,\n      null\n    );\n\n    const popupBox = document.createElement(\"div\");\n    popupBox.classList.add(\"popup-ctg-options\");\n    popupBox.style.top = `${y}px`;\n    popupBox.style.left = `${x}px`;\n    const popupBoxOverlay = document.createElement(\"div\");\n    popupBoxOverlay.classList.add(\"popup-ctg-options__overlay\");\n    store.addActiveOverlay(\"popup-ctg-options__overlay\");\n\n    const optionEdit = document.createElement(\"div\");\n    optionEdit.classList.add(\"option__open-ctg-edit\");\n    optionEdit.textContent = \"Edit category (name, color)\";\n    const optionTurnOff = document.createElement(\"div\");\n    optionTurnOff.classList.add(\"option__close-other-ctg\");\n    optionTurnOff.textContent = \"Display this only\";\n    const optionTurnOn = document.createElement(\"div\");\n    optionTurnOn.classList.add(\"option__open-other-ctg\");\n    optionTurnOn.textContent = \"Display all but this\";\n\n    function closeCategoryOptionsMenu(flag, chckbox) {\n      document.querySelector(\".popup-ctg-options\").remove();\n      document.querySelector(\".popup-ctg-options__overlay\").remove();\n      store.removeActiveOverlay(\"popup-ctg-options__overlay\");\n      if (flag) { chckbox.removeAttribute(\"style\"); }\n      document.removeEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\n    }\n\n    function handleOpenEditCtg(e) {\n      createCategoryForm(store, targetCtg, true, targetElement);\n      closeCategoryOptionsMenu();\n    }\n\n    function rerender() {\n      renderSidebarDatepickerCtg();\n      updateComponent();\n      renderCategories();\n    }\n\n    function closeAndRemoveStyle() {\n      closeCategoryOptionsMenu(true, targetElement);\n    }\n\n    function turnoff() {\n      store.setAllCategoryStatusExcept(targetCtg.name, false);\n      closeAndRemoveStyle();\n      rerender();\n    }\n\n    function turnon() {\n      store.setAllCategoryStatusExcept(targetCtg.name, true);\n      closeAndRemoveStyle();\n      rerender();\n    }\n\n    function handleCloseOnEscapeCtgOptionsMenu(e) {\n      if (e.key === \"Escape\") { closeAndRemoveStyle(); }\n    }\n\n    popupBox.append(optionEdit, optionTurnOff, optionTurnOn);\n    document.body.prepend(popupBoxOverlay, popupBox);\n    document.addEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\n    optionEdit.onclick = handleOpenEditCtg;\n    popupBoxOverlay.onclick = closeAndRemoveStyle;\n    optionTurnOff.onclick = turnoff;\n    optionTurnOn.onclick = turnon;\n  }\n\n  function delegateCategoryEvents(e) {\n    const ctgtoggleModal = getClosest(e, \".sbch-col__one\");\n    const editctgBtn = getClosest(e, \".sbch-col--actions__edit-icon\");\n    const deletectgBtn = getClosest(e, \".sbch-col--actions__delete-icon\");\n    const ctgChck = getClosest(e, \".sbch-form--item__col\");\n    const ctgPlus = getClosest(e, \".sbch-plus\");\n\n    if (ctgtoggleModal) {\n      handleCategoryModalToggle();\n      return;\n    }\n\n    // open category options menu (edit, turn others off, turn others on)\n    if (editctgBtn) {\n      const targetcat = {\n        name: e.target.getAttribute(\"data-sbch-category\"),\n        color: e.target.getAttribute(\"data-sbch-color\"),\n      };\n      const targetparent = e.target.parentElement.parentElement;\n      targetparent.style.borderBottom = `2px solid ${targetcat.color}`;\n      openCategoryOptionsMenu(\n        e, [targetcat, targetparent]\n      );\n      return;\n    }\n\n    if (deletectgBtn) {\n      createDeleteCategoryPopup(e);\n      return;\n    }\n\n    // toggle category checkbox and display entries\n    if (ctgChck) {\n      handleCategorySelection(e);\n      return;\n    }\n\n    // create popup with category creation form\n    if (ctgPlus) {\n      const targetcat = {\n        name: \"new category\",\n        color: \"#2C52BA\",\n      };\n      createCategoryForm(store, targetcat, false, e.target);\n      return;\n    }\n  }\n\n  const initSidebarCategories = () => {\n    renderCategories();\n    const fullCtgRender = () => {\n      renderCategories();\n      updateComponent();\n    };\n    store.setRenderCategoriesCallback(fullCtgRender);\n    sidebarColTwo.onmousedown = delegateCategoryEvents;\n  };\n  initSidebarCategories();\n}","import { getDateForStore } from \"../../utilities/dateutils\";\nimport setViews from \"../../config/setViews\";\nimport { getClosest } from \"../../utilities/helpers\";\n\n\nconst sbdatepicker = document.querySelector(\".datepicker-sidebar\");\nconst sbdatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\nconst sbdatepickerTitle = document.querySelector(\".sbdatepicker-title\");\n\nconst sbdatepickerChangeDate = document.querySelector(\".sb-datepicker-change-date\");\n\nconst sbyearpickerTitle = document.querySelector(\".sb-yearpicker-title\");\nconst sbmonthpickerMonths = document.querySelectorAll(\".sb-monthpicker__month\");\n\nexport default function setSidebarDatepicker(context, store, datepickerContext) {\n\n  datepickerContext.setDate(\n    context.getYear(),\n    context.getMonth(),\n    context.getDay()\n  );\n\n  let montharray = datepickerContext.getMonthArray();\n  let groupedEntries = store.getMonthEntryDates(montharray);\n  let currentWeekStart = context.getWeek();\n  let hasweek = false;\n  let count = 0;\n  let [checkmonth, checkyear] = [null, null];\n\n  function setDatepickerHeader() {\n    const month = datepickerContext.getMonthName();\n    const year = datepickerContext.getYear();\n    sbdatepickerTitle.textContent = `${month} ${year}`;\n  }\n\n  function createCells(montharray) {\n    sbdatepickerBody.innerText = \"\";\n    const component = context.getComponent();\n\n    for (let i = 0; i < montharray.length; i++) {\n      const cell = document.createElement(\"div\");\n      const datename = document.createElement(\"div\");\n      cell.classList.add(\"sbdatepicker__body--dates-cell\");\n      datename.classList.add(\"sbdatepicker__body--datename\");\n\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\n        datename.classList.add(\"sbdatepicker__body--datename-disabled\");\n      }\n\n      if (component === \"week\") {\n        if (currentWeekStart.getDate() === montharray[i].getDate()) {\n          if (currentWeekStart.getMonth() === montharray[i].getMonth()) {\n            if (currentWeekStart.getFullYear() === montharray[i].getFullYear()) {\n              hasweek = true;\n            }\n          }\n        }\n      }\n\n      if (hasweek) {\n        count++;\n        if (count <= 7) {\n          cell.classList.add(\"sbdatepicker__body--dates-week\");\n        }\n      } else {\n        cell.classList.remove(\"sbdatepicker__body--dates-week\");\n      }\n\n      if (context.isToday(montharray[i])) {\n        datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n        datename.classList.add(\"sbdatepicker__body--datename-today\");\n      }\n\n      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n          datename.classList.add(\"sbdatepicker__body--datename-selected\");\n        }\n      }\n\n      datename.textContent = montharray[i].getDate();\n      const formattedDate = getDateForStore(montharray[i]);\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\n      if (groupedEntries.includes(formattedDate)) {\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-selected\") && !datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n          datename.classList.add(\"sbdatepicker__body--datename-entries\");\n        }\n      } else {\n        datename.classList.remove(\"sbdatepicker__body--datename-entries\");\n      }\n\n      cell.appendChild(datename);\n      sbdatepickerBody.appendChild(cell);\n    }\n  }\n\n  function resetpickerData() {\n    montharray = datepickerContext.getMonthArray();\n    groupedEntries = store.getMonthEntryDates(montharray);\n    currentWeekStart = context.getWeek();\n    count = 0;\n    hasweek = false;\n  }\n\n  function renderpicker(y, m, d) {\n    context.setDate(y, m, d);\n    context.setDateSelected(d);\n    datepickerContext.setDate(y, m, d);\n    setViews(\n      context.getComponent(),\n      context,\n      store,\n      datepickerContext,\n    );\n\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  function renderSelectedDay(e, d) {\n    context.setDateSelected(d);\n    const selected = document.querySelectorAll(\".sbdatepicker__body--datename-selected\");\n    selected.forEach((x) => {\n      x.classList.remove(\"sbdatepicker__body--datename-selected\");\n    });\n    e.target.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n    e.target.classList.add(\"sbdatepicker__body--datename-selected\");\n  }\n\n  function renderprevMonth() {\n    datepickerContext.setPrevMonth();\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  function rendernextMonth() {\n    datepickerContext.setNextMonth();\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  /**\n   * \n   * @param {*} e \n   * @description some extra steps required for the sidebar datepicker \n   * vs any other datepicker due to the fact that the sidebar datepicker will stay open after a date is selected.\n   * These extra steps include:\n   *  1. do not re render datepicker if the selected date is in the current month, just update the selected date\n   *  2. the one exception to above rule is if the component is the week view and the selected date is not in the current week, then re render the datepicker\n   *  3. if the component is in the list view (schedule), do not re render the view, just update the selected date\n   */\n  function setNewDate(e) {\n    const target = e.target;\n    let [y, m, d] = target.getAttribute(\"data-datepicker-date\").split('-').map(x => parseInt(x));\n\n    const component = context.getComponent();\n\n    if (component === \"list\") {\n      renderSelectedDay(e, d);\n      return;\n    }\n\n    if (component === \"year\") {\n      if (context.getYear() !== y) {\n        renderpicker(y, m, d);\n        return;\n      } else {\n        renderSelectedDay(e, d);\n        return;\n      }\n    }\n\n    if (component === \"month\") {\n      if (context.getMonth() !== m) {\n        renderpicker(y, m, d);\n        return;\n      } else {\n        renderSelectedDay(e, d);\n        return;\n      }\n    }\n\n    if (component === \"week\") {\n      if (e.target.parentElement.classList.contains(\"sbdatepicker__body--dates-week\")) {\n        renderSelectedDay(e, d);\n        return;\n      } else {\n        renderpicker(y, m, d);\n      }\n      return;\n    }\n\n    if (component === \"day\") {\n      if (context.isToday(new Date(y, m, d))) {\n        renderSelectedDay(e, d);\n        return;\n      } else {\n        renderpicker(y, m, d);\n        return;\n      }\n    }\n  }\n\n  function setCheckMonthYear() {\n    checkmonth = datepickerContext.getMonth();\n    checkyear = datepickerContext.getYear();\n  }\n\n  function getMonthYearCheck() {\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\n  }\n\n  function openChangeDateModal() {\n    setCheckMonthYear();\n    sbdatepickerChangeDate.classList.add(\"show-sbdpcd\");\n    yearpickerSetYear(null, true);\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\n  }\n\n  function closeChangeDateModal() {\n    // check if date has changed;\n    if (!getMonthYearCheck()) {\n      resetpickerData();\n      createCells(montharray);\n      setDatepickerHeader();\n      montharray = [];\n    }\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\n  }\n\n  function monthpickerSetMonth(val, init) {\n    const newmonth = val;\n\n    if (!init && newmonth === datepickerContext.getMonth()) return;\n    datepickerContext.setMonth(newmonth);\n    sbmonthpickerMonths.forEach((month, idx) => {\n      if (idx === newmonth) {\n        month.classList.add(\"monthpicker__active-month\");\n      } else {\n        month.classList.remove(\"monthpicker__active-month\");\n      }\n    });\n  }\n\n  function yearpickerSetYear(increment, init) {\n    if (init) {\n      sbyearpickerTitle.textContent = datepickerContext.getYear();\n      return;\n    }\n\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\n    if (newyear == +datepickerContext.getYear()) return;\n    datepickerContext.setYear(newyear);\n    sbyearpickerTitle.textContent = newyear;\n  }\n\n  function delegateDatepickerEvents(e) {\n    const datenumber = getClosest(e, \".sbdatepicker__body--datename\");\n    const navnext = getClosest(e, \".sbdatepicker-nav--next\");\n    const navprev = getClosest(e, \".sbdatepicker-nav--prev\");\n    const title = getClosest(e, \".sbdatepicker-title\");\n    const closeChangeDateBtn = getClosest(e, \".sb-close-change-date\");\n    const ypNext = getClosest(e, \".sb-yearpicker-next\");\n    const ypPrev = getClosest(e, \".sb-yearpicker-prev\");\n    const mpMonth = getClosest(e, \".sb-monthpicker__month\");\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (navnext) {\n      rendernextMonth();\n      return;\n    }\n\n    if (navprev) {\n      renderprevMonth();\n      return;\n    }\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (title) {\n      openChangeDateModal();\n      return;\n    }\n\n    if (closeChangeDateBtn) {\n      closeChangeDateModal();\n      return;\n    }\n\n    if (ypNext) {\n      yearpickerSetYear(1, false);\n      return;\n    }\n\n    if (ypPrev) {\n      yearpickerSetYear(-1, false);\n      return;\n    }\n\n    if (mpMonth) {\n      const newmonth = parseInt(e.target.getAttribute(\"data-sbdp-month\"));\n      monthpickerSetMonth(newmonth, false);\n      return;\n    }\n  }\n\n  function initsbdatepicker() {\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\n    setDatepickerHeader();\n    createCells(montharray);\n    sbdatepicker.onclick = delegateDatepickerEvents;\n    montharray = null;\n    groupedEntries = null;\n  };\n  \n  initsbdatepicker();\n}","import { getClosest } from \"../../utilities/helpers\";\n\nconst sidebarFooter = document.querySelector(\".sb__info\");\n\n// popup containing : project notes, privacy policy, & terms of use\nconst sbInfoPopup = document.querySelector(\".sb__info-popup\");\nconst sbInfoPopupOverlay = document.querySelector(\".sb__info-popup-overlay\");\nconst selectInfo = document.querySelector(\".select-popup-info\");\nconst closePopupButton = document.querySelector(\".close-sb-info\");\nconst infopopupTitle = document.querySelector(\".sbip-title\");\nconst infopopupBody = document.querySelector(\".sbip-content\");\n\n\nexport default function handleSidebarFooter(store) {\n\n  const infoContent = {\n    notes: {\n      title: \"Breakdown of project & current status\",\n      content: \"These are my project notes\",\n    },\n    privacy: {\n      title: \"Cookies and Data Privacy\",\n      content: \"This project uses an open source license\",\n    },\n    terms: {\n      title: \"Code license and terms of use\",\n      content: \"All data is stored locally meaning no data is sent to a server.\"\n    },\n  };\n\n  function closeInfoPopup() {\n    store.removeActiveOverlay(\"hide-sb-info-popup\");\n    sbInfoPopup.classList.add(\"hide-sb-info-popup\");\n    sbInfoPopupOverlay.classList.add(\"hide-sb-info-popup\");\n    document.removeEventListener(\"keydown\", closeInfoPopupOnEscape);\n    sbInfoPopupOverlay.onclick = null;\n    closePopupButton.onclick = null;\n  }\n\n  function setInfoContent(selection) {\n    infopopupTitle.innerText = infoContent[selection].title;\n    infopopupBody.innerText = infoContent[selection].content;\n  }\n\n  function handleSelectInfoChange(e) {\n    const selection = e.target.value;\n    setInfoContent(selection);\n  }\n\n  function closeInfoPopupOnEscape(e) {\n    if (e.key === \"Escape\") {\n      closeInfoPopup();\n    }\n  }\n\n  function setUpInfoPopup() {\n    setInfoContent(selectInfo.value);\n    selectInfo.onchange = handleSelectInfoChange;\n    sbInfoPopupOverlay.onclick = closeInfoPopup;\n    closePopupButton.onclick = closeInfoPopup;\n    document.addEventListener(\"keydown\", closeInfoPopupOnEscape);\n  }\n\n  function openInfoPopup(selection) {\n    const selections = ['notes', 'privacy', 'terms'];\n    const idx = selections.indexOf(selection);\n    selectInfo.selectedIndex = idx;\n\n    store.addActiveOverlay(\"hide-sb-info-popup\");\n    sbInfoPopup.classList.remove(\"hide-sb-info-popup\");\n    sbInfoPopupOverlay.classList.remove(\"hide-sb-info-popup\");\n    setUpInfoPopup();\n  }\n\n  function delegateSidebarFooterEvents(e) {\n    const projectNotes = getClosest(e, \".sb__project-notes\");\n    const privacy = getClosest(e, \".sb__privacy\");\n    const terms = getClosest(e, \".sb__terms\");\n\n    if (projectNotes) {\n      openInfoPopup(\"notes\");\n      return;\n    }\n\n    if (privacy) {\n      openInfoPopup(\"privacy\");\n      return;\n    }\n\n    if (terms) {\n      openInfoPopup(\"terms\");\n      return;\n    }\n  }\n\n  sidebarFooter.onmousedown = delegateSidebarFooterEvents;\n}","import { getClosest, setTheme } from \"../../utilities/helpers\";\nimport { createTimestamp } from \"../../utilities/dateutils\";\nimport handleShortCutsModal from \"./shortcutsModal\";\n\nconst sidebarSubMenuOverlay = document.querySelector('.sidebar-sub-menu__overlay');\nconst sidebarSubMenu = document.querySelector('.sidebar-sub-menu');\nconst closeSubMenuBtn = document.querySelector('.close-sub-menu');\nconst closemenu = \"hide-sidebar-sub-menu\";\nconst appBody = document.querySelector(\".body\");\n\n// dark, light, contrast\nconst themeRadioBtns = document.querySelectorAll(\".theme-radio__input\");\nconst themeRadioOptions = [\"dark\", \"light\", \"contrast\"];\n\n// keyboard shortcut toggle on/off | open modal\nconst shortcutSwitch = document.querySelector(\".smia-toggle-shortcuts-checkbox\");\nconst animationsSwitchBtn = document.querySelector(\".smdt-toggle-checkbox\");\nconst notifyDisabledShortcutsIcon = document.querySelector(\".keyboard-disabled-sm\");\n\nexport default function getSidebarSubMenu(store, context) {\n\n  function closeSubOnEscape(e) {\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (e.key === \"Escape\") {\n      if (popup) {\n        popup.remove();\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n        return;\n      } else {\n        closeSubMenu();\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n      }\n    }\n    if (e.key.toLowerCase() === \"a\") {\n      if (popup) {\n        return;\n      } else {\n        closeSubMenu();\n      }\n    }\n  }\n\n  function createUploadConfirmationPopup() {\n    const popup = document.createElement(\"div\");\n    popup.classList.add(\"sb-sub-popup-confirm\");\n    const [totalEntries, totalCategories] = store.getStoreStats();\n\n    // let totals;\n    let [hasEntries, hasCategories] = [false, false];\n    let titleEntries;\n    if (totalEntries > 0) {\n      hasEntries = `Overwriting ${totalEntries} entries`;\n    }\n    if (totalCategories > 1) {\n      if (totalCategories === 2) {\n        hasCategories = \"1 category.\";\n      } else {\n        hasCategories = `${+totalCategories - 1} categories.`;\n      }\n    }\n\n    if (hasEntries && hasCategories) {\n      titleEntries = `${hasEntries} and ${hasCategories}`;\n    } else if (hasEntries && !hasCategories) {\n      titleEntries = `${hasEntries}.`;\n    } else if (!hasEntries && hasCategories) {\n      titleEntries = `No entries. Overwriting ${hasCategories}`;\n    } else {\n      titleEntries = \"Current calendar has no entries or categories.\";\n    }\n\n    const subtitle = document.createElement(\"div\");\n    subtitle.classList.add(\"sb-sub-popup-subtitle\");\n    subtitle.textContent = titleEntries;\n    const subtitle2 = document.createElement(\"div\");\n    subtitle2.classList.add(\"sb-sub-popup-subtitle\");\n    subtitle2.textContent = 'This action is irreversible.';\n    const subtitle3 = document.createElement(\"div\");\n    subtitle3.classList.add(\"sb-sub-popup-title\");\n    subtitle3.textContent = 'Please ensure you have a valid backup before proceeding. Use the \"validate .json\" button next to \"upload .json\" to check that everything is in order.';\n\n    const btns = document.createElement(\"div\");\n    btns.classList.add(\"sb-sub-popup-btns\");\n    const cancelBtn = document.createElement(\"button\");\n    cancelBtn.classList.add(\"sb-sub-popup-btn--cancel\");\n    cancelBtn.textContent = \"Cancel\";\n    const proceedBtn = document.createElement(\"button\");\n    proceedBtn.classList.add(\"sb-sub-popup-btn--proceed\");\n    proceedBtn.textContent = \"Proceed\";\n\n    btns.append(cancelBtn, proceedBtn);\n    console.log(popup);\n    popup.append(\n      subtitle,\n      subtitle2,\n      subtitle3,\n      btns\n    );\n    return popup;\n  }\n\n  function closeSubMenu() {\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (popup) {\n      popup.remove();\n      sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n      return;\n    } else {\n      store.removeActiveOverlay(closemenu);\n      sidebarSubMenu.classList.add(closemenu);\n      sidebarSubMenuOverlay.classList.add(closemenu);\n      document.removeEventListener(\"keydown\", closeSubOnEscape);\n      sidebarSubMenuOverlay.onclick = null;\n    }\n  }\n\n  function setStatusIcon(status) {\n    if (status) {\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\n    } else {\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\n    }\n  }\n\n  function openSubMenu() {\n    // configure current active status of theme radio btns\n    const themeIdx = themeRadioOptions.indexOf(context.getColorScheme());\n    themeRadioBtns[themeIdx].checked = true;\n\n    const shortcutStatus = store.getShortcutsStatus();\n    setStatusIcon(shortcutStatus);\n    shortcutSwitch.checked = shortcutStatus;\n\n    const animationStatus = store.getAnimationStatus();\n    setAnimationsIcons(animationStatus);\n    animationsSwitchBtn.checked = animationStatus;\n\n    store.addActiveOverlay(closemenu);\n    sidebarSubMenu.classList.remove(closemenu);\n    sidebarSubMenuOverlay.classList.remove(closemenu);\n\n    document.addEventListener(\"keydown\", closeSubOnEscape);\n    sidebarSubMenuOverlay.onclick = closeSubMenu;\n    // closeSubMenuBtn.onclick = closeSubMenu;\n  }\n\n  function getJSONUpload(e) {\n    const file = document.createElement(\"input\");\n    file.type = \"file\";\n    file.accept = \"application/json\";\n    file.onchange = (e) => {\n      const file = e.target.files[0];\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const json = JSON.parse(e.target.result);\n        store.setUserUpload(json);\n        closeSubMenu();\n      };\n      reader.readAsText(file);\n      reader = null;\n    };\n    document.body.appendChild(file);\n    file.click();\n    document.body.removeChild(file);\n    closeSubMenu();\n    return;\n  }\n\n  function getJSONDownload() {\n    const json = JSON.stringify(localStorage);\n    const [totalEntries, totalCategories] = store.getStoreStats();\n    const filename = `ENT_${totalEntries}_CAT_${totalCategories}_${createTimestamp()}`;\n    const blob = new Blob([json], { type: \"application/json\" });\n    const href = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.download = filename + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    URL.revokeObjectURL(href);\n    document.body.removeChild(link);\n  }\n\n  function removePopup() {\n    sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (popup) {\n      popup.remove();\n    }\n  }\n\n  function handleCalendarJSON(action) {\n    if (action === \"download\") {\n      getJSONDownload();\n      return;\n    }\n\n    if (action === \"upload\") {\n      // create popup to warn user that they are about to overwrite all calendar data\n      const popup = createUploadConfirmationPopup();\n      document.body.appendChild(popup);\n      sidebarSubMenuOverlay.classList.add(\"sub-overlay-vis\");\n      // cancel will close popup but keep open sidebar sub menu\n      // \"Escape\" key will also close popup but keep open sidebar sub menu\n      // \"a\" key will be temporarily disabled while popup is open\n      const cancelBtn = popup.querySelector(\".sb-sub-popup-btn--cancel\");\n      const proceedBtn = popup.querySelector(\".sb-sub-popup-btn--proceed\");\n      cancelBtn.onclick = removePopup;\n      proceedBtn.onclick = getJSONUpload;\n    }\n  }\n\n  function handleThemeChange(e) {\n    const target = e.target;\n    const targetinput = target.firstElementChild;\n    const value = targetinput.value;\n    targetinput.checked = true;\n    const currentTheme = context.getColorScheme();\n    if (value === currentTheme) {\n      return;\n    }\n    context.setColorScheme(value);\n    setTheme(context);\n  }\n\n  function openKbShortcutMenu() {\n    closeSubMenu();\n    handleShortCutsModal(store);\n  }\n\n  function toggleShortcuts() {\n    const status = shortcutSwitch.checked ? false : true;\n    store.setShortcutsStatus(status);\n    setStatusIcon(status);\n  }\n\n  function toggleShortcutsIcon() {\n    let status = store.getShortcutsStatus();\n\n    status = !status;\n    store.setShortcutsStatus(status);\n    setStatusIcon(status);\n    shortcutSwitch.checked = status ? true : false;\n  }\n\n  function setAnimationsIcons(val) {\n    const parenticonwrapper = document.querySelector(\".toggle-animations-icon__sm\");\n    const icons = {\n      on: document.querySelector(\".tai-on\"),\n      off: document.querySelector(\".tai-off\"),\n    };\n\n    if (val) {\n      icons.on.classList.remove(\"hide-tai\");\n      icons.off.classList.add(\"hide-tai\");\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Enabled\");\n    } else {\n      icons.on.classList.add(\"hide-tai\");\n      icons.off.classList.remove(\"hide-tai\");\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Disabled\");\n    }\n  }\n\n  function toggleAnimations(fromicon) {\n    const status = animationsSwitchBtn.checked ? false : true;\n    store.setAnimationStatus(status);\n    setAnimationsIcons(status);\n    if (fromicon) {\n      animationsSwitchBtn.checked = status ? true : false;\n    }\n    if (status) {\n      appBody.classList.remove(\"disable-transitions\");\n    } else {\n      appBody.classList.add(\"disable-transitions\");\n    }\n  }\n\n  function delegateSubMenuEvents(e) {\n    const downloadjsonBtn = getClosest(e, \".down-json\");\n    const uploadjsonBtn = getClosest(e, \".upload-json\");\n    const themebtn = getClosest(e, \".theme-option\");\n    const kbShortcutMenu = getClosest(e, \".toggle-kb-shortcuts-btn__smia\");\n    const shortcutSwitch = getClosest(e, \".smia-disable-shortcuts__btn\");\n    const shortcutSwitchNotifyIcon = getClosest(e, \".keyboard-disabled-sm\");\n    const animationsSwitch = getClosest(e, \".smdt-toggle\");\n    const animationsIcon = getClosest(e, \".toggle-animations-icon__sm\");\n    const getCloseSubMenuBtn = getClosest(e, \".close-sub-menu\");\n\n    if (downloadjsonBtn) {\n      handleCalendarJSON(\"download\");\n      return;\n    }\n\n    if (uploadjsonBtn) {\n      handleCalendarJSON(\"upload\");\n      return;\n    }\n\n    if (themebtn) {\n      handleThemeChange(e);\n      return;\n    }\n\n    if (kbShortcutMenu) {\n      openKbShortcutMenu();\n      return;\n    }\n\n    if (shortcutSwitch) {\n      toggleShortcuts();\n      return;\n    }\n\n    if (shortcutSwitchNotifyIcon) {\n      toggleShortcutsIcon();\n      return;\n    }\n\n    if (animationsSwitch) {\n      toggleAnimations();\n      return;\n    }\n\n    if (animationsIcon) {\n      toggleAnimations(true);\n      return;\n    }\n\n    if (getCloseSubMenuBtn) {\n      closeSubMenu();\n      return;\n    }\n  }\n\n  function setSidebarSubMenu() {\n    openSubMenu();\n    sidebarSubMenu.onmousedown = delegateSubMenuEvents;\n  }\n  setSidebarSubMenu();\n}","import {\n  createCloseIcon,\n} from \"../../utilities/svgs\";\n\nimport { getClosest } from \"../../utilities/helpers\";\nimport store from \"../../context/store\";\n\nconst body = document.querySelector(\".body\");\nconst toast = document.querySelector(\".toast\");\n/**\n * \n * @param {string} message \n * @param {function} callback \n * @param {function} callbackTwo \n * @param {function} removeCallback \n * @param {function} undoCallback \n */\nexport default function createToast(message, undoCallback) {\n\n  function closetoast() {\n    toast.classList.remove(\"show-toast\");\n    toast.innerText = \"\";\n    document.onmousedown = null;\n    document.onkeydown = null;\n    store.removeActiveOverlay(\"toast\");\n  }\n\n  function createToast() {\n    toast.innerText = \"\";\n\n    const toastMessage = document.createElement(\"div\");\n    toastMessage.classList.add(\"toast-message\");\n    toastMessage.textContent = message;\n\n    const closeIconWrapper = document.createElement(\"div\");\n    closeIconWrapper.classList.add(\"close-toast-icon-wrapper\");\n    closeIconWrapper.appendChild(createCloseIcon(\"var(--white4)\"));\n\n    const undoToastWrapper = document.createElement(\"div\");\n    undoToastWrapper.classList.add(\"undo-toast-wrapper\");\n    const undoToastMessage = document.createElement(\"div\");\n    undoToastMessage.classList.add(\"undo-toast-message\");\n    undoToastMessage.textContent = \"Undo\";\n    undoToastWrapper.appendChild(undoToastMessage);\n\n    function delegateToast(e) {\n      // if e.target is not in the toast, remove the toast\n      const gettoast = getClosest(e, \".toast\");\n      if (!gettoast) {\n        closetoast();\n        return;\n      }\n\n      const getundo = getClosest(e, \".undo-toast-wrapper\");\n      const getclose = getClosest(e, \".close-toast-icon-wrapper\");\n\n      if (getundo) {\n        undoCallback();\n        closetoast();\n        return;\n      }\n\n      if (getclose) {\n        closetoast();\n        return;\n      }\n    }\n\n    function handleToastKeydown(e) {\n      if (e.key) {\n        closetoast();\n      }\n    }\n\n    toast.append(toastMessage, undoToastWrapper, closeIconWrapper);\n    toast.classList.add(\"show-toast\");\n    store.addActiveOverlay(\"toast\");\n\n\n    document.onkeydown = handleToastKeydown;\n    document.onmousedown = delegateToast;\n  }\n  createToast();\n}","// Frontend interactions with our replicated TP API\n\nconst HOST = 'http://localhost:8080'\n\n\nexport async function loadWorkouts(start_date = '2024-03-25', end_date = '2025-01-05') {\n    \n    const requestOptions = {\n        method: \"GET\",\n        redirect: \"follow\"\n      };\n      \n      let res = await fetch(`${HOST}/api/tp/workouts?start_date=${start_date}`, requestOptions)\n      return res.json()\n}\n\nexport async function getPerformances(workout_id){\n    const requestOptions = {\n        method: \"GET\",\n        redirect: \"follow\"\n      };\n      \n      fetch(`${HOST}/api/tp/peakperf?workout=${workout_id}`, requestOptions)\n        .then((response) => response.json())\n        .then((result) => console.log(result))\n        .catch((error) => console.error(error));\n}\n\nexport async function updateWorkoutDate(workout){      \n      fetch(`${HOST}/api/tp/updateWorkout`, {\n        headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        method: \"POST\",\n        body: JSON.stringify({\"workout\": workout})\n      })\n        .then((response) => response.json())\n        .then((result) => console.log(result))\n        .catch((error) => console.error(error));\n}","// Handles resources from TP \n// this will parse the actual structures\n// store it in our local storage etc.\n\nimport Workout from \"../../factory/workouts\";\nimport { loadWorkouts, updateWorkoutDate } from \"./api\";\nimport { compareDates } from \"../../utilities/dateutils\";\n\nexport function refreshTrainingPeaks(store, cb){\n    console.log('Pulling workouts from storage');\n    // Load workouts\n    loadWorkouts().then(data => {\n        if (data) {\n            // Synchronize new workouts to storage\n            syncNewWorkoutsToStorage(data, store);\n            // Update workouts in storage\n            updateWorkoutsInStorage(data, store);\n            // Execute the callback function\n            if (typeof cb === 'function') {\n                cb();\n            }\n        }\n    }).catch(error => {\n        console.error('Error loading workouts:', error);\n    });\n}\n\nexport function dailySyncTP(store, cb){\n    // Checks workouts for current day, if workout day != to latest refreshed workout \n    // PUT @TP API\n    const today = new Date()\n    let todaysWorkouts = store.getDayEntriesArray(today)\n    todaysWorkouts.forEach(entry => {\n        // Check if an actual workout or just random filler\n        let workout = entry.workout\n        if (workout.is_workout){\n            // prev planned date\n            let prevPlanned = workout.workoutDay\n            if (!compareDates(prevPlanned, today)){\n                console.log(`Found modified entry. Updating at TP.`)\n                console.log(entry)\n                workout.tp_body.workoutDay = today\n                updateWorkoutDate(workout.tp_body)\n                // Update internal data to prevent re-sync\n                store.updateEntry(entry.id, {\n                    workout: new Workout(workout.tp_body)\n                })\n                alert(\"Success\")\n            } else {\n                alert(\"Workout is matching at TP.\")\n            }\n        } \n    });\n}\n\n\n\n\n\nfunction syncNewWorkoutsToStorage(data, store){\n    filterStorage(data, store).forEach(el => {\n        let workout = new Workout(el)\n        store.createEntry(...workout.toEntry())\n    });\n}\n\nfunction updateWorkoutsInStorage(data, store){\n    let workoutToEntryMap = findWorkoutsInStorage(data, store)\n    data.forEach(item => {\n        const entry_id = workoutToEntryMap[item.workoutId];\n        if (entry_id !== undefined) {\n            let workout = new Workout(item)\n            // Only update details, but not the date\n            store.updateEntry(entry_id, {\n                description: workout.description,\n                title: workout.title,\n                workout: workout,\n                duration: workout.duration\n            });\n        }\n    })\n}\n\nfunction findWorkoutsInStorage(data, store){\n    // Returns the actual entry elements per workout\n    // workoutId: entryId\n    // Filter out the data elements for which we have this workoutId \n    let workoutToEntryMap = store.getActiveEntries().reduce((map, item) => {\n        map[item.workout.id] = item.id;\n        return map;\n    }, {});\n    return workoutToEntryMap\n}\n\nfunction filterStorage(data, store){\n    /**\n     * Only store if not existing - i.e. workout id is not part of list\n     */\n    let allWorkouts = store.getActiveEntries().map(item => item.workout.id)\n    let newWorkouts = data.filter(e => !allWorkouts.includes(e.workoutId))\n    console.log(`New workouts:`)\n    console.log(newWorkouts)\n    return newWorkouts\n}\n\n\n/**\n * We now have Entries = Planned in Calendar & Workout\n * We can easily find objects where Entry Date != Workout Date\n * These will then be synced if 1 day prior - thus updating the planned workout date\n */","import fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\n\nimport { Day } from \"../../factory/entries\";\n\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\n\nimport {\n  formatStartEndTime,\n  getTempDates,\n  getFormDateObject,\n  formatEntryOptionsDate,\n} from \"../../utilities/dateutils\";\n\nimport { createCloseIcon } from \"../../utilities/svgs\";\n\nimport handleOverlap, {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  calcNewHourFromCoords,\n  calcNewMinuteFromCoords,\n  getOriginalBoxObject,\n  resetOriginalBox,\n} from \"../../utilities/dragutils\";\n\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\n\nimport locales from \"../../locales/en\";\n\n// day view header (row 1)\nconst dvHeaderDayNumber = document.querySelector(\".dayview--header-day__title\");\nconst dvHeaderDayOfWeek = document.querySelector(\n  \".dayview--header-day__number\"\n);\nconst dvHeaderInfo = document.querySelector(\".dayview--header-day__info\");\n\n// day view on top container (row 2)\nconst dvOnTop = document.querySelector(\".dayview--ontop-container\");\n\n// main grid wrapper (row 3) (scroll wrapper) (offsettop)\nconst dvContainer = document.querySelector(\".calendar__dayview\");\nconst dvGrid = document.querySelector(\".dayview__grid\");\nconst dvMainGrid = document.querySelector(\".dayview--main-grid\");\n\nconst dvSideGridWrapper = document.querySelector(\".dayview--side-grid\");\n\nexport default function setDayView(context, store, datepickerContext) {\n  // let entries = store.getDayEntries(context.getDate());\n  // let boxes = new Day(entries.day, entries.allDay);\n  let entries = null;\n  let boxes = null;\n  let firstY = null;\n\n  function firstLastDates(bxs) {\n    let longest = 0;\n    let shortest = 100;\n    for (let i = 0; i < bxs.length; i++) {\n      let [tempshort, templong] = [bxs[i].coordinates.y, bxs[i].coordinates.e];\n      if (templong > longest) {\n        longest = templong;\n      }\n      if (tempshort < shortest) {\n        shortest = tempshort;\n      }\n    }\n    let [h1, h2] = [Math.floor(shortest / 4), Math.floor(longest / 4)];\n    let [m1, m2] = [(shortest % 4) * 15, (longest % 4) * 15];\n    let [tempdate1, tempdate2] = [\n      new Date(bxs[0].start),\n      new Date(bxs[0].start),\n    ];\n    tempdate1.setHours(h1);\n    tempdate1.setMinutes(m1);\n    tempdate2.setHours(h2);\n    tempdate2.setMinutes(m2);\n    return formatStartEndTime(tempdate1, tempdate2);\n  }\n\n  function getDayviewHeaderEntryCount() {\n    let allboxes = boxes.getAllBoxes();\n    if (allboxes.length === 0) {\n      return \"no entries\";\n    }\n    let [endingToday, startingToday] = [0, 0];\n    let tempEndCase1;\n\n    for (let i = 0; i < allboxes.length; i++) {\n      const [start, end, current] = [\n        new Date(allboxes[i].start),\n        new Date(allboxes[i].end),\n        context.getDate(),\n      ];\n\n      if (start.getDate() === current.getDate()) {\n        startingToday++;\n      }\n\n      if (end.getDate() === current.getDate()) {\n        endingToday++;\n        tempEndCase1 = allboxes[i];\n      }\n    }\n\n    if (startingToday === 1 && endingToday === 1) {\n      return `1 entry ( ${formatStartEndTime(\n        new Date(allboxes[0].start),\n        new Date(allboxes[0].end)\n      )} )`;\n    }\n\n    if (startingToday > 1 && startingToday === endingToday) {\n      return `${startingToday} entries starting & ending today ( ${firstLastDates(\n        boxes.boxes\n      )} )`;\n    }\n\n    let fulltitle = \"\";\n    if (startingToday > 0) {\n      if (startingToday === 1) {\n        fulltitle += `${startingToday} entry starting today`;\n      } else {\n        fulltitle += `${startingToday} entries started`;\n      }\n    } else {\n      fulltitle += `no entries started`;\n    }\n\n    if (endingToday > 0) {\n      if (endingToday === 1) {\n        fulltitle += `  ${endingToday} ending ( ${formatStartEndTime(\n          new Date(tempEndCase1.start),\n          new Date(tempEndCase1.end)\n        )} )`;\n      } else {\n        fulltitle += `  ${endingToday} ending ( ${firstLastDates(\n          boxes.boxes\n        )} )`;\n      }\n    } else {\n      fulltitle += `  no entries ending today`;\n    }\n    return fulltitle;\n  }\n\n  function createDVSideGridCells() {\n    for (let i = 0; i < 24; i++) {\n      let hour;\n      let md;\n\n      if (i === 0) {\n        hour = \"\";\n        md = \"\";\n      } else {\n        hour = i;\n        md = \"AM\";\n      }\n\n      if (hour > 12) {hour -= 12;}\n      if (i >= 12) {md = \"PM\";}\n\n      const dvSideGridCell = document.createElement(\"span\");\n      dvSideGridCell.classList.add(\"dv-sidegrid--cell\");\n      dvSideGridCell.textContent = `${hour} ${md}`;\n      dvSideGridWrapper.appendChild(dvSideGridCell);\n    }\n  }\n\n  function configHeader() {\n    [dvHeaderDayNumber, dvHeaderDayOfWeek, dvHeaderInfo].forEach((el) => {\n      el.innerText = \"\";\n    });\n\n    let gmtOffset = new Date().getTimezoneOffset() / 60;\n    if (gmtOffset < 0) {\n      gmtOffset = `+${Math.abs(gmtOffset)}`;\n    }\n\n    document.querySelector(\".dv-gmt\").textContent = `UTC ${context.getGmt()}`;\n    let day = context.getDay();\n    dvHeaderDayOfWeek.textContent = day;\n\n    if (context.isToday()) {\n      dvHeaderDayOfWeek.classList.add(\"dayview--header-day__number--today\");\n      dvHeaderDayNumber.style.color = \"var(--primary1)\";\n    } else {\n      dvHeaderDayOfWeek.classList.remove(\"dayview--header-day__number--today\");\n      dvHeaderDayNumber.removeAttribute(\"style\");\n    }\n    dvHeaderDayNumber.textContent =\n      locales.labels.weekdaysShort[context.getWeekday()].toUpperCase();\n    dvHeaderInfo.textContent = getDayviewHeaderEntryCount();\n  }\n\n  function resetDayview() {\n    dvMainGrid.innerText = \"\";\n    dvOnTop.innerText = \"\";\n    dvSideGridWrapper.innerText = \"\";\n    dvHeaderInfo.innerText = \"\";\n    dvContainer.onmousedown = null;\n    entries = null;\n    boxes = null;\n    firstY = null;\n  }\n\n  function openDvMore(entr) {\n    store.addActiveOverlay(\"morepopup\");\n    const morepopupoverlay = document.createElement(\"aside\");\n    morepopupoverlay.classList.add(\"dv--morepopup__overlay\");\n\n    const morepopup = document.createElement(\"aside\");\n    morepopup.classList.add(\"dv--morepopup\");\n    morepopup.style.left = `${dvOnTop.offsetLeft}px`;\n    morepopup.style.top = `${dvOnTop.offsetTop}px`;\n\n    const morepopupHeader = document.createElement(\"div\");\n    morepopupHeader.classList.add(\"dv--morepopup__header\");\n    const morepopupTitle = document.createElement(\"span\");\n    morepopupTitle.classList.add(\"dv--morepopup__title\");\n    morepopupTitle.textContent = \"Events spanning multiple days\";\n    const morepopupClose = document.createElement(\"span\");\n    morepopupClose.classList.add(\"dv--morepopup__close\");\n    morepopupClose.appendChild(createCloseIcon(\"var(--white3)\"));\n    morepopupHeader.append(morepopupTitle, morepopupClose);\n    const morepopupBody = document.createElement(\"div\");\n    morepopupBody.classList.add(\"dv--morepopup__body\");\n\n    const createMorePopupEntry = (entry) => {\n      const morepopupEntry = document.createElement(\"div\");\n      morepopupEntry.classList.add(\"dv--morepopup__entry\");\n      morepopupEntry.style.backgroundColor = `${store.getCtgColor(\n        entry.category\n      )}`;\n      morepopupEntry.setAttribute(\"data-sdvt-id\", entry.id);\n      const morepopupEntryTitle = document.createElement(\"span\");\n      morepopupEntryTitle.classList.add(\"dv--morepopup__entry-title\");\n      morepopupEntryTitle.textContent = entry.title;\n      const morepopupCategory = document.createElement(\"span\");\n      morepopupCategory.classList.add(\"dv--morepopup__entry-category\");\n      morepopupCategory.textContent = entry.category;\n      const morepopupEntryTime = document.createElement(\"span\");\n      morepopupEntryTime.classList.add(\"dv--morepopup__entry-time\");\n      morepopupEntryTime.textContent = formatEntryOptionsDate(\n        new Date(entry.start),\n        new Date(entry.end)\n      ).date;\n      morepopupEntry.append(\n        morepopupEntryTitle,\n        morepopupCategory,\n        morepopupEntryTime\n      );\n      return morepopupEntry;\n    };\n\n    entr.forEach((entry) => {\n      const morepopupEntry = createMorePopupEntry(entry);\n      morepopupBody.appendChild(morepopupEntry);\n    });\n\n    const closemp = () => {\n      morepopupoverlay.remove();\n      morepopup.remove();\n      store.removeActiveOverlay(\"morepopup\");\n      document.removeEventListener(\"keydown\", closeMpOnEsc);\n      morepopupoverlay.onclick = null;\n      morepopupClose.onclick = null;\n      morepopupBody.onclick = null;\n    };\n\n    const closeMpOnEsc = (e) => {\n      if (e.key === \"Escape\") {\n        closemp();\n        return;\n      }\n    };\n\n    function getEntrItem(e) {\n      if (getClosest(e, \".dv--morepopup__entry\")) {\n        openStackEntryOnTop(e, closemp);\n        return;\n      }\n    }\n\n    morepopup.append(morepopupHeader, morepopupBody);\n    document.body.prepend(morepopupoverlay, morepopup);\n    // document.body.appendChild(morepopup);\n    morepopupoverlay.onclick = closemp;\n    morepopupClose.onclick = closemp;\n    morepopupBody.onclick = getEntrItem;\n    // document.querySelector(\".dv--ontop__more\").onclick = null;\n    document.addEventListener(\"keydown\", closeMpOnEsc);\n  }\n\n  function openStackEntryOnTop(e, closearg) {\n    const target = e.target;\n    const id = target.getAttribute(\"data-sdvt-id\");\n    const setResetDv = () => {\n      console.log(\"reset\");\n    };\n\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const rect = target.getBoundingClientRect();\n\n    let [x, y] = placePopup(\n      400,\n      165,\n      [parseInt(rect.left), parseInt(rect.top) + 24],\n      [window.innerWidth, window.innerHeight],\n      false\n    );\n\n    closearg\n      ? store.setFormResetHandle(\"day\", closearg)\n      : store.setFormResetHandle(\"day\", setResetDv);\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = +y + \"px\";\n    modal.style.left = +x + \"px\";\n  }\n\n  function createStackableEntriesOnTop(entr) {\n    const dvOnTopGrid = document.createElement(\"div\");\n    dvOnTopGrid.classList.add(\"dayview--ontop__grid\");\n    entr.forEach((ent) => {\n      const dvOnTopEntry = document.createElement(\"div\");\n      dvOnTopEntry.classList.add(\"dayview--ontop__grid-item\");\n      dvOnTopEntry.textContent = ent.title;\n      dvOnTopEntry.style.backgroundColor = store.getCtgColor(ent.category);\n      dvOnTopEntry.setAttribute(\"data-sdvt-id\", ent.id);\n      dvOnTopGrid.appendChild(dvOnTopEntry);\n    });\n    dvOnTop.appendChild(dvOnTopGrid);\n  }\n\n  function createDvTop(entr) {\n    const dvtopgrid = document.createElement(\"div\");\n    dvtopgrid.classList.add(\"dv--ontop__grid\");\n\n    if (entr.length > 6) {\n      const moremessage = document.createElement(\"div\");\n      moremessage.classList.add(\"dv--ontop__more\");\n      moremessage.textContent = `${entr.length} more...`;\n      dvOnTop.appendChild(moremessage);\n      return;\n    } else {\n      createStackableEntriesOnTop(entr);\n    }\n  }\n\n  function renderBoxes() {\n    dvMainGrid.innerText = \"\";\n    dvOnTop.innerText = \"\";\n    createDvTop(boxes.getBoxesTop());\n    boxes.getBoxes().forEach((entry) => {\n      const y = entry.coordinates.y;\n      firstY == null || y < firstY ? (firstY = y) : null;\n      createBox(\n        dvMainGrid, // column\n        entry, // entry object\n        \"day\", // current view\n        store.getCtgColor(entry.category) // background color\n      );\n    });\n  }\n\n  /** RESIZE NORTH/SOUTH */\n  function resizeBoxNSDay(e, box) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    document.body.style.cursor = \"move\";\n    const col = box.parentElement;\n\n    let boxhasOnTop = false;\n    const boxorig = getOriginalBoxObject(box);\n    if (box.classList.contains(\"dv-box-ontop\")) {\n      boxhasOnTop = true;\n      resetStyleOnClick(\"day\", box);\n    }\n\n    box.classList.add(\"dv-box-resizing\");\n    const boxTop = box.offsetTop;\n    const headerOffset = parseInt(dvGrid.offsetTop);\n    createTemporaryBox(box, col, boxhasOnTop, \"day\");\n\n    let amountScrolled = parseInt(dvGrid.scrollTop);\n    const mousemove = (e) => {\n      let newHeight =\n        Math.round((e.pageY + amountScrolled - boxTop - headerOffset) / 12.5) *\n        12.5;\n\n      if (newHeight <= 12.5) {\n        box.style.height = \"12.5px\";\n        return;\n      } else if (newHeight + boxTop > 1188) {\n        return;\n      } else {\n        box.style.height = `${newHeight}px`;\n      }\n    };\n\n    function mouseup() {\n      document.querySelector(\".dv-temporary-box\").remove();\n      box.classList.remove(\"dv-box-resizing\");\n      if (boxhasOnTop) {\n        box.classList.add(\"dv-box-ontop\");\n      }\n\n      if (boxorig.height === box.offsetHeight) {\n        resetOriginalBox(box, boxorig);\n      } else {\n        setBoxTimeAttributes(box, \"day\");\n        const start = +box.getAttribute(\"data-dv-start-time\");\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\n        const time = calcTime(start, length);\n        box.setAttribute(\"data-dv-time\", time);\n        box.firstChild.nextSibling.firstElementChild.textContent = time;\n\n        updateBoxCoordinates(box, \"day\", boxes);\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\n        // check if new position overlaps with other boxes and handle\n        if (boxes.getBoxes().length > 1) {\n          handleOverlap(null, \"day\", boxes);\n        } else {\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\n        }\n      }\n\n      configHeader();\n      setStylingForEvent(\"dragend\", dvGrid, store);\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** DRAG NORTH/ SOUTH, EAST/ WEST */\n  function dragEngineDay(e, box) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    const col = box.parentElement;\n    let boxhasOnTop = false;\n\n    const startTop = +box.style.top.split(\"px\")[0];\n    const boxHeight = +box.style.height.split(\"px\")[0];\n    const startCursorY = e.pageY - parseInt(dvGrid.offsetTop);\n    const headerOffset = +dvGrid.getBoundingClientRect().top.toFixed(2);\n    let [tempX, tempY] = [e.pageX, e.pageY];\n    let [sX, sY] = [0, 0];\n    let hasStyles = false;\n\n    /** DRAG NORTH SOUTH */\n    const mousemove = (e) => {\n      sX = Math.abs(e.clientX - tempX);\n      sY = Math.abs(e.clientY - tempY);\n      if (!hasStyles) {\n        if (sX > 3 || sY > 3) {\n          hasStyles = true;\n          document.body.style.cursor = \"move\";\n          if (box.classList.contains(\"dv-box-ontop\")) {\n            boxhasOnTop = true;\n            resetStyleOnClick(\"day\", box);\n          }\n          box.classList.add(\"dv-box-dragging\");\n          createTemporaryBox(box, col, boxhasOnTop, \"day\");\n          sX = 0;\n          sY = 0;\n        }\n      }\n\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\n      if (newTop < 0 || currentCursorY < 0) {\n        newTop = 0;\n        return;\n      } else if (newTop + boxHeight > 1188) {\n        return;\n      }\n      box.style.top = `${newTop}px`;\n    };\n\n    const mouseup = () => {\n      const tempbox = document?.querySelector(\".dv-temporary-box\");\n      // if box did not move, no render needed\n      // click event to open form\n      if (tempbox === null) {\n        const setResetDv = () => {\n          setStylingForEvent(\"dragend\", dvGrid, store);\n          box.classList.remove(\"dv-box-clicked\");\n        };\n\n        box.classList.add(\"dv-box-clicked\");\n        const id = box.getAttribute(\"data-dv-box-id\");\n        const entry = store.getEntry(id);\n        const start = entry.start;\n        const color = box.style.backgroundColor;\n        const rect = box.getBoundingClientRect();\n\n        let [x, y] = placePopup(\n          400,\n          165,\n          [parseInt(rect.left) + 32, parseInt(rect.top) + 32],\n          [window.innerWidth, window.innerHeight],\n          false\n        );\n        store.setFormResetHandle(\"day\", setResetDv);\n        const setup = new FormSetup();\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\n        setup.setCategory(entry.category, color);\n        setup.setDates(getFormDateObject(start, entry.end));\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n        getEntryOptionModal(\n          context,\n          store,\n          entry,\n          datepickerContext,\n          finishSetup\n        );\n\n        const modal = document.querySelector(\".entry__options\");\n        if (window.innerWidth > 580) {\n          modal.style.top = +y + \"px\";\n          modal.style.left = x + \"px\";\n        } else {\n          modal.style.top = \"64px\";\n        }\n        // ******************\n      } else {\n        tempbox.remove();\n        box.classList.remove(\"dv-box-dragging\");\n        if (boxhasOnTop) {\n          box.classList.add(\"dv-box-ontop\");\n        }\n\n        setBoxTimeAttributes(box, \"day\");\n        const start = +box.getAttribute(\"data-dv-start-time\");\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\n        const time = calcTime(start, length);\n        box.setAttribute(\"data-dv-time\", time);\n\n        box.children[1].children[0].textContent = time;\n        updateBoxCoordinates(box, \"day\", boxes);\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\n        // check if new position overlaps with other boxes and handle\n        if (boxes.getBoxes().length > 1) {\n          handleOverlap(null, \"day\", boxes);\n        } else {\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\n        }\n\n        configHeader();\n        setStylingForEvent(\"dragend\", dvGrid, store);\n      }\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function handleDayviewClose() {\n    document.querySelector(\".dayview-temp-box\")?.remove();\n  }\n\n  function openDayviewForm(box, category, dates, type) {\n    store.setFormResetHandle(\"day\", handleDayviewClose);\n\n    const openForm = store.getRenderFormCallback();\n    const setup = new FormSetup();\n\n    const [submitType, id, title, description] = type;\n    setup.setSubmission(submitType, id, title, description);\n    if (submitType === \"create\") {\n      box.style.opacity = 0.9;\n    }\n\n    const [categoryName, color] = category;\n    setup.setCategory(categoryName, color);\n\n    const [start, end] = dates;\n    setup.setDates(getFormDateObject(start, end));\n\n    openForm();\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    fullFormConfig.getConfig(setup.getSetup());\n  }\n\n  /** CREATE BOX ON DRAG */\n  function createBoxOnDragDay(e) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    document.body.style.cursor = \"move\";\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\n\n    const box = document.createElement(\"div\");\n    box.setAttribute(\"class\", \"dv-box dv-box-dragging dayview-temp-box\");\n\n    // boxheader is static - create from template\n    const boxheader = createTempBoxHeader(\"day\");\n    const boxcontent = document.createElement(\"div\");\n    const boxtime = document.createElement(\"span\");\n    const boxtimeend = document.createElement(\"span\");\n    boxcontent.classList.add(\"dv-box__content\");\n    boxtime.classList.add(\"dv-box-time\");\n    boxtimeend.classList.add(\"dv-box-time\");\n\n    const headerOffset = parseInt(dvGrid.offsetTop);\n    const scrolled = parseInt(dvGrid.scrollTop);\n    const startCursorY = e.pageY - headerOffset;\n\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\n\n    let coords = { y: +y / 12.5, x: 1, h: 1, e: 2 };\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\n    let movedY = 0;\n\n    function mousemove(e) {\n      movedY += e.movementY;\n      let newHeight =\n        Math.round((e.pageY + scrolled - y - headerOffset) / 12.5) * 12.5;\n      if (newHeight <= 12.5) {\n        newHeight = 12.5;\n      }\n      if (newHeight + y > 1188) {\n        newHeight = 1187.5 - y;\n      }\n\n      box.style.height = `${newHeight}px`;\n      coords.h = +newHeight / 12.5;\n      coords.e = +coords.y + coords.h;\n\n      endhour = calcNewHourFromCoords(newHeight, y);\n      endmin = calcNewMinuteFromCoords(newHeight, y);\n\n      boxtime.style.wordBreak = \"break-word\";\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n    }\n\n    // append content to temporary box\n    boxcontent.append(boxtime, boxtimeend);\n    box.append(boxheader, boxcontent);\n    e.target.appendChild(box);\n\n    function mouseup() {\n      if (movedY <= 20) {\n        if (+coords.y >= 92) {\n          coords.y = 92;\n          coords.e = 95;\n          coords.h = 3;\n          box.style.height = \"37.5px\";\n          box.style.top = \"1150px\";\n          [starthour, startmin] = [23, 0];\n          [endhour, endmin] = [23, 45];\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n        } else {\n          coords.y = starthour * 4;\n          coords.e = +coords.y + 4;\n          coords.h = 4;\n          box.style.height = \"50px\";\n          box.style.top = `${+coords.y * 12.5}px`;\n          [starthour, startmin] = [starthour, 0];\n          [endhour, endmin] = [starthour + 1, 0];\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n        }\n      }\n\n      const datesData = getTempDates(\n        new Date(context.getDate()),\n        [starthour, endhour],\n        [startmin, endmin]\n      );\n\n      openDayviewForm(\n        box,\n        [tempcategory, color],\n        datesData,\n        [\"create\", null, null, null]\n      );\n\n      setStylingForEvent(\"dragend\", dvGrid, store);\n      document.removeEventListener(\"mouseup\", mouseup);\n      document.removeEventListener(\"mousemove\", mousemove);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function renderBoxesForGrid() {\n    renderBoxes();\n    handleOverlap(null, \"day\", boxes);\n  }\n\n  function delegateDayView(e) {\n    const dvhresizehandle = getClosest(e, \".dv-box-resize-s\");\n    const dvhbox = getClosest(e, \".dv-box\");\n    const dvhgrid = getClosest(e, \".dayview--main-grid\");\n    const dvhboxTop = getClosest(e, \".dayview--ontop__grid-item\");\n    const dvhGrouped = getClosest(e, \".dv--ontop__more\");\n\n    // resize existing event\n    if (dvhresizehandle) {\n      resizeBoxNSDay(e, e.target.parentElement);\n      return;\n    }\n\n    // drag existing event\n    if (dvhbox) {\n      dragEngineDay(e, e.target);\n      return;\n    }\n\n    // drag empty space to create new event\n    if (dvhgrid) {\n      createBoxOnDragDay(e, e.target);\n      return;\n    }\n\n    // opens stacked all day events (less than 6)\n    if (dvhboxTop) {\n      openStackEntryOnTop(e);\n      return;\n    }\n\n    // opens grouped all day events (more than 6)\n    if (dvhGrouped) {\n      openDvMore(boxes.getBoxesTop());\n      return;\n    }\n  }\n\n  function handleScrollToOnInit() {\n    if (firstY !== null) {\n      let settop = +firstY * 12.5;\n      setTimeout(() => {\n        dvGrid.scrollTo({\n          top: settop,\n          behavior: \"instant\",\n        });\n      }, 4);\n    } else {\n      const hour = new Date().getHours() * 50;\n      setTimeout(() => {\n        dvGrid.scrollTo({\n          top: hour - 25 <= 0 ? 0 : hour - 25,\n          behavior: \"instant\",\n        });\n      }, 4);\n    }\n  }\n\n  const initDayView = () => {\n    dvSideGridWrapper.innerText = \"\";\n    createDVSideGridCells();\n    entries = store.getDayEntries(context.getDate());\n    boxes = new Day(entries.day, entries.allDay);\n    renderBoxesForGrid();\n    configHeader();\n    dvContainer.onmousedown = delegateDayView;\n    store.setResetPreviousViewCallback(resetDayview);\n    handleScrollToOnInit();\n  };\n\n  initDayView();\n}\n","import getEntryOptionModal from \"../menus/entryOptions\";\nimport setViews from \"../../config/setViews\";\nimport FormSetup from \"../forms/setForm\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport {\n  getClosest,\n  hextorgba\n} from '../../utilities/helpers';\nimport {\n  getdatearray,\n  getFormDateObject,\n  getDateFromAttribute,\n  longerThanDay,\n  formatStartEndDate\n} from \"../../utilities/dateutils\";\nimport { formatStartEndTimes } from \"../../utilities/timeutils\";\nimport locales from \"../../locales/en\";\n\nconst dateTimeTitle = document.querySelector(\".datetime-content--title\");\nconst listview = document.querySelector('.listview');\nconst listviewBody = document.querySelector('.listview__body');\n\nexport default function setListView(context, store, datepickerContext) {\n\n  let monthNames = locales.labels.monthsShort.map(x => x.toUpperCase());\n  let weekDayNames = locales.labels.weekdaysShort.map(x => x.toUpperCase());\n  let [todayYear, todayMonth, todayDay] = getdatearray(new Date());\n  /*************************************** */\n\n  /**\n   * createRowGroups\n   * @param {object} entries { \"2020-01-01\": [ {entry}, {entry}, {entry} ], \"2020-01-02\": [ {entry}, {entry}, {entry} ] }\n   * @desc createRowGroups() is called from setListView(). \n   * The entries object uses the date as the key and the value as an array of entries for that specific date.\n   */\n  function createRowGroups(entries) {\n    // use count to check for first rowgroup\n    let count = 1;\n    for (let [key, value] of Object.entries(entries)) {\n\n      const tempdate = new Date(\n        key.split(\"-\").map(x => parseInt(x, 10))\n      );\n      // {mumber} month, {number} day of month, {number} day of week\n      const [month, day, dow] = [\n        tempdate.getMonth(),\n        tempdate.getDate(),\n        tempdate.getDay(),\n      ];\n\n      const [wn, mn] = [weekDayNames[dow], monthNames[month]];\n\n      const rgheader = createRowGroupHeader(\n        wn,\n        mn,\n        day,\n        key,\n        count === 1 ? true : false\n      );\n      count = null;\n\n      // sort entries by end time if there are more than one per day\n      if (value.length > 1) {\n        value.sort((a, b) => {\n          return new Date(a.end) - new Date(b.end);\n        });\n      }\n\n      const rgContent = document.createElement(\"div\");\n      rgContent.classList.add(\"rowgroup-content\");\n      value.forEach((entry) => {\n        rgContent.append(createRowGroupCell(entry));\n      });\n\n      const rg = document.createElement('div');\n      rg.classList.add('listview__rowgroup');\n      rg.append(rgheader, rgContent);\n      listviewBody.appendChild(rg);\n    }\n  }\n\n  /**\n   * createRowGroupHeader\n   * @param {string} weekname SUN, MON, TUE, WED ...\n   * @param {string} monthname JAN, FEB, MAR, APR ...\n   * @param {number} day 1, 2, 3, 4 ...\n   * @param {string} date yyyy-mm-dd\n   * @param {boolean} settop true/false : is this the first rowgroup?\n   */\n  function createRowGroupHeader(weekname, monthname, day, date, settop) {\n    const rgHeader = document.createElement('div');\n    rgHeader.classList.add('rowgroup-header');\n    const rgHeaderDateNumber = document.createElement('div');\n\n    rgHeaderDateNumber.classList.add('rowgroup--header__datenumber');\n    rgHeaderDateNumber.textContent = day;\n    rgHeaderDateNumber.setAttribute(\"data-rgheader-date\", date);\n    const rgHeaderDate = document.createElement('div');\n    rgHeaderDate.classList.add('rowgroup--header__monthdow');\n    rgHeaderDate.textContent = `${monthname}, ${weekname}`;\n    \n    if (settop) {\n      rgHeaderDateNumber.classList.add(\"top-datenumber\");\n      rgHeaderDate.classList.add(\"top-monthdow\");\n    }\n\n    rgHeader.append(rgHeaderDateNumber, rgHeaderDate);\n    return rgHeader;\n  }\n\n  function createRowGroupCell(entry) {\n    const color = store.getCtgColor(entry.category);\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\n    let datetitle;\n    if (longerThanDay(start, end)) {\n      let tempyear;\n      if (start.getFullYear() !== end.getFullYear()) {\n        tempyear = +end.getFullYear() - 2000;\n      }\n\n      datetitle = `${monthNames[end.getMonth()]} ${end.getDate()} ${tempyear ? tempyear : \"\"}`;\n    } else {\n      datetitle = `${formatStartEndTimes(\n        [start.getHours(), end.getHours()],\n        [start.getMinutes(), end.getMinutes()]\n      )}`;\n    }\n\n    const rgCell = document.createElement('div');\n    rgCell.classList.add('rowgroup--cell');\n    rgCell.setAttribute('data-rgcell-id', entry.id);\n    const rgCellColor = document.createElement(\"div\");\n    rgCellColor.classList.add(\"rowgroup--cell__color\");\n    rgCellColor.style.backgroundColor = color;\n    const rgCellTime = document.createElement(\"div\");\n    rgCellTime.classList.add(\"rowgroup--cell__time\");\n    rgCellTime.textContent = datetitle;\n    const rgCellTitle = document.createElement(\"div\");\n    rgCellTitle.classList.add(\"rowgroup--cell__title\");\n    rgCellTitle.textContent = entry.title;\n    rgCell.append(rgCellColor, rgCellTime, rgCellTitle);\n    return rgCell;\n  }\n  /*************************************** */\n\n  /**\n   * resetCellActive\n   * @desc remove active class & inline style from clicked cell\n   */\n  function resetCellActive() {\n    const activeCell = document?.querySelector(\".rowgroup--cell-active\");\n    if (activeCell) {\n      activeCell.classList.remove(\"rowgroup--cell-active\");\n      activeCell.removeAttribute(\"style\");\n    }\n  }\n\n  /**\n   * getRgContextMenu\n   * @param {HTMLElement} cell element that was clicked\n   */\n  function getRgContextMenu(cell) {\n    console.log(cell);\n    const id = cell.getAttribute(\"data-rgcell-id\");\n    cell.classList.add(\"rowgroup--cell-active\");\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    cell.style.backgroundColor = hextorgba(color, 0.7);\n\n    const rect = cell.getBoundingClientRect();\n    const height = cell.offsetHeight;\n    const rectTop = parseInt(rect.top) + height;\n    const rectLeft = parseInt(rect.left);\n    const modalHeight = 165;\n\n    let y = rectTop + 12;\n    if (rectTop + modalHeight > window.innerHeight) {\n      y = rectTop - modalHeight - height - 12;\n    }\n\n    let x = rectLeft;\n    if (rectLeft + 150 > window.innerWidth) {\n      x = window.innerWidth - 150;\n    }\n\n    // *** config & open form ***\n    store.setFormResetHandle(\"list\", resetCellActive);\n\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n  }\n\n  /**\n   * setDayViewLV\n   * @param {HTMLElement} target first rowgroup header element (day number)\n   * @desc switch to day view and set date to clicked day\n   */\n  function setDayViewLV(target) {\n    let [year, month, day] = getDateFromAttribute(target, 'data-rgheader-date', \"month\");\n    context.setDate(year, month, day);\n    context.setDateSelected(day);\n    if (context.getSidebarState() === \"open\") {\n      datepickerContext.setDate(year, month, day);\n      datepickerContext.setDateSelected(day);\n    }\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n  }\n\n  function delegateListview(e) {\n    const headerNum = getClosest(e, \".rowgroup--header__datenumber\");\n    const rgCell = getClosest(e, \".rowgroup--cell\");\n\n    if (headerNum) {\n      setDayViewLV(e.target);\n      return;\n    }\n\n    if (rgCell) {\n      getRgContextMenu(rgCell);\n      return;\n    }\n  }\n\n  function resetListview() {\n    listviewBody.innerText = \"\";\n    listview.onclick = null;\n    monthNames = null;\n    weekDayNames = null;\n  }\n\n  const initListView = () => {\n    listviewBody.innerText = \"\";\n    store.setResetPreviousViewCallback(resetListview);\n\n    let activeEnt = store.getActiveEntries();\n    if (activeEnt.length === 0) {\n      dateTimeTitle.textContent = \"No Entries to Display\";\n      return;\n    } else {\n\n      let entries = store.sortBy(activeEnt, \"start\", \"desc\");\n      // console.log(entries)\n      // console.log(activeEnt)\n      let groupedEntries = entries.reduce((acc, curr) => {\n        const date = new Date(curr.start);\n        const [year, month, day] = getdatearray(date);\n        const datestring = `${year}-${month}-${day}`;\n\n        if (year < todayYear) {\n          return acc;\n        } else if (year === todayYear) {\n          if (month < todayMonth) {\n            return acc;\n          } else if (month === todayMonth && day < todayDay) {\n            return acc;\n          }\n        }\n\n        if (!acc[datestring]) { acc[datestring] = []; }\n        acc[datestring].push(curr);\n        return acc;\n      }, {});\n      // console.log(groupedEntries)\n\n      // set the header title to the first date with entries that is not in the past and the last date with entries\n      // if no entries are in the future, set the header title to \"Schedule Clear\";\n      let keys = Object.keys(groupedEntries);\n      const length = keys.length;\n      if (length === 0) {\n        dateTimeTitle.textContent = \"Schedule Clear\";\n      } else {\n        // true will slice the year at last two digits if two years are displayed at the same time;\n        const earliestDate = new Date(keys[0].split(\"-\").map(x => parseInt(x)));\n\n        context.setDate(\n          earliestDate.getFullYear(),\n          earliestDate.getMonth(),\n          earliestDate.getDate()\n        );\n\n        context.setDateSelected(earliestDate.getDate());\n\n        if (context.getSidebarState === \"open\") {\n          datepickerContext.setDate(\n            earliestDate.getFullYear(),\n            earliestDate.getMonth(),\n            earliestDate.getDate()\n          );\n\n          datepickerContext.setDateSelected(earliestDate.getDate());\n        }\n\n        dateTimeTitle.textContent = formatStartEndDate(\n          keys[0],\n          keys[length - 1],\n          true\n        );\n      }\n\n      createRowGroups(groupedEntries);\n      listview.onclick = delegateListview;\n      activeEnt = null;\n      entries = null;\n      groupedEntries = null;\n      keys = null;\n    }\n  };\n\n  initListView();\n}","// rendering\nimport setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\n\n// Box query\nimport MonthBoxQuery from \"../../factory/queries\";\n\n// date utilities\nimport {\n  getDateFormatted,\n  compareDates,\n  createDateFromFormattedString,\n  getDateFromAttribute,\n  getFormDateObject,\n  generateTempStartEnd,\n  getDurationSeconds,\n} from \"../../utilities/dateutils\";\n\nimport { createCloseIcon } from \"../../utilities/svgs\";\n\n// general utilities\nimport {\n  getClosest,\n  hextorgba,\n  placePopup\n} from '../../utilities/helpers';\n\n// drag&drop / resize utilities\nimport { setStylingForEvent } from \"../../utilities/dragutils\";\n\n// naming\nimport locales from \"../../locales/en\";\n\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\nconst sidebar = document.querySelector(\".sidebar\");\nconst monthWrapper = document.querySelector(\".monthview--calendar\");\n\nexport default function setMonthView(context, store, datepickerContext) {\n  const boxquery = new MonthBoxQuery(\n    window.innerWidth <= 530 || window.innerHeight <= 470\n  );\n\n  function renderSidebarDatepickerMonth() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      context.setDateSelected(context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function handleOverlay(type) {\n    if (type === \"hide\") {\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      store.removeActiveOverlay(\"hide-resize-overlay\");\n    } else {\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n      store.addActiveOverlay(\"hide-resize-overlay\");\n    }\n  }\n\n  function setDayViewViaMonth() {\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n    renderSidebarDatepickerMonth();\n  }\n\n  function renderDayViewViaModal(parentDate) {\n    handleOverlay(\"hide\");\n    context.setDate(\n      parentDate.getFullYear(),\n      parentDate.getMonth(),\n      parentDate.getDate()\n    );\n    setDayViewViaMonth();\n  }\n\n  // Actual content box\n  function createBox(id, category, top, content, duration, desc) {\n    const box = document.createElement(\"div\");\n    box.classList.add(\"monthview--box\");\n    box.setAttribute(\"data-monthview-id\", id);\n    box.style.backgroundColor = store.getCtgColor(category);\n    box.style.top = `${top}px`;\n    if (duration == ''){\n      box.style.height = `70px`;\n    } else {\n      box.style.height = `${boxquery.getHeight()}px`;\n    }\n    box.style.width = \"100%\";\n\n    const boxtitle = document.createElement(\"div\");\n    boxtitle.classList.add(\"monthview--title\");\n    boxtitle.textContent = content;\n    \n    const boxsubtitle = document.createElement(\"div\");\n    boxsubtitle.classList.add(\"monthview--sub--title\");\n    boxsubtitle.textContent = duration;\n    boxtitle.appendChild(boxsubtitle);\n\n    const boxdesc = document.createElement(\"div\");\n    boxdesc.classList.add(\"monthview--description\");\n    boxdesc.textContent = desc;\n    boxtitle.appendChild(boxdesc);\n\n    box.appendChild(boxtitle);\n    return box;\n  }\n\n  function createContent(){\n    // Will take the json element and render duration & Zones accordingly\n  }\n\n  function createGroupedCell(cellDate, count) {\n    const groupedBxs = document.createElement('div');\n    groupedBxs.classList.add('monthview--daygroup');\n    groupedBxs.setAttribute(\"data-mvgrouped-date\", cellDate);\n    groupedBxs.setAttribute(\"data-mvgrouped-length\", count);\n    const groupedDiv = document.createElement(\"div\");\n    groupedDiv.classList.add(\"monthview--grouped\");\n    const groupedTitle = document.createElement(\"div\");\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\n    groupedTitle.textContent = count + \" \" + \"more...\";\n\n    groupedDiv.appendChild(groupedTitle);\n    groupedBxs.appendChild(groupedDiv);\n    return groupedBxs;\n  }\n\n  function createCellHeader(cell, day) {\n    const daynumberAndMonth = day.getDate() + \" \" + locales.labels.monthsShort[day.getMonth()];\n    const daynumber = document.createElement('span');\n    daynumber.classList.add(\"monthview--daynumber\");\n    /**\n     * case 1: cell does not represent current month\n     * case 2: cell represents first day of current month\n     * case 3: cell represents today\n     * case 4: cell represents days within current month\n    **/\n    if (day.getMonth() !== context.getMonth()) {\n      daynumber.textContent = daynumberAndMonth;\n      daynumber.classList.add(\"monthview--daynumber-prevnext\");\n    } else if (day.getDate() === 1) {\n      daynumber.textContent = daynumberAndMonth;\n    } else if (context.isToday(day)) {\n      daynumber.textContent = day.getDate();\n      daynumber.classList.add(\"monthview--daynumber-today\");\n      cell.classList.add(\"monthview--today\");\n    } else {\n      daynumber.textContent = day.getDate();\n    }\n    return daynumber;\n  }\n\n  function createCell(day, idx, entry, cellDate) {\n    const cellCoordinates = [\n      +day.getDay(),        // (x): day of week\n      Math.floor((idx) / 7) // (y): week of month\n    ];\n\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"monthview--day\");\n    cell.setAttribute(\"data-mv-date\", cellDate);\n    cell.setAttribute(\"data-mv-idx\", idx);\n    cell.setAttribute(\"data-mv-coordinates\", cellCoordinates);\n\n    const dayofmonth = document.createElement('button');\n    dayofmonth.classList.add('monthview--dayofmonth');\n    const cellContent = document.createElement('div');\n    cellContent.classList.add('monthview--daycontent');\n\n    if (day.getMonth() === context.getMonth() && day.getDate() === context.getDateSelected()) {\n      dayofmonth.classList.add(\"monthview--dayofmonth-selected\");\n    }\n    dayofmonth.appendChild(createCellHeader(cell, day));\n\n    let toptotal = 0; // box.style.top = (box index) * boxquery.getTop()\n\n    if (entry !== undefined && entry.length > 0) {\n\n      // handle instances where entries have same day but different month\n      entry = entry.filter((el) => new Date(el.start).getMonth() === day.getMonth());\n\n      if (entry.length >= 6) {\n        // automatically group if there are more than 6 entries on a day\n        cellContent.appendChild(createGroupedCell(cellDate, entry.length));\n        cellContent.classList.add(\"monthview--daycontent-grouped\");\n\n      } else {\n\n        // not grouped (less than 6 entries)\n        entry.forEach((el, idx) => {\n          if (compareDates(new Date(el.start), day)) {\n            if (idx > 0) {\n              if (el.duration == '' ){\n                // No duration, for this element increase top by small amount \n                // as element will not have full height\n                toptotal+=75\n              }\n              else toptotal += boxquery.getTop();\n            }\n            cellContent.appendChild(createBox(\n              el.id,        // entry id\n              el.category,  // backgroundColor\n              toptotal,     // style.top\n              el.title,      // entry title\n              el.duration,   // subtitle\n              el.description // desc\n            ));\n          }\n        });\n      }\n    }\n\n    cell.append(dayofmonth, cellContent);\n    monthWrapper.appendChild(cell);\n  }\n\n  function resetMonthview() {\n    monthWrapper.innerText = \"\";\n    monthWrapper.onmousedown = null;\n    monthWrapper.onclick = null;\n  }\n\n  function populateCells() {\n    // Loads data from browser state - should get the TP data here (i.e. the actual workouts)\n    monthWrapper.innerText = \"\";\n    let montharray = context.getMonthArray();\n    let monthentries = store.getMonthEntries(montharray);\n    let groupedEntries = store.getGroupedMonthEntries(monthentries);\n\n    montharray.length < 42\n      ? monthWrapper.classList.add(\"five-weeks\")\n      : monthWrapper.classList.remove(\"five-weeks\");\n\n    const dayHasEntry = (day) => {\n      const dayEntries = groupedEntries[day.getDate()];\n      return dayEntries !== undefined ? dayEntries : [];\n    };\n\n    montharray.forEach((day, idx) => {\n      createCell(day, idx, dayHasEntry(day), getDateFormatted(day));\n    });\n\n    montharray = null;\n    monthentries = null;\n    groupedEntries = null;\n  }\n\n  function getCoordinatesFromCell(cell) {\n    return cell.getAttribute(\"data-mv-coordinates\").split(\",\").map((x) => {\n      return parseInt(x);\n    });\n  }\n\n  function configureForStorage(newCell, clone) {\n    let [year, month, day] = getDateFromAttribute(newCell, \"data-mv-date\", \"month\");\n    const id = clone.getAttribute(\"data-monthview-id\");\n    let tempEntry = store.getEntry(id);\n\n    let [start, end] = [new Date(tempEntry.start), new Date(tempEntry.end)];\n    let tempdate = new Date(year, month, day);\n    let diff = getDurationSeconds(start, tempdate);\n    let endDay = end.getDate() + Math.floor(diff / 86400) + 1;\n\n    store.updateEntry(id, {\n      start: new Date(\n        year, month, day, start.getHours(), start.getMinutes()\n      ),\n      end: new Date(\n        end.getFullYear(), end.getMonth(), endDay, end.getHours(), end.getMinutes()\n      ),\n    });\n  }\n\n  function createTemporaryBox(box) {\n    const clone = box.cloneNode(true);\n    monthWrapper.prepend(clone);\n    clone.classList.add(\"box-mv-dragactive\");\n    clone.focus();\n  }\n\n  function configGroupedCellOnDrop(groupedCell) {\n    const count = groupedCell.getAttribute(\"data-mvgrouped-length\");\n    groupedCell.setAttribute(\"data-mvgrouped-length\", +count + 1);\n    groupedCell.firstChild.firstChild.textContent = `${groupedCell.getAttribute(\"data-mvgrouped-length\")} more...`;\n  }\n\n  function configClonedBoxForDrop(clone) {\n    clone.classList.remove(\"box-mv-dragactive\");\n    clone.style.top = \"0px\";\n    clone.style.left = \"0px\";\n    clone.style.width = \"100%\";\n    clone.style.height = `${boxquery.getHeight()}px`;\n  }\n\n  function resetCellOnDrop(bxs, transition) {\n    if (bxs.length === 0 || bxs === undefined) return;\n    for (let i = 0; i < bxs.length; i++) {\n\n      if (bxs[i] !== undefined && bxs[i] !== null && !bxs[i].classList.contains(\"monthview--box__form-temp\")) {\n        bxs[i].style.top = `${i * boxquery.getTop()}px`;\n\n        if (transition) {\n          bxs[i].classList.add(\"monthview--box__drop\");\n          setTimeout(() => {\n            bxs[i].classList.remove(\"monthview--box__drop\");\n          }, 200);\n\n        } else {\n          bxs[i].setAttribute(\"class\", \"monthview--box\");\n        }\n      }\n    }\n  }\n\n  function createGroupedCellOnDrop(cell, content, boxes, clone) {\n    const newGroupedCell = document.createElement('div');\n    newGroupedCell.classList.add('monthview--daygroup');\n    newGroupedCell.setAttribute(\"data-mvgrouped-date\", cell.getAttribute(\"data-mv-date\"));\n    newGroupedCell.setAttribute(\"data-mvgrouped-length\", boxes.length);\n\n    const groupedDiv = document.createElement(\"div\");\n    groupedDiv.classList.add(\"monthview--grouped\");\n    const groupedTitle = document.createElement(\"div\");\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\n    groupedTitle.textContent = boxes.length + \" \" + \"more...\";\n\n    // reset cell content to empty then append grouped cell\n    content.innerText = \"\";\n    newGroupedCell.appendChild(groupedDiv);\n    groupedDiv.appendChild(groupedTitle);\n    content.appendChild(newGroupedCell);\n    content.classList.add(\"monthview--daycontent-grouped\");\n    clone.remove();\n  }\n\n  // the month view drag and drop system differs from the week & day views\n  // see readme for more info (section : drag engine)\n  function dragEngineMonth(e, box) {\n    setStylingForEvent(\"dragstart\", monthWrapper, store);\n    const startDragTime = Date.now();\n    const parent = box.parentElement;\n    const cell = parent.parentElement;\n    cell.classList.add(\"current-drop-zone\");\n    const targetModal = document?.querySelector(\".more-modal\");\n\n    const originalCellLength = parent.childElementCount;\n    const [cellX, cellY] = getCoordinatesFromCell(cell);\n\n    // create cloned box with class box-mv-dragactive\n    createTemporaryBox(box);\n    const clone = document?.querySelector(\".box-mv-dragactive\");\n    clone.setAttribute(\"data-box-mvx\", cellX);\n    clone.setAttribute(\"data-box-mvy\", cellY);\n\n    const cellRect = cell.getBoundingClientRect();\n    const cellWidth = parseFloat(cellRect.width.toFixed(2));\n    const cellHeight = parseFloat(cellRect.height.toFixed(2));\n    const wrapperLeft = parseInt(monthWrapper.offsetLeft);\n    const boxRect = box.getBoundingClientRect();\n    const boxWidth = parseFloat(boxRect.width);\n    const boxHeight = boxquery.getHeight();\n\n    clone.style.top = `${parent.offsetTop}px`;\n    clone.style.width = `${boxWidth}px`;\n    clone.style.height = `${boxHeight}px`;\n    clone.style.left = `${parent.offsetLeft}px`;\n    clone.classList.add(\"hide-mv-clone\")\n\n    let hasFiveWeeks = monthWrapper.classList.contains(\"five-weeks\");\n    let [startcursorx, startcursory] = [e.clientX, e.clientY];\n    let [movedX, movedY] = [0, 0];\n    let [lastX, lastY] = [cellX, cellY];\n    let gaveStyles = false;\n    let changeCursor = false;\n\n    const mousemove = e => {\n      movedX = Math.abs(e.clientX - startcursorx);\n      movedY = Math.abs(e.clientY - startcursory);\n      // Do not apply styles until user has moved the box at least 5px from starting position.\n      if (movedX > 1 || movedY > 1) {\n        if (!changeCursor) {\n          if (targetModal) {\n            targetModal.remove();\n          }\n          document.body.style.cursor = \"move\";\n          changeCursor = true;\n        }\n      }\n      if (movedX > 3 || movedY > 3) {\n        if (!gaveStyles) {\n          box.style.opacity = \"0.5\";\n          clone.classList.remove(\"hide-mv-clone\")\n        }\n        gaveStyles = true;\n      }\n\n      // *********************\n      // DRAG EAST / WEST\n      let newX = Math.floor((e.clientX - monthWrapper.offsetLeft) / cellWidth);\n      // min : first column\n      if (newX < 0) {\n        newX = 0;\n        return;\n      }\n      // max : last column\n      if (newX > 6) {\n        newX = 6;\n        return;\n      }\n\n      // update new left position once\n      if (lastX !== newX) {\n        let multX = (newX * cellWidth) + wrapperLeft;\n        clone.style.left = `${parseFloat(multX.toFixed(2))}px`;\n        lastX = newX;\n      }\n\n\n      // *********************\n      // DRAG NORTH / SOUTH\n      let newY = Math.floor((e.clientY - monthWrapper.offsetTop) / cellHeight);\n      // min : first row\n      if (newY < 0) {\n        newY = 0;\n        return;\n      }\n      // max : last row (5 weeks)\n      if (hasFiveWeeks && newY > 4) {\n        newY = 4;\n        return;\n      }\n      // max : last row (6 weeks)\n      if (!hasFiveWeeks && newY > 5) {\n        newY = 5;\n        return;\n      }\n\n      // ensure new top position is only calculated if the cursor has moved\n      // vertically across a cell border\n      if (lastY !== newY) {\n        let multY = (newY * cellHeight) + monthWrapper.offsetTop + 16;\n        clone.style.top = `${parseFloat(multY.toFixed(2))}px`;\n        lastY = newY;\n      }\n\n      // *********************\n      // .current-drop-zone\n      // Provides a callable reference to the\n      // final drop zone initiated on mouseup. \n      document.querySelector(\".current-drop-zone\")?.classList.remove(\"current-drop-zone\");\n      document.querySelector(`[data-mv-coordinates=\"${newX},${newY}\"]`).classList.add(\"current-drop-zone\");\n    };\n\n    const mouseup = () => {\n      const newCell = document?.querySelector(\".current-drop-zone\");\n      const endDragTime = Date.now();\n      const timeDiff = endDragTime - startDragTime;\n      const [newCellX, newCellY] = getCoordinatesFromCell(newCell);\n      newCell.classList.remove(\"current-drop-zone\");\n      const newCellContent = newCell.children[1];\n      const boxes = newCellContent?.children;\n      let boxmoved = false;\n\n      // newcell not found \n      // edge case, haven't come across this yet\n      if (newCell === undefined || newCell === null) {\n        setStylingForEvent(\"dragend\", monthWrapper, store);\n        box.style.opacity = \"1\";\n        clone.remove();\n        boxmoved = false;\n        document.removeEventListener(\"mousemove\", mousemove);\n        document.removeEventListener(\"mouseup\", mouseup);\n        return;\n      }\n\n      // handle case where box is not moved\n      // treat as click event if quick enough\n      if (newCellX === cellX && newCellY === cellY) {\n        boxmoved = false;\n        box.style.opacity = \"1\";\n        clone.remove();\n        if (targetModal) {\n          targetModal.remove();\n        }\n        if (timeDiff < 200) {\n          openFormOnClickMV(box, newCell);\n        }\n\n        // box was moved\n      } else {\n        // case 1 : cell has 6 or more items (more than 6 items)\n        // case 2 : cell is not empty and not group (1-5 items)\n        // case 3 : cell becomes group (6 items)\n        // case 4 : cell is empty\n        // cases 1-4 : run update after to update styling\n        // (click)     case 5 : box not moved \n        // movedX / movedY : cursor distance, i.e. (dragstart to dragend)\n        boxmoved = true;\n        if (boxes[0] !== undefined) {\n\n          // grouped cell\n          if (boxes[0].classList.contains(\"monthview--daygroup\")) {\n            // (case 1)\n            configGroupedCellOnDrop(boxes[0]);\n            configureForStorage(newCell, clone);\n            clone.remove();\n            box.remove();\n\n          } else {\n            // ***********************\n            // setup for cases 2 & 3 (not grouped/not empty)\n            configClonedBoxForDrop(clone);\n            clone.classList.remove(\"hide-mv-clone\")\n            newCellContent.insertBefore(clone, boxes[0]);\n            configureForStorage(newCell, clone);\n            box.remove();\n            // ***********************\n            if (boxes.length <= 5) {\n              // (case 2)\n              resetCellOnDrop(boxes, true);\n            } else {\n              // (case 3)\n              createGroupedCellOnDrop(newCell, newCellContent, boxes, clone);\n            }\n          }\n        } else {\n          // (case 4)\n          configClonedBoxForDrop(clone);\n          box.remove();\n          clone.classList.remove(\"hide-mv-clone\")\n          newCellContent.appendChild(clone);\n          configureForStorage(newCell, clone);\n          renderSidebarDatepickerMonth();\n        }\n      }\n\n      if (boxmoved) {\n        // & original cell empty \n        if (originalCellLength === 1) {\n          renderSidebarDatepickerMonth();\n        } else {\n          // & original cell not empty --- re calculate styling\n          resetCellOnDrop(parent.children, true);\n        }\n      }\n      /*******************/\n      setStylingForEvent(\"dragend\", monthWrapper, store);\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n      // document.removeEventListener(\"touchmove\", mousemove);\n      // document.removeEventListener(\"touchend\", mouseup);\n    };\n\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n    // document.addEventListener(\"touchmove\", mousemove);\n    // document.addEventListener(\"touchend\", mouseup);\n  }\n\n  function getMoreModalEntries(e) {\n    const [y, m, d] = getDateFromAttribute(\n      e.target.parentElement.parentElement, \"data-mv-date\", \"month\"\n    );\n    return store.getDayEntriesArray(new Date(y, m, d));\n  }\n\n  function closeMoreModalOnEscape(e) {\n    if (e.key === \"Escape\") {\n      closeMoreModal();\n    }\n  }\n\n  function closeMoreModal() {\n    const mm = document?.querySelector(\".more-modal\");\n    if (mm) {\n      mm.remove();\n    }\n    handleOverlay(\"hide\");\n    document.removeEventListener(\"keydown\", closeMoreModalOnEscape);\n  }\n\n  function createMoreModalBox(moreModalEntries) {\n    const modalContent = document.createElement(\"div\");\n    modalContent.classList.add(\"more-modal-content\");\n    for (let i = 0; i < moreModalEntries.length; i++) {\n      const entry = moreModalEntries[i];\n\n      const modalEntry = document.createElement(\"div\");\n      modalEntry.classList.add(\"more-modal-entry\");\n      modalEntry.style.top = `${i * 22}px`;\n\n      modalEntry.style.width = `calc(100% - 16px)`;\n      modalEntry.style.height = \"20px\";\n      modalEntry.setAttribute(\"data-monthview-id\", entry.id);\n      modalEntry.setAttribute(\"data-mvhidden-category\", entry.category);\n      modalEntry.style.backgroundColor = store.getCtgColor(entry.category);\n\n      const modalEntryTitle = document.createElement(\"div\");\n      modalEntryTitle.classList.add(\"more-modal-entry-title\");\n      modalEntryTitle.textContent = entry.title;\n\n      modalEntry.appendChild(modalEntryTitle);\n      modalContent.appendChild(modalEntry);\n    }\n    return modalContent;\n  }\n  // if more than four tasks exist in a cell, group them on next reload\n  function createMoreModal(e) {\n    const moreModalEntries = getMoreModalEntries(e);\n    handleOverlay(\"show\");\n    // parent : month cell\n    const parent = e.target.parentElement.parentElement;\n    const modal = document.createElement(\"div\");\n    modal.classList.add(\"more-modal\");\n    modal.setAttribute(\"data-mv-modal\", parent.getAttribute(\"data-mv-idx\"));\n\n    let modalHeight = (moreModalEntries.length * 28) + 64;\n\n    if (modalHeight > 400) {\n      modalHeight = 400;\n    }\n\n    const rect = parent.getBoundingClientRect();\n    let newleft = parseInt(rect.left);\n    let rectWidth = parseInt(rect.width);\n\n    let [x, y] = placePopup(\n      216,\n      modalHeight,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight],\n      true,\n      rectWidth\n      // parseInt(rect.width)\n    );\n\n    let maxH = +window.innerHeight - +y - 24;\n    modal.setAttribute(\"style\", `top: ${y}px; left: ${x}px; width: 216px; height: ${modalHeight}px; min-height: 120px; max-height: ${maxH}px;`);\n\n    const modalHeader = document.createElement(\"div\");\n    modalHeader.classList.add(\"more-modal-header\");\n    const modalHeaderTitle = document.createElement(\"div\");\n    modalHeaderTitle.classList.add(\"more-modal-header-title\");\n    const parentDate = createDateFromFormattedString(e.target.parentElement.parentElement.getAttribute(\"data-mv-date\"));\n\n    // dayn: daynumber (1, 2, 3, etc)\n    const dowspan = document.createElement(\"span\");\n    dowspan.classList.add(\"more-modal-header-title-dow\");\n    dowspan.textContent = locales.labels.weekdaysShort[parentDate.getDay()].toUpperCase();\n\n    const daynspan = document.createElement(\"span\");\n    daynspan.classList.add(\"more-modal-header-title-dayn\");\n    daynspan.textContent = parentDate.getDate();\n\n    const modalHeaderClose = document.createElement(\"div\");\n    modalHeaderClose.classList.add(\"more-modal-header-close\");\n    modalHeaderClose.appendChild(createCloseIcon(\"var(--white3)\"));\n    modalHeaderClose.setAttribute(\"data-tooltip\", \"Close\");\n\n    modalHeaderTitle.append(modalHeaderClose, dowspan, daynspan);\n    modalHeader.appendChild(modalHeaderTitle);\n    modal.append(modalHeader, createMoreModalBox(moreModalEntries)); //entries\n    monthWrapper.appendChild(modal);\n\n    // open day view (number click)\n    daynspan.addEventListener(\"click\", () => {\n      renderDayViewViaModal(parentDate);\n    }, { once: true });\n\n    // click away from modal to close\n    resizeoverlay.addEventListener(\"click\", (e) => {\n      closeMoreModal();\n    }, { once: true });\n\n    document.addEventListener(\"keydown\", closeMoreModalOnEscape);\n  }\n\n  function dragOutOfModal(e) {\n    const targetModal = document.querySelector(\".more-modal\");\n    const targetCellIdx = parseInt(targetModal.getAttribute(\"data-mv-modal\"));\n    const targetCell = document.querySelector(`[data-mv-idx=\"${targetCellIdx}\"]`);\n\n    const cloned = e.target.cloneNode(true);\n    cloned.setAttribute(\"class\", \"monthview--box\");\n    cloned.firstChild.setAttribute(\"class\", \"monthview--title\");\n    cloned.style.top = `${boxquery.getTop()}px`;\n    cloned.style.left = \"0px\";\n    cloned.style.width = \"100%\";\n    targetCell.lastChild.appendChild(cloned);\n\n    // update title of more modal to reflect one less entry\n    const moreModal = targetCell.lastChild.firstChild;\n    const newLength = parseInt(moreModal.getAttribute(\"data-mvgrouped-length\")) - 1;\n\n    if (newLength < 1) {\n      targetCell.lastChild.classList.remove(\"monthview--daycontent-grouped\");\n      moreModal.remove();\n      cloned.style.top = \"0px\";\n    } else {\n      moreModal.setAttribute(\"data-mvgrouped-length\", newLength);\n      moreModal.firstChild.firstChild.textContent = `${newLength} more...`;\n    }\n\n    // instantiate drag engine on cloned element and destroy the more modal instance\n    // \n    dragEngineMonth(e, cloned);\n    cloned.focus();\n    targetModal.style.opacity = \"0.8\";\n  }\n\n  function openDayView(e) {\n    const [year, month, day] = getDateFromAttribute(\n      e.target.parentElement, \"data-mv-date\", \"month\"\n    );\n    context.setDate(year, month, day);\n    context.setDateSelected(day);\n    setDayViewViaMonth();\n  }\n\n  function handleMonthviewEditFormClose() {\n    const tempcell = document.querySelector(\".monthview--daycontent__form-temp\");\n    if (!tempcell) return;\n\n    tempcell.removeAttribute(\"style\");\n    tempcell.classList.remove(\"monthview--daycontent__form-temp\");\n  }\n\n  // reset cell to original state if form is closed without any action\n  function handleMonthviewFormClose() {\n    const tempbox = document?.querySelector(\".monthview--box__form-temp\");\n    if (!tempbox) return;\n    const cellContent = tempbox.parentElement;\n    const cell = cellContent.parentElement;\n    cell.removeAttribute(\"style\");\n    cell.classList.remove(\"monthview--daycontent__form-temp\");\n    tempbox.remove();\n    resetCellOnDrop(cellContent.children, false);\n  }\n\n  function openFormOnClickMV(box, cell) {\n    const id = box.getAttribute(\"data-monthview-id\");\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const offsetColor = hextorgba(color, 0.5);\n    cell.classList.add(\"monthview--daycontent__form-temp\");\n    cell.style.backgroundColor = offsetColor;\n\n    const rect = cell.getBoundingClientRect();\n    let [x, y] = placePopup(\n      360,\n      165,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight]\n    );\n    // *** config & open form ***\n    store.setFormResetHandle(\"month\", handleMonthviewEditFormClose);\n\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    // Entry option modal will either trigger or release the above setup\n    // provide callback to finish setup and open form\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n    // *******************\n  }\n\n  function configNewBoxInsertion(cellWrapper, cell, category, color) {\n    const tempBox = createBox(\n      'temp',          // box.id\n      category,        // box.style.backgroundColor \n      0,               // box.style.top\n      \"( New Entry )\"  // box title\n    );\n    cellWrapper.scrollTop = 0;\n    tempBox.classList.add(\"monthview--box__form-temp\");\n    cell.classList.add(\"monthview--daycontent__form-temp\");\n    cell.style.backgroundColor = color;\n    if (cellWrapper.children.length > 0) {\n      cellWrapper.insertBefore(tempBox, cellWrapper.children[0]);\n      resetCellOnDrop(cellWrapper.children, false);\n    } else {\n      cellWrapper.appendChild(tempBox);\n    }\n  }\n\n  function createEntryOnEmptyTarget(e, cellWrapper) {\n    if (e.target.classList.contains(\"monthview--daycontent\")) {\n      // get first active category & create temp box with its color\n      const cell = cellWrapper.parentElement;\n      const rect = cell.getBoundingClientRect();\n      const [start, end] = generateTempStartEnd(\n        getDateFromAttribute(cell, \"data-mv-date\", \"month\")\n      );\n\n      // handle case where no category is active\n      let tempctg;\n      let color;\n      if (store.getActiveCategories() === undefined) {\n        let tempdefaultctg = store.getDefaultCtg();\n        tempctg = tempdefaultctg[0];\n        color = tempdefaultctg[1].color;\n      } else {\n        let tempcurrentctg = store.getFirstActiveCategoryKeyPair();\n        tempctg = tempcurrentctg[0];\n        color = tempcurrentctg[1];\n      }\n      const offsetcolor = hextorgba(color, 0.5);\n\n      configNewBoxInsertion(cellWrapper, cell, tempctg, offsetcolor);\n      store.setFormResetHandle(\"month\", handleMonthviewFormClose);\n      const openForm = store.getRenderFormCallback();\n      const setup = new FormSetup();\n\n      setup.setSubmission(\"create\", null, null, null);\n      setup.setCategory(tempctg, color);\n      setup.setDates(getFormDateObject(start, end));\n\n      openForm();\n      fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n      fullFormConfig.getConfig(setup.getSetup());\n      fullFormConfig.setFormStyle(\n        parseInt(rect.right),\n        parseInt(rect.top),\n        false,\n        null\n      );\n    }\n  }\n\n  function delegateMonthEvents(e) {\n    // delegates via monthview--box (monthWrapper) onmousedown\n    const monthviewBox = getClosest(e, \".monthview--box\");\n    const monthviewBoxHeader = getClosest(e, \".monthview--dayofmonth\");\n    const groupedBox = getClosest(e, \".monthview--daygroup\");\n    const groupedBoxItem = getClosest(e, \".more-modal-entry\");\n    const closeGroupedBox = getClosest(e, \".more-modal-header-close\");\n\n    // target : any box (task/event) within a day\n    // execute : drag and drop\n    if (monthviewBox) {\n      if (window.innerHeight <= 280) return;\n      dragEngineMonth(e, e.target);\n      return;\n    }\n\n    // target : cell day number\n    // execute : open day view of that day \n    if (monthviewBoxHeader) {\n      e.stopPropagation();\n      openDayView(e);\n      return;\n    }\n\n    // target : grouped box (more...)\n    // execute : create popup modal with all grouped entries of that day\n    if (groupedBox) {\n      createMoreModal(e);\n      return;\n    }\n\n    // target : entry within more modal \n    // execute : drag box (e.target) out of the more modal for reassignment, (same day works as well)\n    if (groupedBoxItem) {\n      if (window.innerHeight <= 300) return;\n      dragOutOfModal(e);\n      return;\n    }\n\n    // target : close btn within more modal\n    if (closeGroupedBox) {\n      closeMoreModal();\n      return;\n    }\n  }\n\n  function delegateNewBox(e) {\n    // delegates via monthview--daycontent (cellWrapper) onclick\n    // note that this is the same parent element that delegates mouse down events\n    // second delegation is needed to prevent the scrollbars that exist within the cells (days) from triggering the creation of a new entry on cell click\n    const emptyBoxClick = getClosest(e, \".monthview--daycontent\");\n    if (emptyBoxClick) {\n      if (window.innerHeight <= 300) return;\n      createEntryOnEmptyTarget(e, e.target);\n      return;\n    }\n  }\n\n  // event listener is added & removed @ ./setViews.js\n  // function getMonthviewResize() {\n  //   let lastquery = boxquery.getFlag();\n  //   console.log('ran')\n  //   boxquery.updateFlag();\n  //   // run once per query change\n  //   if (lastquery === boxquery.getFlag()) return;\n  //   const boxes = document.querySelectorAll(\".monthview--box\");\n  //   const querytop = boxquery.getTop();\n  //   const queryHeight = boxquery.getHeight();\n  //   const prevtop = boxquery.getPrevTop(querytop);\n  //   boxes.forEach(box => {\n  //     // always set height \n  //     box.style.height = `${queryHeight}px`;\n  //     let currenttop = parseInt(box.style.top);\n  //     if (currenttop === 0) {\n  //       return;\n  //     } else {\n  //       // get previous query top to find index of curren top then calc\n  //       let idx = currenttop / prevtop;\n  //       box.style.top = `${idx * querytop}px`;\n  //     }\n  //   });\n  // }\n\n  const initMonth = () => {\n    populateCells();\n    monthWrapper.onmousedown = delegateMonthEvents;\n    monthWrapper.onclick = delegateNewBox;\n    store.setResetPreviousViewCallback(resetMonthview);\n    // const handleMVResize = debounce(getMonthviewResize, 40);\n    // store.setResizeHandle(\"month\", handleMVResize);\n  };\n\n  initMonth();\n}","import setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\nimport { Week } from \"../../factory/entries\";\nimport locales from \"../../locales/en\";\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\n\nimport {\n  createCloseIcon,\n  createMeatballVertIcon,\n  createExpandDownIcon\n} from \"../../utilities/svgs\";\n\nimport {\n  formatStartEndDate,\n  getTempDates,\n  getFormDateObject,\n  getDateFromAttribute,\n  getDayOrdinal\n} from \"../../utilities/dateutils\";\n\nimport handleOverlap, {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  getOriginalBoxObject,\n} from \"../../utilities/dragutils\";\n\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\n\n// main app sidebar\nconst sidebar = document.querySelector('.sidebar');\n// calendar overlay\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\n// weekview main grid wrapper & children\nconst main = document.querySelector(\".weekview\");\nconst container = document.querySelector(\".weekview--calendar\");\nconst weekviewHeader = document.querySelector(\".weekview--header\");\nconst weekviewHeaderDayNumber = document.querySelectorAll(\".weekview--header-day__number\");\n\nconst weekviewGrid = document.querySelector(\".weekview__grid\");\nconst weekviewSideGrid = document.querySelector(\".weekview--sidebar\");\n\nconst topCols = document.querySelectorAll(\".allday--col\");\n\nconst cols = document.querySelectorAll(\".week--col\");\n\nexport default function setWeekView(context, store, datepickerContext) {\n  const weekArray = context.getWeekArray();\n  let entries = store.getWeekEntries(weekArray);\n  let boxes = new Week(entries.day, entries.allDay);\n  let firstY = null;\n\n  function setDayView(e) {\n    let [yr, mo, da] = getDateFromAttribute(e.target, \"data-weekview-date\");\n    context.setDate(yr, mo, da);\n    context.setDateSelected(da);\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n  }\n\n  function createWVSideGridCells() {\n    for (let i = 0; i < 24; i++) {\n      let hour;\n      let md;\n\n      if (i === 0) {\n        hour = \"\";\n        md = \"\";\n      } else {\n        hour = i;\n        md = \"AM\";\n      }\n\n      if (hour > 12) {hour -= 12;}\n      if (i >= 12) {md = \"PM\";}\n\n      const wvSideGridCell = document.createElement(\"span\");\n      wvSideGridCell.classList.add(\"sidegrid-cell\");\n      wvSideGridCell.textContent = `${hour} ${md}`;\n      weekviewSideGrid.appendChild(wvSideGridCell);\n    }\n  }\n\n  function configureDaysOfWeek() {\n    document.querySelector(\".wv-gmt\").textContent = `UTC ${context.getGmt()}`;\n    let hasToday;\n    let hasSelected;\n    let dayNumbers = [];\n    let ymd = [];\n    const today = context.getToday();\n    let [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()];\n\n    weekArray.forEach((day, idx) => {\n      let [y, m, d] = [\n        day.getFullYear(),\n        day.getMonth(),\n        day.getDate(),\n      ];\n\n      dayNumbers.push(d);\n      ymd.push(`${y}-${m}-${d}`);\n\n      if (d === context.getDateSelected() && m === context.getMonth()) {\n        hasSelected = d;\n      }\n\n      if (d === td && m === tm && y === ty) {\n        hasToday = d;\n      }\n    });\n\n    dayNumbers.forEach((num, idx) => {\n      if (num === hasSelected) {\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--selected\");\n      } else {\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--selected\");\n      }\n\n      if (num === hasToday) {\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--today\");\n      } else {\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--today\");\n      }\n\n      weekviewHeaderDayNumber[idx].textContent = num;\n      weekviewHeaderDayNumber[idx].setAttribute(\"data-weekview-date\", ymd[idx]);\n      topCols[idx].setAttribute(\"data-wvtop-day\", num);\n    });\n  }\n\n  function renderSidebarDatepickerWeek() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function resetWeekviewBoxes() {\n    cols.forEach(col => { col.innerText = \"\"; });\n    topCols.forEach(col => { col.innerText = \"\"; });\n    main.onmousedown = null;\n    weekviewHeader.onclick = null;\n    weekviewSideGrid.innerText = \"\";\n  }\n\n  function renderBoxes() {\n    cols.forEach(col => { col.innerText = \"\"; });\n    topCols.forEach(col => { col.innerText = \"\"; });\n\n    boxes.getBoxes().forEach((entry) => {\n      const y = entry.coordinates.y;\n      firstY == null || y < firstY ? (firstY = y) : null;\n      const col = cols[+entry.coordinates.x];\n      createBox(col, entry, \"week\", store.getCtgColor(entry.category));\n    });\n\n    const boxt = boxes.getBoxesTopLengths();\n    for (const k in boxt) {\n      const col = topCols[+k];\n      createBoxesTop(col, boxt[k]);\n    }\n  }\n\n  function createBoxesTop(col, len) {\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"allday__cell\");\n    cell.classList.add(\"allday__cell--active\");\n\n    const taskicons = document.createElement(\"div\");\n    taskicons.classList.add(\"wv-ad--taskicons\");\n\n    const icon = document.createElement(\"div\");\n    icon.classList.add(\"wv-ad--taskicon\");\n    icon.style.backgroundColor = \"#6F0C2B\";\n    taskicons.appendChild(icon);\n\n    const celltitle = document.createElement(\"div\");\n    celltitle.classList.add(\"wv-ad--celltitle\");\n    celltitle.textContent = `${len} more`;\n    const cellexpand = document.createElement(\"div\");\n    cellexpand.classList.add(\"wv-ad--cellexpand\");\n    cellexpand.appendChild(createExpandDownIcon(\"var(--white3)\"));\n\n    cell.append(taskicons, celltitle, cellexpand);\n    col.appendChild(cell);\n  }\n\n  function createAllDayModalCell(entry, idx, col, handleCloseCallback) {\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"allday-modal__cell\");\n    cell.setAttribute(\"data-allday-modal-cell\", idx);\n    cell.setAttribute(\"data-allday-modal-cell-id\", entry.id);\n    cell.style.backgroundColor = store.getCtgColor(entry.category);\n\n    const cellcontent = document.createElement(\"div\");\n    cellcontent.classList.add(\"allday-modal__cell-content\");\n\n    const cellIcons = document.createElement(\"div\");\n    cellIcons.classList.add(\"allday-modal__cell-action-icons\");\n\n    const celltitle = document.createElement(\"div\");\n    celltitle.classList.add(\"allday-modal__celltitle\");\n    celltitle.textContent = entry.title;\n\n    const cellendDate = document.createElement(\"div\");\n    cellendDate.classList.add(\"allday-modal__cellend-date\");\n    cellendDate.textContent = formatStartEndDate(\n      new Date(entry.start), new Date(entry.end)\n    );\n\n    const cellcategoryTitle = document.createElement(\"div\");\n    cellcategoryTitle.classList.add(\"allday-modal__cellcategory-title\");\n    cellcategoryTitle.textContent = \"category: \" + entry.category;\n\n    cellcontent.append(celltitle, cellcategoryTitle, cellendDate);\n    cellIcons.appendChild(createMeatballVertIcon(\"var(--taskcolor\"));\n    cell.append(cellcontent, cellIcons);\n    return cell;\n  }\n\n  function createAllDayModal(e, col, entries, idx, cell) {\n    let dayofweek = locales.labels.weekdaysLong[idx];\n    let daynumber = col.getAttribute(\"data-wvtop-day\");\n\n    const modal = document.createElement(\"div\");\n    modal.classList.add(\"allday-modal\");\n\n    const rect = col.getBoundingClientRect();\n    let entriesoffset;\n    if (entries.length < 4) {\n      entriesoffset = parseInt(55 * entries.length) + 60;\n    } else {\n      entriesoffset = parseInt(55 * 4) + 60;\n    }\n\n    let [x, y] = placePopup(\n      240,\n      entriesoffset,\n      [parseInt(rect.left), parseInt(rect.top) + 24],\n      [window.innerWidth, window.innerHeight],\n      true,\n      Math.floor((window.innerWidth - 36 - weekviewGrid.offsetLeft) / 7)\n    );\n\n    if (x + 250 > window.innerWidth) {\n      modal.style.left = window.innerWidth - 246 + \"px\";\n    } else {\n      modal.style.left = x + \"px\";\n    }\n\n    modal.style.top = y + \"px\";\n\n    const modalheader = document.createElement(\"div\");\n    modalheader.classList.add(\"allday-modal__header\");\n\n    const modaltitle = document.createElement(\"div\");\n    modaltitle.classList.add(\"allday-modal-title\");\n    modaltitle.textContent = `${dayofweek}, ${locales.labels.monthsLong[weekArray[idx].getMonth()]} ${daynumber}${getDayOrdinal(daynumber)}`;\n\n    const closeAlldayModalBtn = document.createElement(\"div\");\n    closeAlldayModalBtn.classList.add(\"close-allday-modal\");\n    closeAlldayModalBtn.appendChild(createCloseIcon(\"var(--white4\"));\n\n    const modalcontent = document.createElement(\"div\");\n    modalcontent.classList.add(\"allday-modal__content\");\n\n\n    function closealldayonEsc(e) {\n      if (e.key === \"Escape\") {\n        closealldaymodal();\n      }\n    }\n\n    // remove all listeners / functionality when context menu is opened\n    // do so separately from the closealldaymodal function so that the modal itself will still be visible when form/context menu is open\n    function resetalldaymodal() {\n    }\n    \n    function closealldaymodal() {\n      modal.remove();\n      modal.onmousedown = null;\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      resizeoverlay.onclick = null;\n      document.removeEventListener(\"keydown\", closealldayonEsc);\n      store.removeActiveOverlay(\"allday-modal\");\n      cell.firstChild.firstChild.style.backgroundColor = \"#6F0C2B\";\n      cell.classList.remove(\"allday-modal__cell--open\");\n    }\n\n    entries.forEach((entry, idx) => {\n      const cell = createAllDayModalCell(\n        entry, idx, col, closealldaymodal\n      );\n      modalcontent.appendChild(cell);\n    });\n\n    function delegateAllDayModal(e) {\n      const getCloseAdBtn = getClosest(e, \".close-allday-modal\");\n      const getMeatballBtn = getClosest(e, \".allday-modal__cell-action-icons\");\n\n      if (getCloseAdBtn) {\n        closealldaymodal();\n        return;\n      }\n\n      if (getMeatballBtn) {\n        getWeekViewContextMenu(\n          store.getEntry(e.target.parentElement.getAttribute(\"data-allday-modal-cell-id\")),\n          closealldaymodal,\n          e\n        );\n        return;\n      }\n    }\n\n    modalheader.append(modaltitle, closeAlldayModalBtn);\n    modal.append(modalheader, modalcontent);\n    main.insertBefore(modal, document.querySelector(\".weekview__top\"));\n    store.addActiveOverlay(\"allday-modal\");\n    resizeoverlay.onclick = closealldaymodal;\n    modal.onmousedown = delegateAllDayModal;\n    document.addEventListener(\"keydown\", closealldayonEsc);\n  }\n\n  function openAllDayModal(e, cell) {\n    const col = cell.parentElement;\n    cell.classList.add(\"allday-modal__cell--open\");\n    cell.firstChild.firstChild.style.backgroundColor = \"#01635b\";\n    const colidx = parseInt(col.getAttribute(\"data-allday-column\"));\n    let colentries = boxes.getBoxesByColumnTop(colidx);\n    if (colentries.length > 0) {\n      createAllDayModal(e, col, colentries, colidx, cell);\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n    }\n  }\n\n  function getcol(idx) {\n    return document.querySelector(`[data-column-index=\"${idx}\"]`);\n  }\n\n  function handleWeekviewFormClose() {\n    document.querySelector(\".temp-week-box\")?.remove();\n  }\n\n  function openWeekviewForm(box, coords, category, dates, type) {\n    store.setFormResetHandle(\"week\", handleWeekviewFormClose);\n\n    const openForm = store.getRenderFormCallback();\n    const setup = new FormSetup();\n\n    const [submitType, id, title, description] = type;\n    setup.setSubmission(submitType, id, title, description);\n    if (submitType === \"create\") { box.style.opacity = 0.9; }\n\n    const [categoryName, color] = category;\n    setup.setCategory(\n      categoryName,\n      color,\n    );\n\n    const [start, end] = dates;\n    setup.setDates(getFormDateObject(start, end));\n    openForm();\n\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n    fullFormConfig.getConfig(setup.getSetup());\n  }\n\n  // ***********************\n  // CONTEXT MENU SETUP\n  function getWeekViewContextMenu(entry, handleCloseCallback, e) {\n    const id = entry.id;\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const targetrect = e.target.getBoundingClientRect();\n    let [x, y] = placePopup(\n      400,\n      165,\n      [parseInt(targetrect.right), (e.clientY) + 28],\n      [window.innerWidth, window.innerHeight],\n    );\n\n    store.setFormResetHandle(\"week\", handleCloseCallback);\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n  }\n  // ***********************\n\n  /** DRAG NORTH, SOUTH, EAST, WEST */\n  function dragEngineWeek(e, box) {\n    setStylingForEvent(\"dragstart\", main, store);\n    const col = box.parentElement;\n    const originalColumn = col.getAttribute(\"data-column-index\");\n    let currentColumn = col.getAttribute(\"data-column-index\");\n    let boxhasOnTop = false;\n    box.setAttribute(\"data-box-col\", currentColumn);\n\n    const startTop = +box.style.top.split(\"px\")[0];\n    const boxHeight = +box.style.height.split(\"px\")[0];\n    let startCursorY = e.pageY - weekviewGrid.offsetTop;\n    let tempstartY = e.pageY;\n    let startCursorX = e.pageX;\n    let [movedX, movedY] = [0, 0];\n    let [sX, sY] = [0, 0];\n    let hasStyles = false;\n\n    /** DRAG NORTH SOUTH */\n    const mousemove = (e) => {\n      sX = Math.abs(e.clientX - startCursorX);\n      sY = Math.abs(e.clientY - tempstartY);\n      if (!hasStyles) {\n        if (sX > 3 || sY > 3) {\n          hasStyles = true;\n          document.body.style.cursor = \"move\";\n          if (box.classList.contains(\"box-ontop\")) {\n            boxhasOnTop = true;\n            resetStyleOnClick(\"week\", box);\n          }\n          box.classList.add(\"box-dragging\");\n          createTemporaryBox(box, col, boxhasOnTop, \"week\");\n          sX = 0;\n          sY = 0;\n        }\n      }\n\n      const headerOffset = weekviewGrid.offsetTop;\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\n\n      if (newTop < 0 || currentCursorY < 0) {\n        newTop = 0;\n        return;\n      } else if (newTop + boxHeight > 1188) {\n        return;\n      }\n\n      box.style.top = `${newTop}px`;\n      /** DRAG EAST/WEST */\n      const direction = e.pageX - startCursorX > 0 ? \"right\" : \"left\";\n      const currentCursorX = e.pageX;\n      let newOffsetX = startCursorX - currentCursorX;\n      let leftColX;\n      let rightColX;\n\n      if (+currentColumn - 1 >= 0) {\n        leftColX = parseInt(getcol(currentColumn - 1).getBoundingClientRect().right);\n      } else {\n        leftColX = null;\n      }\n\n      if (+currentColumn + 1 < cols.length) {\n        rightColX = parseInt(getcol(+currentColumn + 1).getBoundingClientRect().left);\n      } else {\n        rightColX = null;\n      }\n\n      if (direction === \"right\" && rightColX !== null) {\n        if (e.pageX >= rightColX) {\n          getcol(+currentColumn + 1).appendChild(box);\n          startCursorX = e.pageX;\n          currentColumn = +currentColumn + 1;\n          box.setAttribute(\"data-box-col\", +currentColumn);\n        }\n      }\n\n      if (direction === \"left\" && leftColX !== null) {\n        if (e.pageX <= leftColX) {\n          getcol(+currentColumn - 1).appendChild(box);\n          startCursorX = e.pageX;\n          currentColumn = +currentColumn - 1;\n          box.setAttribute(\"data-box-col\", +currentColumn);\n        }\n      }\n\n      movedY = newOffsetY;\n      movedX = newOffsetX;\n    };\n\n    function mouseup() {\n      const tempbox = document.querySelector(\".temporary-box\");\n      box.classList.remove(\"box-dragging\");\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\n\n      if (tempbox === null) {\n        // const reset\n        const setResetWv = () => {\n          setStylingForEvent(\"dragend\", main, store);\n          box.classList.remove(\"wv-box-clicked\");\n        };\n        box.classList.add(\"wv-box-clicked\");\n        const id = box.getAttribute(\"data-box-id\");\n        const entry = store.getEntry(id);\n        const start = entry.start;\n        const color = box.style.backgroundColor;\n        const rect = box.getBoundingClientRect();\n        let [x, y] = placePopup(\n          400,\n          165,\n          [parseInt(rect.left), parseInt(rect.top) + 56],\n          [window.innerWidth, window.innerHeight],\n          false,\n        );\n        store.setFormResetHandle(\"week\", setResetWv);\n\n        const setup = new FormSetup();\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\n        setup.setCategory(entry.category, color);\n        setup.setDates(getFormDateObject(start, entry.end));\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n        getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n        const modal = document.querySelector(\".entry__options\");\n        if (window.innerWidth > 580) {\n          modal.style.top = +y + \"px\";\n          modal.style.left = x + \"px\";\n        } else {\n          modal.style.top = \"64px\";\n        }\n\n      } else {\n        tempbox.remove();\n        setBoxTimeAttributes(box, \"week\");\n        const time = calcTime(\n          +box.getAttribute(\"data-start-time\"),\n          +box.getAttribute(\"data-time-intervals\")\n        );\n\n        box.setAttribute(\"data-time\", time);\n        box.children[1].children[0].textContent = time;\n\n        updateBoxCoordinates(box, \"week\", boxes);\n        boxes.updateStore(\n          store,\n          box.getAttribute(\"data-box-id\"),\n          weekArray\n        );\n        // if box is moved to a new column, update sidebar datepicker\n        if (currentColumn !== +originalColumn) {\n          renderSidebarDatepickerWeek();\n        };\n        // check if new position overlaps with other boxes and handle\n        let droppedCol = +box.getAttribute(\"data-box-col\");\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\n          handleOverlap(droppedCol, \"week\", boxes);\n        } else {\n          box.setAttribute(\"box-idx\", \"box-one\");\n        }\n        setStylingForEvent(\"dragend\", main, store);\n      }\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** RESIZE NORTH/SOUTH \n   * resizing will never trigger form\n  */\n  function resizeBoxNS(e, box) {\n    setStylingForEvent(\"dragstart\", main, store);\n    document.body.style.cursor = \"move\";\n\n    const col = box.parentElement;\n    const currentColumn = col.getAttribute(\"data-column-index\");\n    box.setAttribute(\"data-box-col\", currentColumn);\n\n    let boxhasOnTop = false;\n    let boxorig = getOriginalBoxObject(box);\n    if (box.classList.contains(\"box-ontop\")) {\n      boxhasOnTop = true;\n      resetStyleOnClick(\"week\", box);\n    }\n\n    box.classList.add(\"box-resizing\");\n    const boxTop = box.offsetTop;\n    createTemporaryBox(box, col, boxhasOnTop, \"week\");\n\n    const mousemove = (e) => {\n      const headerOffset = weekviewGrid.offsetTop;\n      let amountScrolled = Math.abs(parseInt(container.getBoundingClientRect().top));\n      if (amountScrolled == headerOffset) {\n        amountScrolled -= headerOffset;\n      } else if (container.getBoundingClientRect().top > 0) {\n        amountScrolled = headerOffset - amountScrolled;\n      } else {\n        amountScrolled += headerOffset;\n      }\n\n      const newHeight = Math.round(((e.pageY - boxTop - headerOffset) + amountScrolled) / 12.5) * 12.5;\n\n      if (newHeight <= 12.5) {\n        box.style.height = '12.5px';\n        return;\n      } else if (newHeight + parseInt(box.style.top) > 1188) {\n        return;\n      } else {\n        box.style.height = `${newHeight}px`;\n      }\n    };\n\n    const mouseup = (e) => {\n      document.querySelector(\".temporary-box\").remove();\n      box.classList.remove(\"box-resizing\");\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\n\n      if (box.style.height === boxorig.height) {\n        if (boxhasOnTop) {\n          box.setAttribute(\"class\", boxorig.class);\n          box.style.left = boxorig.left;\n          box.style.width = boxorig.width;\n        }\n      } else {\n        setBoxTimeAttributes(box, \"week\");\n        const start = +box.getAttribute(\"data-start-time\");\n        const length = +box.getAttribute(\"data-time-intervals\");\n        const time = calcTime(start, length);\n        box.children[1].children[0].textContent = time;\n        updateBoxCoordinates(box, \"week\", boxes);\n\n        let droppedCol = +box.getAttribute(\"data-box-col\");\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\n          handleOverlap(droppedCol, \"week\", boxes);\n        }\n\n        boxes.updateStore(\n          store,\n          box.getAttribute(\"data-box-id\"),\n          weekArray,\n        );\n      }\n\n      setStylingForEvent(\"dragend\", main, store);\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** Drag down empty column to create box */\n  function createBoxOnDrag(e) {\n    setStylingForEvent(\"dragstart\", main, store);\n    document.body.style.cursor = \"move\";\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\n    const colIdx = parseInt(e.target.getAttribute(\"data-column-index\"));\n\n    const box = document.createElement('div');\n    box.setAttribute(\"class\", \"box box-dragging temp-week-box\");\n\n    // boxheader is static - create from template\n    const boxheader = createTempBoxHeader(\"week\");\n    const boxcontent = document.createElement('div');\n    const boxtime = document.createElement('span');\n    const boxtimeend = document.createElement('span');\n    boxcontent.classList.add('box__content');\n    boxtime.classList.add('box-time');\n    boxtimeend.classList.add('box-time');\n\n\n    const headerOffset = +weekviewGrid.offsetTop;\n    const scrolled = parseInt(weekviewGrid.scrollTop);\n    const startCursorY = e.pageY - weekviewGrid.offsetTop;\n\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\n\n    let coords = { y: +y / 12.5, x: colIdx, h: 1, e: 2 };\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\n\n    function mousemove(e) {\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newHeight = Math.round((newOffsetY) / 12.5) * 12.5;\n\n      if (newHeight <= 12.5) { newHeight = 12.5; }\n      if (newHeight + y > 1188) { newHeight = 1187.5 - y; }\n      box.style.height = `${newHeight}px`;\n\n      coords.h = +newHeight / 12.5;\n      coords.e = +coords.y + coords.h;\n\n      endhour = Math.floor(((+newHeight + +y) / 12.5) / 4);\n      endmin = Math.floor(((+newHeight + +y) / 12.5) % 4) * 15;\n      boxtime.style.wordBreak = \"break-word\";\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n    }\n\n    boxcontent.append(boxtime, boxtimeend);\n    box.append(boxheader, boxcontent);\n    e.target.appendChild(box);\n\n    function mouseup() {\n      const datesData = getTempDates(\n        new Date(weekArray[colIdx]),\n        [starthour, endhour],\n        [startmin, endmin],\n      );\n\n      openWeekviewForm(\n        box,\n        coords,\n        [tempcategory, color],\n        datesData,\n        [\"create\", null, null, null],\n      );\n\n      setStylingForEvent(\"dragend\", main, store);\n      document.removeEventListener(\"mouseup\", mouseup);\n      document.removeEventListener(\"mousemove\", mousemove);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** delegate via grid */\n  function delegateGridEvents(e) {\n\n    const getBoxResizeHandle = getClosest(e, \".box-resize-s\");\n    const getBox = getClosest(e, \".box\");\n    const getWeekCol = getClosest(e, \".week--col\");\n    const getAllDayCol = getClosest(e, \".allday--col\");\n\n\n    if (getBoxResizeHandle) {\n      resizeBoxNS(e, e.target.parentElement);\n      return;\n    }\n\n    if (getBox) {\n      dragEngineWeek(e, e.target);\n      return;\n    }\n\n    if (getWeekCol) {\n      createBoxOnDrag(e, e.target);\n      return;\n    }\n\n    if (getAllDayCol) {\n      if (e.target.childElementCount > 0) {\n        openAllDayModal(e, e.target);\n        return;\n      }\n    }\n  }\n\n  function renderDataForGrid() {\n    renderBoxes();\n    const colsToCheck = boxes.getColumnsWithMultipleBoxes();\n    colsToCheck.forEach(col => handleOverlap(col, \"week\", boxes));\n  }\n\n  /*\n  \n  */\n  function delegateWvHeader(e) {\n    const getHeaderDayNumber = getClosest(e, \".weekview--header-day__number\");\n    if (getHeaderDayNumber) {\n      setDayView(e);\n      return;\n    }\n\n  }\n\n  const initWeek = () => {\n    weekviewSideGrid.innerText = \"\";\n    createWVSideGridCells();\n    configureDaysOfWeek();\n    renderDataForGrid();\n    main.onmousedown = delegateGridEvents;\n    // need to use onclick to delegate header events in order to allow for tab + enter\n    weekviewHeader.onclick = delegateWvHeader;\n    store.setResetPreviousViewCallback(resetWeekviewBoxes);\n    if (firstY !== null) {\n      setTimeout(() => {\n        weekviewGrid.scrollTo({ top: Math.abs((+firstY * 12.5) - 25), behavior: \"instant\" });\n      }, 4);\n    }\n  };\n\n  initWeek();\n}","import setViews from \"../../config/setViews\";\nimport locales from \"../../locales/en\";\nimport { getClosest } from \"../../utilities/helpers\";\nimport { getDateFromAttribute } from \"../../utilities/dateutils\";\nimport setSidebarDatepicker from \"../../components/menus/sidebarDatepicker\";\nconst yearviewGrid = document.querySelector(\".calendar__yearview\");\nconst sidebar = document.querySelector(\".sidebar\");\n\nexport default function setYearView(context, store, datepickerContext) {\n\n  function renderSidebarDatepicker() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(\n        context.getYear(), context.getMonth(), context.getDay()\n      );\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function renderMonthCells() {\n    yearviewGrid.innerText = \"\";\n    let year = context.getYear();\n    let entries = store.getGroupedYearEntries(store.getYearEntries(year));\n    for (let i = 0; i < 12; i++) {\n      if (entries[i]) {\n        yearviewGrid.appendChild(createMonthCell(year, i, entries[i]));\n      } else {\n        yearviewGrid.appendChild(createMonthCell(year, i, []));\n      }\n    }\n\n    entries = null;\n    year = null;\n  }\n\n  function createMonthCell(year, month, entries) {\n    const today = context.getToday();\n    const [ty, tm, td] = [\n      +today.getFullYear(),\n      +today.getMonth(),\n      +today.getDate()\n    ];\n\n    const prevmonth = new Date(year, month, 0);\n    const daysInPrevMonth = prevmonth.getDate();\n    const nextmonth = new Date(year, month + 2, 0);\n    const currentMonth = new Date(year, month, 1);\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const firstDayOfMonth = currentMonth.getDay();\n\n    const cellWrapper = document.createElement(\"div\");\n    cellWrapper.classList.add(\"yv-monthcell\");\n\n    const cellHeader = document.createElement(\"div\");\n    cellHeader.classList.add(\"yv-monthcell__header\");\n\n    const cellHeaderRowOne = document.createElement(\"div\");\n    cellHeaderRowOne.classList.add(\"yv-monthcell__header--rowone\");\n    cellHeaderRowOne.textContent = locales.labels.monthsLong[month];\n\n    if (month === context.getMonth() && year === context.getYear()) {\n      cellHeaderRowOne.classList.add(\"yvmht-current\");\n      cellWrapper.classList.add(\"cell-current\");\n    }\n\n    // **************************\n    // cell header row two\n    const cellHeaderWeekDayNames = document.createElement(\"div\");\n    cellHeaderWeekDayNames.classList.add(\"yv-monthcell__header--weekdays\");\n\n    locales.labels.weekdaysNarrow.forEach((el) => {\n      const weekday = document.createElement(\"div\");\n      weekday.classList.add(\"yv-monthcell__header--weekday\");\n      weekday.textContent = el;\n      cellHeaderWeekDayNames.appendChild(weekday);\n    });\n\n\n    const cellBody = document.createElement(\"div\");\n    cellBody.classList.add(\"yv-monthcell__body\");\n\n    function populateMonths() {\n      let count = 0;\n      let prevmonthstart = daysInPrevMonth - firstDayOfMonth;\n\n      const createyvcell = (day, classname, year, month, current) => {\n        const daywrapper = document.createElement(\"div\");\n        daywrapper.classList.add(\"yv-monthcell__body--day-wrapper\");\n      \n        if (classname !== null) {\n          daywrapper.classList.add(classname);\n        }\n        \n        if (current) {\n          daywrapper.setAttribute(\"data-yv-date\", `${year}-${month}-${day}`);\n          daywrapper.textContent = day;\n          // check if day is selected\n          if (day === context.getDateSelected() && month === context.getMonth() && year === context.getYear()) {\n            daywrapper.classList.add(\"yvmb-selected\");\n          }\n      \n          // check if day is today\n          if (day === td && month === tm && year === ty) {\n            daywrapper.classList.add(\"yvmb-today\");\n          }\n      \n          // check if day has entry\n          if (entries[day]) {\n            daywrapper.classList.add(\"yvmb-has-entry\");\n          }\n        }\n      \n        return daywrapper;\n      };\n\n      // if first day of month is not sunday, add previous month days until the start of the current month\n      for (let i = prevmonthstart; i < daysInPrevMonth; i++) {\n        cellBody.appendChild(createyvcell(\n          i + 1,\n          \"yvmb-prevnext\",\n          prevmonth.getFullYear(),\n          prevmonth.getMonth(),\n          false,\n        ));\n        count++;\n      }\n\n      for (let i = 0; i < daysInMonth; i++) {\n        cellBody.appendChild(createyvcell(\n          i + 1,\n          null,\n          currentMonth.getFullYear(),\n          currentMonth.getMonth(),\n          true,\n        ));\n        count++;\n      }\n\n      // ensure that each month cell has 42 days, use next month days if necessary\n      // let i = 0;\n      // while (count < 42) {\n      //   i++;\n      //   cellBody.appendChild(createyvcell(\n      //     i,\n      //     \"yvmb-prevnext\",\n      //     nextmonth.getFullYear(),\n      //     nextmonth.getMonth(),\n      //     false,\n      //   ));\n      //   count++;\n      // }\n    }\n\n    cellHeader.append(cellHeaderRowOne, cellHeaderWeekDayNames);\n    populateMonths();\n    cellWrapper.append(cellHeader, cellBody);\n    return cellWrapper;\n  }\n\n  function handleDaySelection(e) {\n    const target = e.target;\n    const [tempy, tempm, tempd] = getDateFromAttribute(target, \"data-yv-date\", null);\n    context.setDate(tempy, tempm, tempd);\n    context.setDateSelected(tempd);\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n    renderSidebarDatepicker();\n  }\n\n  function delegateYearEvents(e) {\n    if (getClosest(e, \".yv-monthcell__body--day-wrapper\")) {\n      handleDaySelection(e);\n      return;\n    }\n  }\n\n  function resetYearview() {\n    yearviewGrid.innerText = \"\";\n    yearviewGrid.onmousedown = null;\n  }\n\n  function initYearview() {\n    renderMonthCells();\n    yearviewGrid.onmousedown = delegateYearEvents;\n    store.setResetPreviousViewCallback(resetYearview);\n    const currentmonth = document?.querySelector(\".cell-current\");\n    if (currentmonth) {\n      setTimeout(() => {\n        yearviewGrid.scrollTo({\n          top: parseInt(currentmonth.offsetTop) - 100,\n          behavior: \"instant\",\n        });\n      }, 4);\n    }\n  };\n  initYearview();\n}","import { setTheme } from \"../utilities/helpers\";\nconst appBody = document.querySelector(\".body\");\n\nexport default function setAppDefaults(context, store) {\n  let animationStatus = store.getAnimationStatus();\n\n  const disableTransitionsOnLoad = () => {\n    setTimeout(() => {\n      appBody.classList.remove(\"preload\");\n    }, 4);\n  };\n\n  const setDefaultAnimationStatus = () => {\n    animationStatus ? appBody.classList.remove(\"disable-transitions\") : appBody.classList.add(\"disable-transitions\");\n  };\n\n  disableTransitionsOnLoad();\n  setTheme(context);\n  setDefaultAnimationStatus();\n}","import setViews from \"./setViews\";\nimport setDatepicker from \"../components/menus/datepicker\";\nimport setSidebarDatepicker from \"../components/menus/sidebarDatepicker\";\nimport handleSidebarCategories from \"../components/menus/sidebarCategories\";\nimport { getClosest, throttle } from \"../utilities/helpers\";\nimport setEntryForm from \"../components/forms/entryForm\";\nimport handleSidebarFooter from \"../components/menus/sidebarFooter\";\nimport handleShortCutsModal from \"../components/menus/shortcutsModal\";\nimport getSidebarSubMenu from \"../components/menus/sidebarSubMenu\";\nimport createGoTo from \"../components/forms/goto\";\nimport createCategoryForm from \"../components/menus/editCategory\";\nimport {refreshTrainingPeaks, dailySyncTP} from \"../components/trainingpeaks/handlers\";\n\nconst appBody = document.querySelector(\".body\");\nconst colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\n\nconst header = document.querySelector(\".h__container\");\nconst headerLogo = document.querySelector(\".logo\");\n\nconst toggleForm = document.querySelector(\".toggle-form\");\nconst sbToggleForm = document.querySelector(\".sb-toggle-form-btn\");\nconst sbToggleSubBtn = document.querySelector(\".sb-data-btn\");\nconst formOverlay = document.querySelector(\".form-overlay\");\nconst form = document.querySelector(\".entries__form\");\n\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\nconst dateTimeWrapper = document.querySelector(\".datetime-wrapper\");\nconst dateTimeBtn = document.querySelector(\".datetime-content\");\n\nconst sbDatepicker = document.querySelector(\".datepicker-sidebar\");\nconst sbDatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\nconst sbCategoriesWrapper = document.querySelector(\".sb__categories--body-form\");\n\nconst selectElement = document.querySelector(\".select__modal\");\nconst selectOverlay = document.querySelector(\".change-view--overlay\");\nconst optionswrapper = document.querySelector(\".change-view--wrapper\");\nconst options = document.querySelectorAll(\".view-option\");\n\nconst sidebar = document.querySelector(\".sidebar\");\nconst sbFooter = document.querySelector(\".sb__info\");\nconst sbCategories = document.querySelector(\".sb__categories\");\n\nconst viewsContainer = document.querySelector(\".container__calendars\");\nconst yearwrapper = document.querySelector(\".yearview\");\nconst monthwrapper = document.querySelector(\".monthview\");\nconst listviewBody = document.querySelector(\".listview__body\");\n\nconst collapsebtn = document.querySelector(\".collapse-view\");\n\nexport default function renderViews(context, datepickerContext, store) {\n\n  function setColorScheme() {\n    const setlight = () => {\n      context.setColorScheme(\"light\");\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\n      appBody.classList.add(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setdark = () => {\n      context.setColorScheme(\"dark\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setcontrast = () => {\n      context.setColorScheme(\"contrast\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.add(\"contrast-mode\");\n    };\n\n    const currentScheme = context.getColorScheme();\n    if (currentScheme === \"light\") {\n      setdark();\n    } else if (currentScheme === \"dark\") {\n      setcontrast();\n    } else {\n      setlight();\n    }\n  }\n\n  function fullRender(component) {\n    setViews(component, context, store, datepickerContext);\n  }\n\n  function setInitialAttributes() {\n    selectElement.setAttribute(\"data-value\", `${context.getComponent().slice(0, 1).toUpperCase()}`);\n\n    headerLogo.setAttribute(\"data-current-day-of-month\", new Date().getDate());\n  }\n\n  function renderSidebarDatepicker() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function renderSidebarCategories() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      handleSidebarCategories(context, store, datepickerContext);\n      handleSidebarFooter(store);\n    }\n  }\n\n  function getPreviousDay() {\n    context.setPrevDay();\n    fullRender(\"day\");\n    context.setDateSelected(context.getDay());\n    renderSidebarDatepicker();\n  }\n\n  function getNextDay() {\n    context.setNextDay();\n    fullRender(\"day\");\n    context.setDateSelected(context.getDay());\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousWeek() {\n    context.setPrevWeek();\n    fullRender(\"week\");\n    renderSidebarDatepicker();\n  }\n\n  function getNextWeek() {\n    context.setNextWeek();\n    fullRender(\"week\");\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousMonth() {\n    context.setPrevMonth();\n    fullRender(\"month\");\n    renderSidebarDatepicker();\n  }\n\n  function getNextMonth() {\n    context.setNextMonth();\n    fullRender(\"month\");\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousYear() {\n    context.setPrevYear();\n    fullRender(\"year\");\n    renderSidebarDatepicker();\n    return;\n  }\n\n  function getNextYear() {\n    context.setNextYear();\n    fullRender(\"year\");\n    renderSidebarDatepicker();\n    return;\n  }\n\n  /**\n   * handleTransition\n   * @desc  The main purpose of this function is to handle situations where a user is holding down a hotkey to navigate through previous and next periods. Rather than having the swipe fire every single time, it will wait until after the user has stopped holding down the hotkey.\n   * Same goes for swipe gestures/prev & next button clicks.\n   * \n   * @param {HTMLElement} view (current calendar view to be transitioned)\n   * @param {String} keyframeDirection (direction of the keyframe animation) prev/next period\n   * @param {Function} callback (load next and previous periods)\n   */\n  let tm = 250; // define timeout out of scope so that it can be \n  function handleTransition(view, keyframeDirection, callback) {\n    if (!store.getAnimationStatus()) {\n      callback();\n      return;\n    } else {\n      const removeslide = (dir) => {\n        dir === \"left\" ? view.classList.remove(\"transition--right\") : view.classList.remove(\"transition--left\");\n      };\n\n      if (!view.classList.contains(\"weekview--header\")) {\n        viewsContainer.style.overflowX = \"hidden\";\n        setTimeout(() => {\n          viewsContainer.style.overflowX = \"auto\";\n        }, 200);\n      }\n\n      removeslide(keyframeDirection);\n      const slide = `transition--${keyframeDirection}`;\n      if (view.classList.contains(slide)) {\n        // prevent transition from firing too often\n        callback();\n        tm += 250;\n      } else {\n        view.classList.add(slide);\n        setTimeout(() => {\n          view.classList.remove(slide);\n        }, tm);\n        callback();\n        tm = 250;\n      }\n    }\n  }\n\n  // define a means for opening the form then provide it to the store so that it can be accessed by other components\n  function handleForm() {\n    setEntryForm(context, store, datepickerContext);\n    form.setAttribute(\"style\", \"top:5%;left:5%;right:5%;bottom:5%;margin:auto;\");\n    form.classList.remove(\"hide-form\");\n    formOverlay.classList.remove(\"hide-form-overlay\");\n    store.addActiveOverlay(\"hide-form-overlay\");\n  }\n\n  // the submenu (meatball menu) adjacent to \"create\" button in sidebar\n  // opens instance of settings menu\n  function handleToggleSubmenu() {\n    getSidebarSubMenu(store, context);\n  }\n\n  // open / close sidebar\n  // sidebar state (open / closed) is stored locally and will persist across sessions\n  // triggers via \"s\" keypress or by clicking on the hamburger menu icon\n  // will also trigger in instances where the user tries to create a new entry on a blank day but no categories are selected.\n  function handleBtnMainMenu() {\n    const currentSidebarState = context.getSidebarState();\n\n    if (currentSidebarState === \"hide\") {\n      toggleForm.onclick = handleForm;\n      sbToggleForm.onclick = null;\n      sbToggleSubBtn.onclick = null;\n      sbFooter.onmousedown = null;\n      sbCategories.onmousedown = null;\n      sbDatepicker.onclick = null;\n\n      // clear categories/datepicker content when inactive\n      setTimeout(() => {\n        sbDatepickerBody.innerText = \"\";\n        sbCategoriesWrapper.innerText = \"\";\n      }, 100);\n\n      viewsContainer.classList.remove(\"container__calendars-sb-active\");\n      sidebar.classList.add(\"hide-sidebar\");\n      toggleForm.classList.remove(\"hide-toggle--form\");\n      dateTimeWrapper.classList.remove(\"datetime-inactive\");\n      dateTimeBtn.removeAttribute(\"tabindex\");\n      listviewBody.removeAttribute(\"style\");\n\n    } else {\n      toggleForm.onclick = null;\n      sbToggleForm.onclick = handleForm;\n      sbToggleSubBtn.onclick = handleToggleSubmenu;\n\n      if (context.getComponent() === \"list\") {\n        listviewBody.style.width = \"100%\";\n        listviewBody.style.marginLeft = \"0\";\n      }\n\n      viewsContainer.classList.add(\"container__calendars-sb-active\");\n      sidebar.classList.remove(\"hide-sidebar\");\n      toggleForm.classList.add(\"hide-toggle--form\");\n      dateTimeWrapper.classList.add(\"datetime-inactive\");\n      dateTimeBtn.setAttribute(\"tabindex\", \"-1\");\n\n      /**\n       * @function resetdatepicker\n       * @desc if at any point the datepicker in the header is opened, it will provide a callback to the global store with instructions to close. This can only trigger if the user presses \"s\" on the keyboard (open sidebar toggle) while the datepicker is open.\n       */\n      const resetdatepicker = store.getResetDatepickerCallback();\n      if (resetdatepicker !== null) {\n        resetdatepicker();\n        store.setResetDatepickerCallback(null);\n      }\n\n      datepickerContext.setDate(\n        +context.getYear(), +context.getMonth(), +context.getDay()\n      );\n      datepickerContext.setDateSelected(+context.getDay());\n\n      renderSidebarCategories();\n      renderSidebarDatepicker();\n    }\n  }\n\n  function handleBtnToday() {\n    if (!context.isToday() && context.getComponent() !== \"list\") {\n      let tempdate = new Date();\n      context.setDate(\n        tempdate.getFullYear(),\n        tempdate.getMonth(),\n        tempdate.getDate(),\n      );\n\n      fullRender(context.getComponent());\n      renderSidebarDatepicker();\n    }\n  }\n\n  function handleBtnPrev() {\n    switch (context.getComponent()) {\n      case \"day\":\n        handleTransition(\n          document.querySelector(\".dayview--header-day__number\"),\n          \"right\",\n          getPreviousDay\n        );\n        break;\n      case \"week\":\n        handleTransition(\n          document.querySelector(\".weekview--header\"),\n          \"right\",\n          getPreviousWeek\n        );\n        break;\n      case \"month\":\n        handleTransition(monthwrapper, \"right\", getPreviousMonth);\n        break;\n      case \"year\":\n        handleTransition(yearwrapper, \"right\", getPreviousYear);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleBtnNext() {\n    switch (context.getComponent()) {\n      case \"day\":\n        handleTransition(\n          document.querySelector(\".dayview--header-day__number\"),\n          \"left\",\n          getNextDay\n        );\n        break;\n      case \"week\":\n        handleTransition(\n          document.querySelector(\".weekview--header\"),\n          \"left\",\n          getNextWeek\n        );\n        break;\n      case \"month\":\n        handleTransition(monthwrapper, \"left\", getNextMonth);\n        break;\n      case \"year\":\n        handleTransition(yearwrapper, \"left\", getNextYear);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleDatePickerBtn(e) {\n    datepicker.classList.remove(\"hide-datepicker\");\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\n    datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n    const rect = e.target.getBoundingClientRect();\n    const newDatepickerLeft = parseInt(rect.left);\n    // convert rect left into a percentage so that it scales with window resize\n    const perc = parseInt((newDatepickerLeft / window.innerWidth) * 100);\n    datepicker.setAttribute(\"style\", `left:${perc}%;top:12px;`);\n    setDatepicker(context, store, datepickerContext, \"header\");\n\n  }\n\n  function setOptionStyle(option) {\n    const views = ['day', 'week', 'month', 'year', 'list'];\n    const activeIndex = views.indexOf(option);\n    for (let i = 0; i < options.length; i++) {\n      if (i === activeIndex) {\n        options[i].classList.add(\"change-view--option__active\");\n      } else {\n        options[i].classList.remove(\"change-view--option__active\");\n      }\n    }\n  }\n\n  function closeOptionsModal() {\n    selectElement.classList.remove(\"selection--active\");\n    selectOverlay.style.display = \"none\";\n    selectOverlay.classList.add(\"toggle-options\");\n    optionswrapper.classList.add(\"toggle-options\");\n    optionswrapper.classList.remove(\"toggle-animate\");\n  }\n\n  function renderOption(option, initialRender) {\n    const comp = context.getComponent();\n    // console.log(comp, option)\n    if (option === \"week\" || option === \"day\") {\n      collapsebtn.onclick = handleCollapse;\n      collapsebtn.classList.remove(\"hide-cbt\");\n    } else {\n      collapsebtn.onclick = null;\n      collapsebtn.classList.add(\"hide-cbt\");\n    }\n\n    if (option === comp && !initialRender) return;\n    closeOptionsModal();\n    context.setComponent(option);\n    fullRender(option);\n    setOptionStyle(option);\n    // week datepicker is the only one that has any stylistic difference\n    if (comp || option === \"week\") {\n      renderSidebarDatepicker();\n    }\n    document.activeElement.blur();\n  }\n\n  function handleSelect(e) {\n    selectElement.classList.add(\"selection--active\");\n    selectOverlay.classList.remove(\"toggle-options\");\n    selectOverlay.style.display = \"block\";\n    optionswrapper.classList.remove(\"toggle-options\");\n    optionswrapper.classList.add(\"toggle-animate\");\n    const setOption = (e) => {\n      const option = e.target.getAttribute(\"data-view-option\");\n      renderOption(option);\n    };\n    optionswrapper.onclick = setOption;\n    selectOverlay.onclick = closeOptionsModal;\n  }\n\n  // EVENT DELEGATION : HEADER ELEMENTS\n  function delegateHeaderEvents(e) {\n    e.preventDefault();\n    const btnMainMenu = getClosest(e, \".menu\");\n    const btnToday = getClosest(e, \".btn-today\");\n    const btnPrev = getClosest(e, \".prev\");\n    const btnNext = getClosest(e, \".next\");\n    const dateTime = getClosest(e, \".datetime-content\");\n    const search = getClosest(e, \".h-search\");\n    const settings = getClosest(e, \".settings\");\n    const select = getClosest(e, \".select__modal\");\n    const refresh = getClosest(e, \".refresh\");\n    const sync = getClosest(e, \".sync\");\n\n    if (sync){\n      dailySyncTP(store, () => fullRender(\"month\"));\n      return;\n    }\n\n\n    if (refresh){\n      refreshTrainingPeaks(store, () => fullRender(\"month\"));\n      return;\n    }\n\n    if (btnMainMenu) {\n      context.toggleSidebarState();\n      handleBtnMainMenu();\n      return;\n    }\n\n    if (btnToday) {\n      handleBtnToday();\n      return;\n    }\n\n    if (btnPrev) {\n      handleBtnPrev();\n      return;\n    }\n\n    if (btnNext) {\n      handleBtnNext();\n      return;\n    }\n\n    if (dateTime) {\n      handleDatePickerBtn(e);\n      return;\n    }\n\n    if (search) {\n      createGoTo(context, store, datepickerContext);\n      return;\n    }\n\n    if (settings) {\n      handleToggleSubmenu(e);\n      return;\n    }\n\n    if (select) {\n      handleSelect(e);\n      return;\n    }\n  }\n\n  /* configure keyboard shortcuts */\n  /* 2022-01-14\n  * Google calendar has recently updated their app wide throttling from a global value of around 150 to the minimum of 4ms(might be 10) for period changes and (250-300) for view changes. \n  * For now, I'm keeping global throttle at 150ms. \n  */\n  function delegateGlobalKeyDown(e) {\n    // const temptoastpopup = document?.querySelector(\".toast\")\n    const toggleChangeview = (e) => {\n      if (selectElement.classList.contains(\"selection--active\")) {\n        if (e.key.toLowerCase() === \"v\") {\n          closeOptionsModal();\n        }\n      } else {\n        handleSelect();\n      }\n    };\n\n    switch (e.key.toLowerCase()) {\n      // switch to day view\n      case \"d\":\n        renderOption(\"day\");\n        break;\n      case \"1\":\n        renderOption(\"day\");\n        break;\n\n      // switch to week view\n      case \"w\":\n        renderOption(\"week\");\n        break;\n      case \"2\":\n        renderOption(\"week\");\n        break;\n\n      // switch to month view\n      case \"m\":\n        renderOption(\"month\");\n        break;\n      case \"3\":\n        renderOption(\"month\");\n        break;\n\n      // switch to year view\n      case \"y\":\n        renderOption(\"year\");\n        break;\n      case \"4\":\n        renderOption(\"year\");\n        break;\n\n      // switch to list view\n      case \"l\":\n        renderOption(\"list\");\n        break;\n      case \"5\":\n        renderOption(\"list\");\n        break;\n\n      // toggle sidebar open/close\n      case \"s\":\n        context.toggleSidebarState();\n        handleBtnMainMenu();\n        break;\n\n      // toggle form open (close with escape)\n      case \"f\":\n        handleForm();\n        break;\n\n      // open \"views\" menu\n      case \"v\":\n        toggleChangeview(e);\n        break;\n\n      // (day/week) next month\n      case \"p\":\n        handleBtnPrev();\n        break;\n\n      // (day/week) prev month\n      case \"n\":\n        handleBtnNext();\n        break;\n\n      // set date to today\n      case \"t\":\n        handleBtnToday();\n        break;\n\n      // open submenu\n      case \"a\":\n        handleToggleSubmenu();\n        break;\n\n      // open keyboard shortcuts modal\n      case \"?\":\n        handleShortCutsModal(store);\n        break;\n      case \"/\":\n        handleShortCutsModal(store);\n        break;\n\n      // toggle between light/dark mode\n      case \"0\":\n        setColorScheme();\n        break;\n\n      // opens search modal\n      case \"g\":\n        createGoTo(context, store, datepickerContext);\n        break;\n\n      case \"+\":\n        createCategoryForm(store, {\n          name: \"new category\",\n          color: \"#2C52BA\",\n        }, false, null);\n\n      default:\n        break;\n    }\n  }\n\n  const getKeyPressThrottled = throttle(delegateGlobalKeyDown, 150);\n  const handleHeaderDelegation = throttle(delegateHeaderEvents, 150);\n  // shortcuts defined within this function are global and will work anywhere within the application (except for modal/popup/form windows)\n\n  // If a modal/popup is open, all keyboard shortcuts defined within this function will be disabled until the modal/popup is closed.\n  // Note that Each modal/popup has its own keydown close event on escape thats defined within the scope of its own function,\n  // once it is closed, the event listener is removed from the DOM.\n  let [lk, lk2] = ['', ''];\n  function handleGlobalKeydown(e) {\n    if (!store.getShortcutsStatus()) return;\n    if (store.hasActiveOverlay()) return;\n\n    // prevent ctrl + key shortcuts from triggering at all\n    lk = e.key;\n    if (lk === \"Control\") {\n      lk2 = \"Control\";\n      return;\n    }\n    if (lk2 === \"Control\" && lk !== \"Control\") {\n      lk2 = \"\";\n      return;\n    }\n\n    getKeyPressThrottled(e);\n  }\n\n  function handleCollapse() {\n    const view = context.getComponent();\n    const headers = {\n      ['day']: {\n        component: document.querySelector(\".dayview--header\"),\n        collapse: \"dvh-collapse\",\n      },\n      ['week']: {\n        component: document.querySelector(\".weekview--header\"),\n        componentBody: document.querySelector(\".weekview__grid\"),\n        collapse: \"wvh-collapse\",\n        componentBodytoggle: \"wvh-body-collapse\"\n      },\n    };\n\n    const eyeIcons = {\n      on: document.querySelector(\".cv-svg-on\"),\n      off: document.querySelector(\".cv-svg-off\")\n    };\n\n    if (view === \"week\" || view === \"day\") {\n      eyeIcons.on.classList.toggle(\"hide-cbt\");\n      eyeIcons.off.classList.toggle(\"hide-cbt\");\n      headers[view].component.classList.toggle(headers[view].collapse);\n      if (view === \"week\") {\n        headers[view].componentBody.classList.toggle(headers[view].componentBodytoggle);\n      }\n    }\n  }\n\n  const appinit = () => {\n    /*************************/\n    // render initial view and set initial attributes\n    renderOption(context.getComponent(), true);\n    setInitialAttributes();\n    handleBtnMainMenu();\n\n    /*************************/\n    // supply callbacks to store for opening form and sidebar\n    store.setRenderFormCallback(handleForm);\n    const ensureSidebarIsOpen = () => {\n      context.setSidebarState(\"open\");\n      handleBtnMainMenu();\n    };\n    store.setRenderSidebarCallback(ensureSidebarIsOpen);\n\n    /*************************/\n    // establish global event listeners\n    header.onclick = throttle(handleHeaderDelegation, 150);\n    document.addEventListener(\"keydown\", handleGlobalKeydown);\n  };\n  appinit();\n}","import setHeader from \"../components/menus/header\";\nimport setYearView from \"../components/views/yearview\";\nimport setMonthView from \"../components/views/monthview\";\nimport setWeekView from \"../components/views/weekview\";\nimport setDayView from \"../components/views/dayview\";\nimport setListView from \"../components/views/listview\";\n// import setListView from \"../components/views/listview\"\n\nconst yearComponent = document.querySelector(\".yearview\");\nconst monthComponent = document.querySelector(\".monthview\");\nconst weekComponent = document.querySelector(\".weekview\");\nconst dayComponent = document.querySelector(\".dayview\");\nconst listComponent = document.querySelector(\".listview\");\n\nlet [prev1, prev2] = [null, null];\nexport default function setViews(component, context, store, datepickerContext) {\n  prev1 = prev2;\n  prev2 = component;\n\n  function hideViews() {\n    const views = [\n      yearComponent,\n      monthComponent,\n      weekComponent,\n      dayComponent,\n      listComponent\n    ];\n\n    // reset previous view after switching to a new view\n    const resetPrevView = store.getResetPreviousViewCallback();\n    if (prev1 !== null && resetPrevView !== null && prev1 !== prev2) {\n      resetPrevView();\n    }\n\n    // only the month view relies on a resize listener\n    // more info provided @readme > monthview > box queries\n    views.forEach((view) => {\n      view.classList.add(\"hide-view\");\n      // if (view !== monthComponent) {\n      //   window.onresize = null;\n      // }\n    });\n  }\n  // window.removeEventListener(\"resize\", store.getResizeHandle(\"month\"));\n\n  function initView(component) {\n    switch (component) {\n      case \"day\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setDayView(context, store, datepickerContext);\n        dayComponent.classList.remove(\"hide-view\");\n        break;\n      case \"week\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setWeekView(context, store, datepickerContext);\n        weekComponent.classList.remove(\"hide-view\");\n        break;\n      case \"month\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setMonthView(context, store, datepickerContext);\n        monthComponent.classList.remove(\"hide-view\");\n        // window.onresize = store.getResizeHandle(\"month\");\n        // window.addEventListener(\"resize\", store.getResizeHandle(\"month\"));\n        break;\n      case \"year\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setYearView(context, store, datepickerContext);\n        yearComponent.classList.remove(\"hide-view\");\n        break;\n      case \"list\":\n        context.setComponent(component);\n        setHeader(context, component, store);\n        setListView(context, store, datepickerContext);\n        listComponent.classList.remove(\"hide-view\");\n        break;\n      default:\n        context.setComponent(\"month\");\n        setHeader(context, \"month\");\n        setMonthView(context, store, datepickerContext);\n        monthComponent.classList.remove(\"hide-view\");\n        break;\n    }\n  }\n\n  hideViews();\n  document.title = \"TrainingPandas\"\n  initView(component);\n}","import { compareDates } from \"../utilities/dateutils\";\nimport locales from \"../locales/en\";\nconst labels = locales.labels;\n\n\n/*\n\"setDateDefaults\",\n\"setSchemaDefaults\",\n\"setDefaults\",\n\"getAllMethodNames\",\n\"getColorScheme\",\n\"setColorScheme\",\n\"setSidebarState\",\n\"toggleSidebarState\",\n\"getComponent\",\n\"setComponent\",\n\"getSidebarState\",\n\"setDay\",\n\"setMonth\",\n\"setYear\",\n\"setDate\",\n\"setDateSelected\",\n\"setPrevDay\",\n\"setPrevWeek\",\n\"setPrevMonth\",\n\"setPrevYear\",\n\"setNextDay\",\n\"setNextWeek\",\n\"setNextMonth\",\n\"setNextYear\",\n\n\"getGmt\",\n\"getDateSelected\",\n\"getDay\",\n\"getMonth\",\n\"getYear\",\n\"getDate\",\n\"getToday\",\n\"getWeek\",\n\"getWeekday\",\n\"getWeekArray\",\n\"getWeekRange\",\n\"getWeekNumber\",\n\"getMonthName\",\n\"getDaysInMonth\",\n\"getMonthArrayStartDay\",\n\"getMonthArrayStart\",\n\"getMonthArrayEndDay\",\n\"getMonthArrayEnd\",\n\"getMonthArray\",\n\"isToday\"\n*/\nclass Context {\n  constructor () {\n    this.colorScheme = \"dark\";\n    this.component = \"month\";\n    this.sidebarState = \"hide\";\n    this.date = new Date();\n    this.gmt = new Date().getTimezoneOffset() / 60;\n\n    this.dateSelected = 1;\n    this.daySelected = this.date.getDate();\n    this.monthSelected = this.date.getMonth();\n    this.yearSelected = this.date.getFullYear();\n\n    this.month = this.getMonth();\n    this.monthArray = this.getMonthArray();\n    this.week = this.getWeek();\n  }\n\n  setDateDefaults() {\n    if (localStorage.getItem(\"yearSelected\") === null) {\n      if (this.yearSelected === undefined) {\n        this.yearSelected = this.date.getFullYear();\n      }\n      Context.setLocalYear(this.yearSelected);\n    }\n\n    if (localStorage.getItem(\"monthSelected\") === null) {\n      if (this.monthSelected === undefined) {\n        this.monthSelected = this.date.getMonth();\n      }\n      Context.setLocalMonth(this.monthSelected);\n    }\n\n    if (localStorage.getItem(\"daySelected\") === null) {\n      if (this.daySelected === undefined) {\n        this.daySelected = this.date.getDate();\n      }\n      Context.setLocalDay(this.daySelected);\n    }\n\n    if (localStorage.getItem(\"dateSelected\") === null) {\n      if (this.dateSelected === undefined) {\n        this.dateSelected = 1;\n      }\n      Context.setLocalDateSelected(this.dateSelected);\n    }\n  }\n\n  setSchemaDefaults() {\n    if (localStorage.getItem(\"colorScheme\") === null) {\n      if (this.colorScheme === undefined) {\n        this.colorScheme = \"dark\";\n      }\n      Context.setLocalColorScheme(this.colorScheme);\n    }\n\n    if (localStorage.getItem(\"component\") === null) {\n      if (this.component === undefined) {\n        this.component = \"month\";\n      }\n      Context.setLocalComponent(this.component);\n    }\n\n    if (localStorage.getItem(\"sidebarState\") === null) {\n      if (this.sidebarState === undefined) {\n        this.sidebarState = \"hide\";\n      }\n      Context.setLocalSidebarState(this.sidebarState);\n    }\n  }\n\n  setDefaults() {\n    this.setSchemaDefaults();\n    this.setDateDefaults();\n  }\n\n  /* **************************************** */\n  /* LOCAL STATE MANAGEMENT */\n  static getLocalDay() {\n    return +localStorage.getItem(\"daySelected\") === undefined ? 1 : +localStorage.getItem(\"daySelected\");\n  }\n\n  static getLocalMonth() {\n    return +localStorage.getItem(\"monthSelected\") === undefined ? 1 : +localStorage.getItem(\"monthSelected\");\n  }\n\n  static getLocalYear() {\n    return +localStorage.getItem(\"yearSelected\") === undefined ? 1 : +localStorage.getItem(\"yearSelected\");\n  }\n\n  static getLocalDateSelected() {\n    return +localStorage.getItem(\"dateSelected\");\n  }\n\n  static getLocalComponent() {\n    return localStorage.getItem(\"component\");\n  }\n\n  static getLocalColorScheme() {\n    return localStorage.getItem(\"colorScheme\");\n  }\n\n  static getLocalSidebarState() {\n    return localStorage.getItem(\"sidebarState\");\n  }\n\n  static setLocalDay(day) {\n    localStorage.setItem(\"daySelected\", day);\n  }\n\n  static setLocalMonth(month) {\n    localStorage.setItem(\"monthSelected\", month);\n  }\n\n  static setLocalYear(year) {\n    localStorage.setItem(\"yearSelected\", year);\n  }\n\n  static setLocalDateSelected(date) {\n    localStorage.setItem(\"dateSelected\", date);\n  }\n\n  static setLocalComponent(component) {\n    localStorage.setItem(\"component\", component);\n  }\n\n  static setLocalSidebarState(state) {\n    localStorage.setItem(\"sidebarState\", state);\n  }\n\n  static setLocalColorScheme(colorScheme) {\n    localStorage.setItem(\"colorScheme\", colorScheme);\n  }\n  /* **************************************** */\n\n\n  /* **************************************** */\n  /* TESTING -- DEV ONLY */\n  getAllMethodNames() {\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\n      (method) => {\n        return method !== \"constructor\" && method !== \"getStoreStats\";\n      }\n    );\n  }\n\n  /* **************************************** */\n  /* APPLICATION THEME (DARK/LIGHT) */\n  getColorScheme() {\n    return Context.getLocalColorScheme();\n  }\n  setColorScheme(colorScheme) {\n    this.colorScheme = colorScheme;\n    Context.setLocalColorScheme(colorScheme);\n  }\n  setSidebarState(state) {\n    this.sidebarState = state;\n    Context.setLocalSidebarState(state);\n  }\n  toggleSidebarState() {\n    this.sidebarState = this.getSidebarState() === \"open\" ? \"hide\" : \"open\";\n    Context.setLocalSidebarState(this.sidebarState);\n  }\n  /* **************************************** */\n\n\n  /* **************************************** */\n  /* APPLICATION CURRENT COMPONENT */\n  getComponent() {\n    return Context.getLocalComponent() || \"month\";\n  }\n  setComponent(component) {\n    this.component = component;\n    Context.setLocalComponent(component);\n  }\n  getSidebarState() {\n    return Context.getLocalSidebarState() || \"hide\";\n  }\n  /* **************************************** */\n\n\n\n  /* **************************************** */\n  /* APPLICATION DATE HANDLING */\n  // set the current date for the following\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\n  setDay(day) {\n    this.daySelected = day;\n    Context.setLocalDay(day);\n  }\n\n  setMonth(month) {\n    this.monthSelected = month;\n    Context.setLocalMonth(month);\n  }\n\n  setYear(year) {\n    this.yearSelected = year;\n    Context.setLocalYear(year);\n  }\n\n  setDate(year, month, day) {\n    this.setYear(year);\n    this.setMonth(month);\n    this.setDay(day);\n  }\n\n  setDateSelected(date) {\n    this.dateSelected = date;\n    Context.setLocalDateSelected(date);\n  }\n  /* ************** */\n  // Take current date and set it to previous day/week/month/year\n  /* PREVIOUS : DAY, WEEK, MONTH, YEAR */\n  setPrevDay() {\n    const prevDay = new Date(\n      this.getYear(), this.getMonth(), this.getDay() - 1\n    );\n\n    this.setDate(\n      prevDay.getFullYear(), prevDay.getMonth(), prevDay.getDate()\n    );\n  }\n\n  setPrevWeek() {\n    const prevWeek = new Date(\n      this.getYear(), this.getMonth(), this.getDay() - 7\n    );\n\n    this.setDate(\n      prevWeek.getFullYear(), prevWeek.getMonth(), prevWeek.getDate()\n    );\n  }\n\n  setPrevMonth() {\n    const prevMonth = new Date(\n      this.getYear(), +this.getMonth() - 1, this.getDay()\n    );\n\n    this.setDate(\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\n    );\n  }\n\n  setPrevYear() {\n    this.setYear(this.getYear() - 1);\n  }\n  /* ************** */\n\n  // Take current date and set it to next day/week/month/year\n  /* NEXT : DAY, WEEK, MONTH, YEAR */\n  setNextDay() {\n    const nextDay = new Date(this.getYear(), this.getMonth(), this.getDay() + 1);\n    this.setDate(nextDay.getFullYear(), nextDay.getMonth(), nextDay.getDate());\n  }\n\n  setNextWeek() {\n    const nextWeek = new Date(this.getYear(), this.getMonth(), this.getDay() + 7);\n    this.setDate(nextWeek.getFullYear(), nextWeek.getMonth(), nextWeek.getDate());\n  }\n\n  setNextMonth() {\n    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());\n    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());\n  }\n\n  setNextYear() {\n    this.setYear(this.getYear() + 1);\n  }\n  /* ************** */\n\n\n  /* ************** */\n  /* GETTERS */\n  getGmt() {\n    return this.gmt;  // UTC Offset\n  }\n\n  getDateSelected() {\n\n    return +Context.getLocalDateSelected();\n    // return +this.dateSelected;\n  }\n\n  getDay() {\n    return +Context.getLocalDay();\n    // return +this.daySelected;\n  }\n\n  getMonth() {\n    // const month = Context.getLocalMonth();\n    return +Context.getLocalMonth();\n    // return +this.monthSelected;\n  }\n\n  getYear() {\n    return +Context.getLocalYear() || this.date.getFullYear();\n    // return +this.yearSelected;\n  }\n\n  getDate() {\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\n  }\n\n  getToday() {\n    return this.date;\n  }\n\n  getWeek() {\n    let tempdate = this.getDate();\n    tempdate.setDate(tempdate.getDate() - tempdate.getDay());\n    return tempdate;\n  }\n\n  getWeekday() {\n    return this.getDate().getDay();\n  }\n\n  getWeekArray() {\n    let week = this.getWeek();\n    let weekArray = [];\n    for (let i = 0; i < 7; i++) {\n      if (i < 6) {\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i));\n      } else {\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i, 23, 59, 59, 999));\n      }\n    }\n    return weekArray;\n  }\n\n  getWeekRange() {\n    let weekArray = this.getWeekArray();\n    let [m1, m2] = [weekArray[0].getMonth(), weekArray[6].getMonth()];\n    let [d1, d2] = [weekArray[0].getDate(), weekArray[6].getDate()];\n\n    if (m1 === m2) {\n      return `${labels.monthsShort[m1]} ${d1}  ${d2}, ${weekArray[0].getFullYear()}`;\n    } else {\n      return `${labels.monthsShort[m1]} ${d1}  ${d2} ${labels.monthsShort[m2]}, ${weekArray[1].getFullYear()}`;\n    }\n  }\n\n  // ** not in use **\n  getWeekNumber() {\n    // returns week index 1 - 52\n    let d = new Date(Date.UTC(this.getYear(), this.getMonth(), this.getDay()));\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n  }\n\n  getMonthName() {\n    return labels.monthsLong[this.getMonth()];\n  }\n\n  getDaysInMonth() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\n  }\n\n  getMonthArrayStartDay() {\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\n  }\n\n  getMonthArrayStart() {\n    let monthArrayStart = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\n      monthArrayStart.push(new Date(year, month, 0 - i));\n    }\n    return monthArrayStart;\n  }\n\n  getMonthArrayEndDay() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\n  }\n\n  getMonthArrayEnd(handleFourWeeks) {\n    let monthArrayEnd = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n\n    if (handleFourWeeks) {\n      for (let i = 1; i < 8; i++) {\n        monthArrayEnd.push(new Date(year, +month + 1, i));\n      }\n      return monthArrayEnd;\n    } else {\n      for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\n        monthArrayEnd.push(new Date(year, +month + 1, i));\n      }\n      return monthArrayEnd;\n    }\n  }\n\n  getMonthArray() {\n    let monthArray = [];\n    let start = this.getMonthArrayStart();\n    let daysInMonth = this.getDaysInMonth();\n    let [year, month] = [this.getYear(), this.getMonth()];\n    let end = this.getMonthArrayEnd();\n\n    for (let i = start.length - 1; i >= 0; i--) {\n      monthArray.push(start[i]);\n    }\n\n    for (let i = 1; i <= daysInMonth; i++) {\n      monthArray.push(new Date(year, month, i));\n    }\n\n    monthArray[monthArray.length - 1].setHours(23, 59, 59, 999);\n\n    if (monthArray.length === 28 && end.length < 7) {\n      end = this.getMonthArrayEnd(true);\n    }\n\n    for (let i = 0; i < end.length; i++) {\n      if (i === end.length - 1) {\n        end[i].setHours(23, 59, 59, 999);\n      }\n      monthArray.push(end[i]);\n    }\n\n    return monthArray;\n  }\n\n  isToday(testDate) {\n    if (!testDate) {\n      return compareDates(this.getDate(), new Date());\n    } else {\n      return compareDates(testDate, new Date());\n    }\n  }\n}\n\n/**\n  * DatepickerContext\n  * @class\n  * @classdesc date context for datepicker -- \n  * slimmed down version of @Context class \n  * @property {Date} date - today's date\n  * @property {Date} dateSelected - selected date\n  * @property {number} daySelected - selected day\n  * @property {number} monthSelected - selected month\n  * @property {number} yearSelected - selected year\n  * @property {number} month - current month\n  * @property {Array} monthArray - current month array\n  * \n */\nclass DatepickerContext {\n  constructor () {\n    this.date = new Date();\n    this.dateSelected = this.date.getDate();\n    this.daySelected = this.date.getDate();\n    this.monthSelected = this.date.getMonth();\n    this.yearSelected = this.date.getFullYear();\n    this.month = this.getMonth();\n    this.monthArray = this.getMonthArray();\n  }\n\n  setDefaults() {\n    if (localStorage.getItem(\"pickerYearSelected\") === null) {\n      if (this.yearSelected === undefined) {\n        this.yearSelected = this.date.getFullYear();\n      }\n      DatepickerContext.setLocalPickerYear(this.yearSelected);\n    }\n\n    if (localStorage.getItem(\"pickerMonthSelected\") === null) {\n      if (this.monthSelected === undefined) {\n        this.monthSelected = this.date.getMonth();\n      }\n      DatepickerContext.setLocalPickerMonth(this.monthSelected);\n    }\n\n    if (localStorage.getItem(\"pickerDaySelected\") === null) {\n      if (this.daySelected === undefined) {\n        this.daySelected = this.date.getDate();\n      }\n      DatepickerContext.setLocalPickerDay(this.daySelected);\n    }\n\n    if (localStorage.getItem(\"pickerDateSelected\") === null) {\n      if (this.dateSelected === undefined) {\n        this.dateSelected = this.date.getDate();\n      }\n      DatepickerContext.setLocalPickerDateSelected(this.dateSelected);\n    }\n  }\n\n  /* **************************************** */\n  /* LOCAL STATE MANAGEMENT */\n  static getLocalPickerDay() {\n    return +localStorage.getItem(\"pickerDaySelected\");\n  }\n\n  static getLocalPickerMonth() {\n    return +localStorage.getItem(\"pickerMonthSelected\");\n  }\n\n  static getLocalPickerYear() {\n    return +localStorage.getItem(\"pickerYearSelected\");\n  }\n\n  static getLocalPickerDateSelected() {\n    return +localStorage.getItem(\"pickerDateSelected\");\n  }\n\n  static setLocalPickerDay(day) {\n    localStorage.setItem(\"pickerDaySelected\", day);\n  }\n\n  static setLocalPickerMonth(month) {\n    localStorage.setItem(\"pickerMonthSelected\", month);\n  }\n\n  static setLocalPickerYear(year) {\n    localStorage.setItem(\"pickerYearSelected\", year);\n  }\n\n  static setLocalPickerDateSelected(date) {\n    localStorage.setItem(\"pickerDateSelected\", date);\n  }\n\n  /* **************************************** */\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\n  setDay(day) {\n    this.daySelected = day;\n    DatepickerContext.setLocalPickerDay(day);\n  }\n\n  setMonth(month) {\n    this.monthSelected = month;\n    DatepickerContext.setLocalPickerMonth(month);\n  }\n\n  setYear(year) {\n    this.yearSelected = year;\n    DatepickerContext.setLocalPickerYear(year);\n  }\n\n  setDateSelected(date) {\n    this.dateSelected = date;\n    DatepickerContext.setLocalPickerDateSelected(date);\n  }\n\n  setDate(year, month, day) {\n    this.setYear(year);\n    this.setMonth(month);\n    this.setDay(day);\n  }\n\n  /* ************** */\n  setPrevMonth() {\n    const prevMonth = new Date(\n      this.getYear(), this.getMonth() - 1, this.getDay()\n    );\n\n    this.setDate(\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\n    );\n  }\n\n  setNextMonth() {\n    const nextMonth = new Date(\n      this.getYear(), this.getMonth() + 1, this.getDay()\n    );\n\n    this.setDate(\n      nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate()\n    );\n  }\n  /* ************** */\n  getDateSelected() {\n    return +DatepickerContext.getLocalPickerDateSelected();\n  }\n\n  getDay() {\n    return +DatepickerContext.getLocalPickerDay();\n  }\n\n  getMonth() {\n    return +DatepickerContext.getLocalPickerMonth();\n  }\n\n  getYear() {\n    return +DatepickerContext.getLocalPickerYear();\n  }\n\n  getDate() {\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\n  }\n\n  getToday() {\n    return this.date;\n  }\n\n  getMonthName() {\n    return labels.monthsLong[this.getMonth()];\n  }\n\n  getDaysInMonth() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\n  }\n\n  getMonthArrayStartDay() {\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\n  }\n\n  getMonthArrayStart() {\n    let monthArrayStart = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\n      monthArrayStart.push(new Date(year, month, 0 - i));\n    }\n    return monthArrayStart;\n  }\n\n  getMonthArrayEndDay() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\n  }\n\n  getMonthArrayEnd() {\n    let monthArrayEnd = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\n      monthArrayEnd.push(new Date(year, +month + 1, i));\n    }\n    return monthArrayEnd;\n  }\n\n  getMonthArray() {\n    let monthArray = [];\n\n    let start = this.getMonthArrayStart();\n    for (let i = start.length - 1; i >= 0; i--) {\n      monthArray.push(start[i]);\n    }\n\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 1; i <= this.getDaysInMonth(); i++) {\n      monthArray.push(new Date(year, month, i));\n    }\n\n    let end = this.getMonthArrayEnd();\n    for (let i = 0; i < end.length; i++) {\n      if (i === end.length - 1) {\n        end[i].setHours(23, 59, 59, 999);\n      }\n      monthArray.push(end[i]);\n    }\n    return monthArray;\n  }\n}\n\nconst context = new Context();\nconst datepickerContext = new DatepickerContext();\ncontext.setDefaults();\ndatepickerContext.setDefaults();\nexport default context;\nexport { datepickerContext };","const localStoreKeyNames = [\n  \"animationStatus\",\n  \"colorScheme\",\n  \"component\",\n  \"ctg\",\n  \"dateSelected\",\n  \"daySelected\",\n  \"keyboardShortcutsStatus\",\n  \"monthSelected\",\n  \"pickerDateSelected\",\n  \"pickerDaySelected\",\n  \"pickerMonthSelected\",\n  \"pickerYearSelected\",\n  \"refresh\",\n  \"sidebarState\",\n  \"store\",\n  \"yearSelected\"\n];\n\n// [\n//   \"activeCtg\",\n//   \"dateSelected\",\n//   \"pickerDaySelected\",\n//   \"pickerMonthSelected\",\n//   \"sidebarState\",\n//   \"animationStatus\",\n//   \"refresh\",\n//   \"component\",\n//   \"yearSelected\",\n//   \"ctg\",\n//   \"monthSelected\",\n//   \"daySelected\",\n//   \"pickerDateSelected\",\n//   \"pickerYearSelected\",\n//   \"store\",\n//   \"colorScheme\",\n//   \"keyboardShortcutsStatus\"\n// ]\n\nexport default localStoreKeyNames;","import Entry from \"../factory/entries\";\nimport localStoreKeyNames from \"./constants\";\nimport { testDate, compareDates } from \"../utilities/dateutils\";\nimport locales from \"../locales/en\";\nimport defautlKeyboardShortcuts from \"../locales/kbDefault\";\nconst colors = locales.colors;\n/*\n  this is a temporary list of store methods for development purposes, it is not a complete list of methods\n\n\n\n  ***************************************\n  // ENTRY MANAGEMENT\n  \"addEntry\",\n  \"createEntry\",\n  \"deleteEntry\",\n  \"getActiveEntries\",\n  \"getEntry\",\n  \"getEntries\",\n  \"removeLastEntry\",\n  \"updateEntry\",\n  \"searchBy\",\n  \"sortBy\",\n  \"getFirstAndLastEntry\",\n  \"generateCoordinates\",\n  \"getDayEntries\",\n  \"getDayEntriesArray\",\n  \"getMonthEntries\",\n  \"getMonthEntryDates\",\n  \"getGroupedMonthEntries\",\n  \"getWeekEntries\",\n  \"getYearEntries\",\n  \"getGroupedYearEntries\",\n  ***************************************\n\n\n  ***************************************\n  // CATEGORY MANAGEMENT\n  \"addNewCtg\",\n  \"deleteCategory\",\n  \"getDefaultCtg\",\n  \"getFirstActiveCategory\",\n  \"getFirstActiveCategoryKeyPair\",\n  \"getActiveCategories\",\n  \"getActiveCategoriesKeyPair\",\n  \"getAllCtg\",\n  \"getAllCtgColors\",\n  \"getAllCtgNames\",\n  \"getCategoryStatus\",\n  \"getCtgColor\",\n  \"getCtgLength\",\n  \"hasCtg\",\n  \"moveCategoryEntriesToNewCategory\",\n  \"removeCategoryAndEntries\",\n  \"setCategoryStatus\",\n  \"setAllCategoryStatusExcept\",\n  \"updateCtgColor\",\n  \"updateCtg\"\n  ***************************************\n\n\n  ***************************************\n  // KEYBOARD SHORTCUT MANAGEMENT\n  \"getShortcuts\",\n  \"setShortCut\",\n  \"setShortcutsStatus\",\n  \"getShortcutsStatus\",\n  ***************************************\n\n  ***************************************\n  // ANIMATION MANAGEMENT\n  \"setAnimationStatus\",\n  \"getAnimationStatus\"\n  ***************************************\n\n\n  ***************************************\n  // POPUP/TOAST/NOTIFICATION MANAGEMENT\n  \"addActiveOverlay\",\n  \"removeActiveOverlay\",\n  \"getActiveOverlay\",\n  \"hasActiveOverlay\",\n  ***************************************\n\n\n  ***************************************\n  // USER UPLOAD/DOWNLOAD MANAGEMNET\n  \"validateUserUpload\",\n  \"setUserUpload\",\n  \"setDataReconfigCallback\",\n  \"getUserUpload\",\n  \"getDataReconfigCallback\",\n  ***************************************\n\n\n  ***************************************\n  // FORM MANAGEMENT \n  \"setFormRenderHandle\",\n  \"getFormRenderHandle\",\n\n  \"setFormResetHandle\",\n  \"getFormResetHandle\",\n\n  \"setRenderFormCallback\",\n  \"getRenderFormCallback\",\n  ***************************************\n\n\n  ***************************************\n  // SIDEBAR MANAGEMENT\n  \"setRenderSidebarCallback\",\n  \"getRenderSidebarCallback\"\n  ***************************************\n\n\n  ***************************************\n  // DATEPICKER MANAGEMENT\n  \"setResetDatepickerCallback\",\n  \"getResetDatepickerCallback\",\n  ***************************************\n\n\n  ***************************************\n  // CALENDAR MANAGEMENT\n  \"setResizeHandle\",\n  \"getResizeHandle\",\n  ***************************************\n]\n*/\n// Store is passed to all calendar views in the following order :\n// ./index > ./renderViews > ./setViews > component\n\nclass Store {\n  constructor () {\n    this.store = localStorage.getItem(\"store\")\n      ? JSON.parse(localStorage.getItem(\"store\"))\n      : [];\n\n    this.userUpload;\n\n    this.ctg = localStorage.getItem(\"ctg\")\n      ? JSON.parse(localStorage.getItem(\"ctg\"))\n      : {\n        default: { color: colors.blue[4], active: true },\n      };\n\n    this.activeOverlay = new Set();\n\n    this.handleRenders = {\n      sidebar: {\n        callback: null,\n      },\n      datepicker: {\n        reset: null,\n      },\n      form: {\n        callback: null,\n      },\n      reconfig: {\n        callback: null,\n      },\n      categories: {\n        callback: null,\n      },\n      calendars: {\n        previous: {\n          reset: null,\n        },\n        month: {\n          reset: null,\n          resize: null,\n        },\n        week: {\n          reset: null,\n          render: null,\n        },\n        day: {\n          reset: null,\n        },\n        list: {\n          reset: null,\n        },\n      },\n    };\n\n    this.keyboardShortcuts = defautlKeyboardShortcuts;\n    this.keyboardShortcutsStatus = true;\n    this.animationStatus = true;\n  }\n\n  setStoreForTesting(store) {\n    this.store = store;\n    Store.setStore(this.store);\n  }\n\n  getStoreStats() {\n    return [this.store.length, this.getAllCtgNames().length];\n  }\n\n  getAllMethodNames() {\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\n      (method) => {\n        return method !== \"constructor\" && method !== \"getStoreStats\";\n      }\n    );\n  }\n\n  /* ************************* */\n  /* LOCAL STORAGE MANAGEMENT */\n  static getStore() {\n    return JSON.parse(localStorage.getItem(\"store\")) || [];\n  }\n\n  static getActiveStore() {\n    return JSON.parse(localStorage.getItem(\"activeStore\")) || [];\n  }\n\n  static getCtg() {\n    return JSON.parse(localStorage.getItem(\"ctg\")) || [];\n  }\n\n  static getShortcutsStatus() {\n    return JSON.parse(localStorage.getItem(\"keyboardShortcutsStatus\"));\n  }\n\n  static getAnimationStatus() {\n    return JSON.parse(localStorage.getItem(\"animationStatus\"));\n  }\n\n  // *******************\n  static setStore(store) {\n    localStorage.setItem(\"store\", JSON.stringify(store));\n  }\n\n  static setActiveStore(activeStore) {\n    localStorage.setItem(\"activeStore\", JSON.stringify(activeStore));\n  }\n\n  static setCtg(ctg) {\n    localStorage.setItem(\"ctg\", JSON.stringify(ctg));\n  }\n\n  static setShortcutsStatus(status) {\n    localStorage.setItem(\"keyboardShortcutsStatus\", JSON.stringify(status));\n  }\n\n  static setAnimationStatus(status) {\n    localStorage.setItem(\"animationStatus\", JSON.stringify(status));\n  }\n  /* ************************* */\n\n  /* ************** */\n  /* essential crud (entries) - create, read, update, delete */\n  addEntry(entry) {\n    this.store.push(entry);\n    Store.setStore(this.store);\n  }\n\n  createEntry(...args) {\n    this.addEntry(new Entry(...args));\n    Store.setStore(this.store);\n  }\n\n  deleteEntry(id) {\n    this.store = this.store.filter((entry) => entry.id !== id);\n    Store.setStore(this.store);\n  }\n\n  getActiveEntries() {\n    const active = this.getActiveCategories();\n    if (!active) return [];\n    const activeEntries = this.store.filter((entry) => {\n      return active ? active.indexOf(entry.category) > -1 : [];\n    });\n    return activeEntries;\n  }\n\n  getEntry(id) {\n    return this.store.find((entry) => entry.id === id);\n  }\n\n  getEntries() {\n    return this.store || [];\n  }\n\n  getEntriesByCtg(ctg) {\n    return this.store.filter((entry) => {\n      return entry.category === ctg;\n    });\n  }\n\n  removeLastEntry() {\n    this.store.pop();\n    Store.setStore(this.store);\n  }\n\n  getLastEntryId() {\n    return this.store[this.store.length - 1].id;\n  }\n\n  compareEntries(entry1, entry2) {\n    for (let key in entry1) {\n      if (key === \"id\" || key === \"coordinates\") continue;\n      if (key === \"end\" || key === \"start\") {\n        if (new Date(entry1[key]).getTime() - new Date(entry2[key]).getTime() !== 0) {\n          return false;\n        }\n      } else if (entry1[key] !== entry2[key]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  updateEntry(id, data) {\n    let entry = this.getEntry(id);\n    entry = Object.assign(entry, data);\n    Store.setStore(this.store);\n  }\n  /* ************ */\n\n  /* **************************** */\n  /* (ENTRIES) FILTER/SORT/PARTITION/ */\n  searchBy(entries, searchtype, value) {\n    if (entries.length === 0) return;\n    return entries.filter((entry) => {\n      return entry[searchtype].toLowerCase().slice(0, value.length) === value;\n    });\n  }\n\n  sortBy(entries, type, direction) {\n    if (entries.length === 0) return;\n\n    if (direction === \"desc\") {\n      return entries.sort((a, b) => {\n        if (type === \"start\") {\n          return new Date(a.start) - new Date(b.start);\n        } else if (type === \"end\") {\n          return new Date(a.end) - new Date(b.end);\n        } else if (\n          type === \"description\" ||\n          type === \"title\" ||\n          type === \"category\"\n        ) {\n          return a[type].localeCompare(b[type]);\n        } else {\n          return a[type] - b[type];\n        }\n      });\n    } else {\n      return entries.sort((a, b) => {\n        if (type === \"start\") {\n          return new Date(b.start) - new Date(a.start);\n        } else if (type === \"end\") {\n          return new Date(b.end) - new Date(a.end);\n        } else if (\n          type === \"description\" ||\n          type === \"title\" ||\n          type === \"category\"\n        ) {\n          return b[type].localeCompare(a[type]);\n        } else {\n          return b[type] - a[type];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * @returns {Array} [\n   *    start date/time of earliest entry,  {string}\n   *    end date/time of last entry         {string}\n   * ]\n   */\n  getFirstAndLastEntry() {\n    let sorted = this.sortBy(this.getActiveEntries(), \"start\", \"desc\");\n    if (sorted === undefined) {\n      return [0, 0];\n    } else {\n      return [sorted[0].start, sorted[sorted.length - 1].end];\n    }\n  }\n  /* **************************** */\n\n  /* *************************************** */\n  /* SEGMENT ENTRIES FOR SPECIFIC VIEWS (YEAR/MONTH/...ect)*/\n\n  // @generateCoordinates -- (only used in week and day view)\n  // generates coordinates based on start and end times for a given entry\n  // if an entry spans beyond a day, it will render at the top of the grid in\n  // a static (immobile) position.\n  generateCoordinates(start, end) {\n    [start, end] = [testDate(start), testDate(end)];\n\n    let startMin = start.getHours() * 4 + Math.floor(start.getMinutes() / 15);\n    let endMin = end.getHours() * 4 + Math.floor(end.getMinutes() / 15);\n    let height = endMin - startMin;\n    let total = startMin + height;\n\n    if (!compareDates(start, end)) {\n      return {\n        allDay: true,\n        x: start.getDay(),\n        x2: end.getDay(),\n      };\n    } else {\n      return {\n        allDay: false,\n        x: start.getDay(),\n        y: startMin,\n        h: height,\n        e: total,\n      };\n    }\n  }\n\n  getDayEntries(day) {\n    let activeEntries = this.getActiveEntries();\n    let boxes = {\n      allDay: [], // entries that start on one day and end on another\n      day: [], // entries that start and end on same day\n    };\n\n    if (activeEntries.length === 0) return boxes;\n\n    let dayEntries = activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      return (\n        y === day.getFullYear() && m === day.getMonth() && d === day.getDate()\n      );\n    });\n\n    dayEntries.forEach((entry) => {\n      entry.coordinates = this.generateCoordinates(\n        new Date(entry.start),\n        new Date(entry.end)\n      );\n\n      if (entry.coordinates.allDay) {\n        boxes.allDay.push(entry);\n      } else {\n        boxes.day.push(entry);\n      }\n    });\n    return boxes;\n  }\n\n  getDayEntriesArray(targetDate) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n\n    return activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      return (\n        y === targetDate.getFullYear() &&\n        m === targetDate.getMonth() &&\n        d === targetDate.getDate()\n      );\n    });\n  }\n\n  getMonthEntries(montharr) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n\n    return activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      return (\n        entryDate >= montharr[0] && entryDate <= montharr[montharr.length - 1]\n      );\n    });\n  }\n\n  getMonthEntryDates(montharr) {\n    let entries = this.getMonthEntries(montharr);\n    let grouped = {};\n    entries.forEach((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      let key = `${y}-${m}-${d}`;\n      if (!grouped[key]) {\n        grouped[key] = [];\n      }\n      grouped[key].push(entry);\n    });\n    return Object.keys(grouped);\n  }\n\n  getGroupedMonthEntries(entries) {\n    return entries.reduce((acc, entry) => {\n      let tempDate = new Date(entry.start);\n      let day = tempDate.getDate();\n      if (!acc[day]) {\n        acc[day] = [];\n      }\n      acc[day].push(entry);\n      return acc;\n    }, {});\n  }\n\n  getWeekEntries(week) {\n    let activeEntries = this.getActiveEntries();\n    let [start, end] = [week[0], week[6]];\n    let boxes = {\n      allDay: [], // entries that start on one day and end on another\n      day: [], // entries that start and end on same day\n    };\n\n    if (activeEntries.length === 0) return boxes;\n    let entries = activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      return entryDate >= start && entryDate <= end;\n    });\n\n    entries.forEach((entry) => {\n      entry.coordinates = this.generateCoordinates(\n        new Date(entry.start),\n        new Date(entry.end)\n      );\n\n      if (entry.coordinates.allDay) {\n        boxes.allDay.push(entry);\n      } else {\n        boxes.day.push(entry);\n      }\n    });\n\n    return boxes;\n  }\n\n  getYearEntries(year) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n    return activeEntries.filter(\n      (entry) => new Date(entry.start).getFullYear() === year\n    );\n  }\n\n  getGroupedYearEntries(yearentries) {\n    let grouped = {};\n    yearentries.forEach((entry) => {\n      let entryDate = new Date(entry.start);\n      let month = entryDate.getMonth();\n      let day = entryDate.getDate();\n\n      if (!grouped[month]) {\n        grouped[month] = {};\n      }\n\n      if (!grouped[month][day]) {\n        grouped[month][day] = [];\n      }\n\n      grouped[month][day].push(entry);\n    });\n\n    return grouped;\n  }\n\n  /* ************************************* */\n\n  /* ********************* */\n  /*  CATEGORY MANAGEMENT */\n  addNewCtg(categoryName, color) {\n    if (!this.hasCtg(categoryName)) {\n      this.ctg[categoryName] = {\n        color: color,\n        active: true,\n      };\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  deleteCategory(category) {\n    if (this.hasCtg(category)) {\n      delete this.ctg[category];\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  getDefaultCtg() {\n    return Object.entries(this.ctg)[0];\n  }\n\n  getFirstActiveCategory() {\n    for (let [key, value] of Object.entries(this.ctg)) {\n      if (value.active) {\n        return key;\n      }\n    }\n    return \"default\";\n  }\n\n  getFirstActiveCategoryKeyPair() {\n    for (let [key, value] of Object.entries(this.ctg)) {\n      if (value.active) {\n        return [key, value.color];\n      }\n    }\n    const backup = this.getDefaultCtg();\n    return [backup[0], backup[1].color];\n  }\n\n  getActiveCategories() {\n    let active = Object.keys(this.ctg).filter((key) => this.ctg[key].active);\n    if (active.length > 0) {\n      return active;\n    } else {\n      active = [];\n    }\n  }\n\n  getActiveCategoriesKeyPair() {\n    return Object.entries(this.ctg).filter((key) => key[1].active);\n  }\n\n  getAllCtg() {\n    return this.ctg;\n  }\n\n  getAllCtgColors() {\n    return Object.values(this.ctg).map((ctg) => ctg.color);\n  }\n\n  getAllCtgNames() {\n    return Object.keys(this.ctg);\n  }\n\n  getCategoryStatus(category) {\n    if (this.ctg.hasOwnProperty(category)) {\n      return this.ctg[category].active;\n    }\n  }\n\n  getCtgColor(ctg) {\n    return this.ctg[ctg].color;\n  }\n\n  getCtgLength(category) {\n    return this.store.filter((entry) => entry.category === category).length;\n  }\n\n  hasCtg(categoryName) {\n    let hasctg = false;\n    for (let key in this.ctg) {\n      if (key.toLowerCase() === categoryName.toLowerCase()) {\n        hasctg = true;\n      }\n    }\n    return hasctg;\n  }\n\n  /**\n   *\n   * @param {string} category\n   * @param {string} newCategory\n   */\n  moveCategoryEntriesToNewCategory(category, newCategory, newName) {\n    if (this.hasCtg(category) || newName === true) {\n      this.store.forEach((entry) => {\n        if (entry.category === category) {\n          entry.category = newCategory;\n        }\n      });\n      Store.setStore(this.store);\n    }\n    this.deleteCategory(category);\n  }\n\n  removeCategoryAndEntries(category) {\n    if (this.hasCtg(category)) {\n      this.store = this.store.filter((entry) => entry.category !== category);\n      Store.setStore(this.store);\n    }\n    this.deleteCategory(category);\n  }\n\n  setCategoryStatus(category, status) {\n    if (this.hasCtg(category)) {\n      this.ctg[category].active = status;\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  setAllCategoryStatusExcept(category, status) {\n    for (let key in this.ctg) {\n      if (key !== category) {\n        this.ctg[key].active = status;\n      } else {\n        this.ctg[key].active = !status;\n      }\n    }\n    Store.setCtg(this.ctg);\n  }\n\n  /**\n   *\n   * @param {string} categoryName\n   * @param {string} color\n   * @desc updates the color of a category\n   */\n  updateCtgColor(categoryName, color) {\n    if (this.hasCtg(categoryName)) {\n      this.ctg[categoryName].color = color;\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  getCtgIndex(category) {\n    return Object.keys(this.ctg).indexOf(category);\n  }\n\n  /**\n   *\n   * @param {string} newName\n   * @param {string} newColor\n   * @param {string} oldName\n   * @returns new category object\n   * @desc note that 'value' of [key, value] is necessary to segment the object, even if it is not directly referenced\n   */\n  updateCtg(newName, newColor, oldName) {\n    let entries = Object.entries(this.ctg);\n    let hasColor = newColor !== null;\n    let count = 0;\n    let length = entries.length;\n\n    const isNumeric = (n) => !isNaN(parseFloat(n)) && isFinite(n);\n    if (isNumeric(newName)) {\n      newName = \"category \" + newName;\n    }\n\n    for (let [key, value] of entries) {\n      count++;\n      if (count === 1) {\n        // changing the default category;\n        if (oldName === key) {\n          entries[0][0] = newName;\n          if (hasColor) {\n            entries[0][1].color = newColor;\n          }\n        }\n      } else {\n        if (oldName === key) {\n          entries[count - 1][0] = newName;\n          if (hasColor) {\n            entries[count - 1][1].color = newColor;\n          }\n        }\n      }\n    }\n    if (entries.length !== length) {\n      console.error(\"something went wrong with category name/color change\");\n      return;\n    } else {\n      this.ctg = Object.fromEntries(entries);\n      this.moveCategoryEntriesToNewCategory(oldName, newName, true);\n      Store.setCtg(this.ctg);\n    }\n  }\n  /* ********************* */\n\n  /* ***************************** */\n  /*  KEYBOARD SHORTCUT MANAGEMENT */\n  getShortcuts() {\n    return this.keyboardShortcuts;\n  }\n\n  setShortCut(shortcut) {\n    const keys = Object.keys(this.getShortcuts());\n    let idx = keys.indexOf(shortcut);\n    if (idx > -1) {\n      return `Shortcut (${shortcut}) is already in use`;\n    } else {\n      return;\n    }\n  }\n\n  setShortcutsStatus(status) {\n    this.keyboardShortcutsStatus = status;\n    Store.setShortcutsStatus(status);\n  }\n\n  getShortcutsStatus() {\n    const status = Store.getShortcutsStatus();\n    return status !== null ? status : true;\n  }\n  /* ***************************** */\n\n  /* ***************************** */\n  /*  ANIMATION MANAGEMENT */\n\n  getAnimationStatus() {\n    const status = Store.getAnimationStatus();\n    return status !== null ? status : true;\n  }\n\n  setAnimationStatus(status) {\n    this.animationStatus = status;\n    Store.setAnimationStatus(status);\n  }\n  /* ***************************** */\n\n  /* ******************** */\n  /*  OVERLAY MANAGEMENT */\n  // see readme @ --overlay management-- for more info\n  addActiveOverlay(overlay) {\n    this.activeOverlay.add(overlay);\n  }\n\n  removeActiveOverlay(overlay) {\n    const len = this.activeOverlay.size;\n    if (len === 0) {\n      return;\n    } else if (this.activeOverlay.size === 1) {\n      this.activeOverlay = new Set();\n      return;\n    } else {\n      this.activeOverlay = new Set(\n        [...this.activeOverlay].filter((o) => o !== overlay)\n      );\n      return;\n    }\n  }\n\n  getActiveOverlay() {\n    return this.activeOverlay;\n  }\n\n  hasActiveOverlay() {\n    return this.activeOverlay.size > 0;\n  }\n  /* ******************** */\n\n  /* ************************ */\n  /*  JSON UPLOAD & DOWNLOAD */\n  validateUserUpload(userUpload) {\n    const keys = Object.keys(userUpload);\n    let message = {};\n    if (keys.length > localStoreKeyNames.length) {\n      message.err1 = \"invalid number of keys (too many)\";\n    }\n\n    for (let i = 0; i < keys.length; i++) {\n      if (!localStoreKeyNames.includes(keys[i])) {\n        let errname = \"err\" + Object.keys(message).length;\n        message[errname] = \"invalid key: \" + keys[i];\n      }\n    }\n\n    if (Object.keys(message).length > 0) {\n      return message;\n    } else {\n      return true;\n    }\n  }\n\n  setUserUpload(userUpload) {\n    const validation = this.validateUserUpload(userUpload);\n    let validated;\n    if (validation === true) {\n      localStorage.clear();\n      validated = true;\n      for (const [key, value] of Object.entries(userUpload)) {\n        localStorage.setItem(key, value);\n      }\n    } else {\n      return validation;\n    }\n    if (validated) {\n      const refresh = localStorage.getItem(\"refresh\");\n      if (refresh === null) {\n        window.location.reload();\n        window.localStorage.setItem(\"refresh\", \"1\");\n      }\n    }\n  }\n\n  getUserUpload() {\n    return this.userUpload;\n  }\n  /* ************************ */\n\n  /* ******************************************* */\n  /*  STATE MANAGEMENT : RENDERING / RESET / RESIZE */\n  /**\n   * This got a bit more complicated than I anticipated, I'll come back to this later;\n   */\n  setFormRenderHandle(type, callback) {\n    this.handleRenders.calendars[type].render = callback;\n  }\n\n  setFormResetHandle(type, callback) {\n    this.handleRenders.calendars[type].reset = callback;\n  }\n\n  setRenderFormCallback(callback) {\n    this.handleRenders.form.callback = callback;\n  }\n\n  setRenderSidebarCallback(callback) {\n    this.handleRenders.sidebar.callback = callback;\n  }\n\n  setResizeHandle(type, callback) {\n    this.handleRenders.calendars[type].resize = callback;\n  }\n\n  setDataReconfigCallback(callback) {\n    this.handleRenders.reconfig.callback = callback;\n  }\n\n  setResetDatepickerCallback(callback) {\n    this.handleRenders.datepicker.reset = callback;\n  }\n\n  setResetPreviousViewCallback(callback) {\n    this.handleRenders.calendars[\"previous\"].reset = callback;\n  }\n\n  setRenderCategoriesCallback(callback) {\n    this.handleRenders.categories.callback = callback;\n  }\n\n  getRenderCategoriesCallback() {\n    return this.handleRenders.categories.callback;\n  }\n\n  getResetPreviousViewCallback() {\n    return this.handleRenders.calendars[\"previous\"].reset;\n  }\n\n  getResetDatepickerCallback() {\n    return this.handleRenders.datepicker.reset;\n  }\n\n  getDataReconfigCallback() {\n    return this.handleRenders.reconfig.callback;\n  }\n\n  getResizeHandle(type) {\n    if (this.handleRenders.calendars[type] === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].resize;\n    }\n  }\n\n  getFormRenderHandle(type) {\n    if (this.handleRenders.calendars[type] === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].render;\n    }\n  }\n\n  getFormResetHandle(type) {\n    if (this.handleRenders.calendars[type].reset === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].reset;\n    }\n  }\n\n  getRenderFormCallback() {\n    const callback = this.handleRenders.form.callback;\n    if (callback !== null) {\n      return callback;\n    } else {\n      return null;\n    }\n  }\n\n  getRenderSidebarCallback() {\n    const callback = this.handleRenders.sidebar.callback;\n    if (callback !== null) {\n      return callback;\n    } else {\n      return null;\n    }\n  }\n  /* ************************************ */\n}\n\n// single\nexport default new Store();\n","import { generateId } from \"../utilities/helpers\";\n\n/**\n * @class Entry\n * @param {String} id - Unique identifier\n * @param {String} title\n * @param {String} description\n * @param {Date} start\n * @param {Date} end\n * @param {String} category\n * @param {Boolean} completed\n * @param workout\n */\nexport default class Entry {\n  constructor (category, completed, description, end, start, title, duration=\"\", workout={}) {\n    this.category = category;\n    this.completed = completed;\n    this.description = description;\n    this.end = end;\n    this.id = generateId();\n    this.start = start;\n    this.title = title;\n    this.duration = duration;\n    this.workout = workout;\n  }\n}\n\nclass CoordinateEntry {\n  constructor (category, completed, coordinates, description, id, title) {\n    this.category = category;\n    this.completed = completed || false;\n    this.coordinates = coordinates || {};\n    this.description = description;\n    this.id = id;\n    this.title = title;\n  }\n}\n\n/**\n * @class Week\n * \n * @param {Array} dayEntries\n * @description Array of entries that span a single day.\n * \n * @param {Array} allDayEntries\n * @description Array of entries that span multiple days.\n */\nclass Week {\n  constructor (dayEntries, allDayEntries) {\n    this.boxes = dayEntries;\n    this.boxesTop = allDayEntries;\n  }\n\n  setAllBoxes(tempEntries) {\n    this.boxes = tempEntries.day;\n    this.boxesTop = tempEntries.allDay;\n  }\n\n  addBox(box) {\n    this.boxes.push(box);\n  }\n\n  addBoxTop(box) {\n    this.boxesTop.push(box);\n  }\n\n  getBox(id) {\n    return this.boxes.find(box => box.id === id);\n  }\n\n  getBoxes() {\n    return this.boxes;\n  }\n\n  getBoxesTop() {\n    return this.boxesTop;\n  }\n\n  getLength() {\n    return this.boxes.length;\n  }\n\n  getBoxesByColumn(col) {\n    return this.boxes.filter(box => +box.coordinates.x == col);\n  }\n\n  getBoxesByColumnTop(col) {\n    return this.boxesTop.filter(box => +box.coordinates.x == col);\n  }\n\n  getBoxesTopByDay(day) {\n    return this.boxesTop.filter(box => +box.coordinates.y == day);\n  }\n\n  getBoxesTopLengths() {\n    return this.getBoxesTop().reduce((a, c) => {\n      let start = new Date(c.start);\n      if (a[start.getDay()]) {\n        a[start.getDay()]++;\n      }\n      else {\n        a[start.getDay()] = 1;\n      }\n      return a;\n    }, {});\n  }\n\n  getColumnsWithMultipleBoxes() {\n    let temp = {};\n    let columns = [];\n    for (const box of this.boxes) {\n      if (temp[box.coordinates.x]) {\n        temp[box.coordinates.x]++;\n        if (temp[box.coordinates.x] === 2) {\n          columns.push(box.coordinates.x);\n        }\n      } else {\n        temp[box.coordinates.x] = 1;\n      }\n    }\n    return columns;\n  }\n\n  getEntriesByTitle(title) {\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\n  }\n\n  updateCoordinates(id, coordinates) {\n    this.getBox(id).coordinates = coordinates;\n  }\n\n  sortByY(bxs) {\n    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y);\n  }\n\n  checkForCollision(col) {\n    const bxs = this.getBoxesByColumn(col);\n    let overlaps = []; // a list to store the overlapping entries\n    for (let i = 0; i < bxs.length; i++) {\n      for (let j = i + 1; j < bxs.length; j++) {\n        const e1 = bxs[i];\n        const e2 = bxs[j];\n        if (e1.coordinates.y < e2.coordinates.e && e1.coordinates.e > e2.coordinates.y) {\n          if (!overlaps.includes(e1)) {\n            overlaps.push(e1);\n          }\n          if (!overlaps.includes(e2)) {\n            overlaps.push(e2);\n          }\n        }\n      }\n    }\n    return overlaps.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n  }\n  \n  updateStore(store, id, weekArray) {\n    const boxEntry = this.getBox(id);\n    const coords = boxEntry.coordinates;\n    let boxstart = +coords.y * 15;\n    let boxend = +coords.e * 15;\n    let day = weekArray[+coords.x];\n\n    const startDate = new Date(day);\n    const starthours = Math.floor(boxstart / 60);\n    const startminutes = boxstart % 60;\n    startDate.setHours(starthours);\n    startDate.setMinutes(startminutes);\n\n    const endDate = new Date(day);\n    const endhours = Math.floor(boxend / 60);\n    const endminutes = boxend % 60;\n    endDate.setHours(endhours);\n    endDate.setMinutes(endminutes);\n\n    store.updateEntry(id, {\n      start: startDate,\n      end: endDate,\n    });\n  }\n}\n/**\n * @class Week\n * \n * @param {Array} dayEntries\n * @description Array of entries that span a single day.\n * \n * @param {Array} allDayEntries\n * @description Array of entries that span multiple days.\n */\nclass Day {\n  constructor (dayEntries, allDayEntries) {\n    this.boxes = dayEntries;\n    this.boxesTop = allDayEntries;\n  }\n\n  setAllBoxes(tempEntries) {\n    this.boxes = tempEntries.day;\n    this.boxesTop = tempEntries.allDay;\n  }\n\n  addBox(box) {\n    this.boxes.push(box);\n  }\n\n  addBoxTop(box) {\n    this.boxesTop.push(box);\n  }\n\n  getBox(id) {\n    return this.boxes.find(box => box.id === id);\n  }\n\n  getBoxes() {\n    return this.boxes;\n  }\n\n  getBoxesTop() {\n    return this.boxesTop;\n  }\n\n  getAllBoxes() {\n    return [...this.boxes, ...this.boxesTop];\n  }\n\n  getLength() {\n    return this.boxes.length;\n  }\n\n  getBoxesTopLengths() {\n    return this.getBoxesTop().reduce((a, c) => {\n      let start = new Date(c.start);\n      if (a[start.getDay()]) {\n        a[start.getDay()]++;\n      }\n      else {\n        a[start.getDay()] = 1;\n      }\n      return a;\n    }, {});\n  }\n\n  getEntriesByTitle(title) {\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\n  }\n\n  updateCoordinates(id, coordinates) {\n    this.getBox(id).coordinates = coordinates;\n  }\n\n  getEntriesEndingOnDay(day) {\n    return this.boxes.filter(box => +box.coordinates.e === day);\n  }\n\n  sortByY(bxs) {\n    return bxs.sort((a, b) => {\n      let diff = +a.coordinates.y - +b.coordinates.y;\n      if (diff === 0) {\n        return +a.coordinates.e - +b.coordinates.e;\n      } else {\n        return diff;\n      }\n    });\n  }\n\n  checkForCollision() {\n    const bxs = this.getBoxes();\n    let overlaps = []; // a list to store the overlapping entries\n    // entries.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n    for (let i = 0; i < bxs.length; i++) {\n      for (let j = i + 1; j < bxs.length; j++) {\n        const e1 = bxs[i];\n        const e2 = bxs[j];\n        if (e1.coordinates.y < e2.coordinates.e && e1.coordinates.e > e2.coordinates.y) {\n          if (!overlaps.includes(e1)) {\n            overlaps.push(e1);\n          }\n          if (!overlaps.includes(e2)) {\n            overlaps.push(e2);\n          }\n        }\n      }\n    }\n    return overlaps.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n  }\n\n  updateStore(store, id) {\n    const boxEntry = this.getBox(id);\n    const coords = boxEntry.coordinates;\n    let boxstart = +coords.y * 15;\n    let boxend = +coords.e * 15;\n\n    const startDate = new Date(boxEntry.start);\n    const starthours = Math.floor(boxstart / 60);\n    const startminutes = boxstart % 60;\n    startDate.setHours(starthours);\n    startDate.setMinutes(startminutes);\n\n    const endDate = new Date(boxEntry.start);\n    let endhours = Math.floor(boxend / 60);\n    let endminutes = boxend % 60;\n    if (endhours === 24) {\n      endhours = 23;\n      endminutes = 59;\n    }\n    endDate.setHours(endhours);\n    endDate.setMinutes(endminutes);\n\n    store.updateEntry(id, {\n      start: startDate,\n      end: endDate,\n    });\n  }\n}\n\nexport {\n  CoordinateEntry,\n  Week,\n  Day,\n};","class MonthBoxQuery {\n  constructor (flag) {\n    this.flag = flag;\n    this.tops = [125, 125];\n    this.heights = [120, 120];\n    // this.tops = [16, 20];\n    // this.heights = [14, 18];\n  }\n\n  updateFlag() {\n    this.flag = window.innerWidth <= 530 || window.innerHeight <= 470;\n  }\n\n  getFlag() {\n    return this.flag;\n  }\n\n  getTop() {\n    const [a, b] = this.tops;\n    return this.flag ? a : b;\n  }\n\n  getHeight() {\n    const [a, b] = this.heights;\n    return this.flag ? a : b;\n  }\n\n  getPrevTop(top) {\n    const [a, b] = this.tops;\n    return top === a ? b : a;\n  }\n}\n\nexport default MonthBoxQuery;","/**\n * @class Entry\n * @param {String} id - Unique identifier\n * @param {String} title\n * @param {String} description\n * @param {Date} start\n * @param {Date} end\n * @param {String} category\n * @param {Boolean} is_workout\n */\n\nexport default class Workout {\n    constructor (tpWworkout) {\n      this.id = tpWworkout.workoutId\n      this.workoutDay=tpWworkout.workoutDay\n      this.title=tpWworkout.title\n      this.duration=this._format_time(tpWworkout.totalTimePlanned)\n      this.description=tpWworkout.description || \"\"\n      this.structure=tpWworkout.structure\n      this.tp_body = tpWworkout\n      this.is_workout = this.duration == '' ? false : true\n    }\n\n    toEntry(){\n        // category = default\n        // desc from entry\n        // title from entry\n        // start = new Date(workoutDay)\n        // end = new Date(workoutDay)\n        // end needs to be updated in place to get different hour\n        let desc = this.description\n        if (!desc){\n            desc = this.title\n        }\n        let end_date = new Date(this.workoutDay)\n        end_date.setHours(2)\n        return [\n            \"default\",\n            false,\n            desc,\n            end_date,\n            new Date(this.workoutDay),\n            this.title,\n            this.duration,\n            this\n        ]\n    }\n\n    _format_time(hours){\n        if (hours) {\n        // Get the whole number part for hours\n        let h = Math.floor(hours);\n        \n        // Get the fractional part and convert to minutes\n        let m = Math.floor((hours - h) * 60);\n        \n        // Get the remaining fractional part and convert to seconds\n        let s = Math.floor(((hours - h) * 60 - m) * 60);\n        \n        // Pad the numbers with leading zeros if necessary\n        let hStr = String(h).padStart(2, '0');\n        let mStr = String(m).padStart(2, '0');\n        let sStr = String(s).padStart(2, '0');\n        \n        // Combine into HH:mm:ss format\n        return `${hStr}:${mStr}:${sStr}`;\n        }\n        else return ''\n    }\n}\n\n\n\n","export default {\n  labels: {\n    monthsLong: [\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    monthsShortLower: [\n      'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'\n    ],\n    monthsLongLower: [\n      'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'\n    ],\n    monthsShort: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ],\n    weekdaysLong: [\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    weekdaysShort: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n    ],\n    weekdaysNarrow: [\n      'S', 'M', 'T', 'W', 'T', 'F', 'S'\n    ],\n\n  },\n\n  /*\n    - the following are colors for calendar categories\n  */\n  colors: {\n    red: {\n      1: '#DF2A79',\n      2: '#A51955',\n      3: '#73113C',\n      4: '#C20000',\n      5: '#9D0000',\n      6: '#690000',\n      7: '#460000',\n    },\n\n    orange: {\n      1: '#EE756A',\n      2: '#E84334',\n      3: '#E77C2B',\n      4: '#D56A18',\n      5: '#954A11',\n      6: '#6B350C',\n      7: '#402007',\n    },\n\n    green: {\n      1: '#1E9E98',\n      2: '#1A8A84',\n      3: '#167671',\n      4: '#115855',\n      5: '#0F4E4B',\n      6: '#09312F',\n      7: '#072726',\n    },\n\n    blue: {\n      1: '#14489A',\n      2: '#125ab8',\n      3: '#5578D7',\n      4: '#2C52BA',\n      5: '#234295',\n      6: '#1B3375',\n      7: '#142555',\n    },\n\n    purple: {\n      1: '#42338B',\n      2: '#513FAB',\n      3: '#614E7A',\n      4: '#604793',\n      5: '#49356F',\n      6: '#342650',\n      7: '#271D3C',\n    },\n\n    grey: {\n      1: '#858F93',\n      2: '#4D5458',\n      3: '#272B2C',\n      4: '#202B31',\n      5: '#2C3C44',\n      6: '#384C56',\n      7: '#516C7B',\n    },\n  },\n};","export default {\n  0: { shortcut: '0', action: \"change app theme\" },\n  1: { shortcut: ['1', 'D'], action: 'open day view' },\n  2: { shortcut: ['2', 'W'], action: 'open week view' },\n  3: { shortcut: ['3', 'M'], action: 'open month view' },\n  4: { shortcut: ['4', 'Y'], action: 'open year view' },\n  5: { shortcut: ['5', 'L'], action: 'open list view' },\n  6: { shortcut: 'v', action: 'toggle view options' },\n  7: { shortcut: 't', action: 'set date to today' },\n  8: { shortcut: \"g\", action: 'enter date manually' },\n  9: { shortcut: \"n\", action: 'next period' },\n  10: { shortcut: \"p\", action: 'previous period' },\n  11: { shortcut: 's', action: 'toggle sidebar' },\n  12: { shortcut: 'f', action: 'open form' },\n  13: { shortcut: '+', action: 'open new category form' },\n  14: { shortcut: 'a', action: 'open settings' },\n  15: { shortcut: ['/', '?'], action: 'open keyboard shortcuts' },\n  16: { shortcut: \"e\", action: '(entry options) opens form with entry details' },\n  17: {\n    shortcut: '', action: [\n      '(datepicker) set date to next month/week',\n      '(yearpicker) set year to next year'\n    ]\n  },\n  18: {\n    shortcut: '', action: [\n      '(datepicker) set date to prev month/week',\n      '(yearpicker) set year to prev year'\n    ]\n  },\n  19: {\n    shortcut: '', action: [\n      '(datepicker) set date to prev day',\n      '(monthpicker) set month to prev month',\n    ]\n  },\n  20: {\n    shortcut: '', action: [\n      '(datepicker) set date to next day',\n      '(monthpicker) set month to next month',\n    ]\n  },\n  21: { shortcut: 'DELETE', action: '(entry options) delete entry' },\n  22: {\n    shortcut: 'ENTER', action: [\n      '(datepicker) set date to selected date',\n      '(form) submit form',\n    ]\n  },\n  23: { shortcut: \"ESCAPE\", action: 'close any active modal/popup/form' },\n};","import { formatTime, formatStartEndTimes } from \"./timeutils\";\nimport locales from \"../locales/en\";\nconst labels = locales.labels;\nconst monthNames = labels.monthsShort;\n\nexport default function createDate(year, month, day) {\n  const pad = (num) => { return num < 10 ? `0${num}` : num; };\n  Date.prototype.toCustomISO = function () {\n    return this.getFullYear() +\n      '-' + pad(this.getMonth() + 1) +\n      '-' + pad(this.getDate()) +\n      'T' + pad(this.getHours()) +\n      ':' + pad(this.getMinutes()) +\n      ':' + pad(this.getSeconds()) +\n      '.' + (this.getMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n      'Z';\n  };\n  if (!year && !month && !day) {\n    return new Date().toCustomISO();\n  } else {\n    return new Date(year, month, day, 0, 0, 0, 0).toCustomISO().slice(0, 10);\n  }\n}\n\nfunction testDate(date) {\n  return date instanceof Date && !isNaN(date) ? date : new Date(date);\n}\n\nfunction getDateFormatted(date) {\n  date = testDate(date);\n  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n}\n\nfunction getDateForStore(date) {\n  date = testDate(date);\n  return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;\n}\n\nfunction getdatearray(date) {\n  return [+date.getFullYear(), +date.getMonth() + 1, +date.getDate()];\n}\n\nfunction formatDateForDisplay(date) {\n  date = testDate(date);\n  const month = locales.labels.monthsShort[date.getMonth()];\n  const day = date.getDate();\n  let hours = date.getHours();\n  let minutes = date.getMinutes();\n  hours = hours < 10 ? `0${hours}` : hours;\n  minutes = minutes < 10 ? `0${minutes}` : minutes;\n  let hm = `${hours}:${minutes}`;\n  return `${month} ${day} ${date.getFullYear()}, (${hm}) `;\n}\n\nfunction compareDates(date1, date2) {\n  [date1, date2] = [testDate(date1), testDate(date2)];\n  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n}\n\nfunction formatDuration(seconds) {\n  let time = { year: 31536000, day: 86400, hour: 3600 },\n    res = [];\n  if (seconds === 0) return 'now';\n  for (let key in time) {\n    if (seconds >= time[key]) {\n      let val = Math.floor(seconds / time[key]);\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\n      seconds = seconds % time[key];\n    }\n  }\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\n}\n\nfunction formatDurationHourMin(seconds) {\n  let time = { hour: 3600, minute: 60 },\n    res = [];\n  if (seconds === 0) return 'now';\n  for (let key in time) {\n    if (seconds >= time[key]) {\n      let val = Math.floor(seconds / time[key]);\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\n      seconds = seconds % time[key];\n    }\n  }\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\n}\n\nfunction formatStartEndDate(start, end, flag) {\n  [start, end] = [testDate(start), testDate(end)];\n\n  const [startday, startmonth, startyear] = [\n    start.getDate(),\n    monthNames[start.getMonth()],\n    start.getFullYear()\n  ];\n\n  const [endday, endmonth, endyear] = [\n    end.getDate(),\n    monthNames[end.getMonth()],\n    end.getFullYear()\n  ];\n\n  let tempstartyear = startyear;\n  let tempendyear = endyear;\n  if (flag) {\n    tempstartyear = startyear.toString().slice(2, 4);\n    tempendyear = endyear.toString().slice(2, 4);\n  }\n\n  if (startyear === endyear) {\n    if (startmonth === endmonth) {\n      if (startday === endday) {\n        // same : day, month, year\n        return `${startmonth} ${startday} ${startyear}`;\n      } else {\n        // same : month, year\n        return `${startmonth} ${startday}  ${endday}, ${startyear}`;\n      }\n    } else {\n      // same : year\n      return `${startmonth} ${startday}  ${endmonth} ${endday}, ${startyear}`;\n    }\n  } else {\n    // same : nothing\n    return `${startmonth} ${startday}, ${tempstartyear}  ${endmonth} ${endday}, ${tempendyear}`;\n  }\n}\n\nfunction formatStartEndTime(start, end) {\n  [start, end] = [new Date(start), new Date(end)];\n  let startmin = start.getMinutes();\n  let endmin = end.getMinutes();\n  endmin = endmin % 15 === 0 ? endmin : endmin + (15 - (endmin % 15));\n  startmin = startmin % 15 === 0 ? startmin : startmin + (15 - (startmin % 15));\n  let starttime = formatTime(start.getHours(), startmin);\n  let endtime = formatTime(end.getHours(), endmin);\n  if (starttime.slice(-2) === endtime.slice(-2)) {\n    starttime = starttime.slice(0, -2);\n  }\n  return `${starttime}  ${endtime}`;\n}\n\nfunction getDuration(start, end) {\n  [start, end] = [new Date(start), new Date(end)];\n  const duration = formatDuration((Math.floor(end.getTime() / 1000)) - (Math.floor(start.getTime() / 1000)));\n  if (duration === undefined) {\n    return \"completed\";\n  } else {\n    return duration;\n  }\n}\n\nfunction createDateFromFormattedString(dateString) {\n  const dateArray = dateString.split(\"-\");\n  return new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);\n}\n\nfunction isBeforeDate(date1, date2) {\n  [date1, date2] = [new Date(date1), new Date(date2)];\n  return date1.getTime() < date2.getTime();\n}\n\nfunction isDate(value) {\n  return value instanceof Date && !isNaN(value);\n}\n\nfunction getDateFromAttribute(target, attribute, view) {\n  return target.getAttribute(attribute).split(\"-\").map((x, i) => {\n    if (view === \"month\") {\n      return i === 1 ? parseInt(x) - 1 : parseInt(x);\n    } else {\n      return parseInt(x);\n    }\n  });\n}\n\nfunction getTimeFromAttribute(target, attribute) {\n  return target.getAttribute(attribute).split(\":\").map((x) => {\n    return parseInt(x);\n  });\n}\n\nfunction getDateTimeFormatted(date, hour, minute) {\n  date = testDate(date);\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    parseInt(hour),\n    parseInt(minute),\n    1,\n    1,\n  );\n}\n\nfunction getTempDates(tempdate, hours, minutes) {\n  tempdate = testDate(tempdate);\n  return [\n    getDateTimeFormatted(tempdate, hours[0], minutes[0]),\n    getDateTimeFormatted(tempdate, hours[1], minutes[1]),\n  ];\n}\n\nfunction generateTempStartEnd(data) {\n  let tempdate = new Date();\n\n  const [year, month, day] = data;\n  let startDate = new Date(year, month, day);\n  startDate.setHours(tempdate.getHours());\n  startDate.setMinutes(0);\n\n  let endDate = new Date(startDate);\n  endDate.setHours(tempdate.getHours());\n  endDate.setMinutes(30);\n\n  return [startDate, endDate];\n}\n\nfunction getFormDateObject(start, end) {\n  [start, end] = [testDate(start), testDate(end)];\n\n  const setmin = min => min === 0 ? \"00\" : min;\n  return {\n    dateObj: [start, end],\n    minutes: [setmin(start.getMinutes()), setmin(end.getMinutes())],\n    formatted: [getDateForStore(start), getDateForStore(end)],\n  };\n}\n\nfunction sortDates(dates, dir) {\n  return dates.sort((a, b) => {\n    let [date1, date2] = [new Date(a), new Date(b)];\n    if (dir === \"asc\") {\n      return date1 - date2;\n    } else {\n      return date2 - date1;\n    }\n  });\n}\n\nfunction getDurationSeconds(date1, date2) {\n  return (Math.floor(date2.getTime() / 1000)) - (Math.floor(date1.getTime() / 1000));\n}\n\nfunction formatEntryOptionsDate(date1, date2) {\n  let [y1, y2] = [date1.getFullYear(), date2.getFullYear()];\n  let [m1, m2] = [date1.getMonth(), date2.getMonth()];\n  let [d1, d2] = [date1.getDate(), date2.getDate()];\n  let [h1, h2] = [date1.getHours(), date2.getHours()];\n  let [min1, min2] = [date1.getMinutes(), date2.getMinutes()];\n\n  let useTempDate = false;\n  let tempdateone = new Date();\n  if (isBeforeDate(date1, tempdateone)) {\n    useTempDate = true;\n  }\n  // if same day, month, & year -- return time as start-end\n  // otherwise, return time as duration between start & end\n  if (y1 === y2) {\n    if (m1 === m2) {\n      if (d1 === d2) {\n        // === year, month, day\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n        let durationTime = formatDurationHourMin(duration);\n        return {\n          date: `${labels.monthsLong[m1]} ${d1}, ${y1} (${formatStartEndTimes([h1, h2], [min1, min2])})`,\n          time: durationTime,\n        };\n      } else {\n        // === year, month\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n        let durationTime = formatDuration(duration);\n        return {\n          date: `${labels.monthsLong[m1]} ${d1}  ${d2}, ${y1}`,\n          time: durationTime,\n        };\n      }\n    } else {\n      // === year\n      let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n      let durationTime = formatDuration(duration);\n      return {\n        date: `${labels.monthsShort[m1]} ${d1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\n        time: durationTime,\n      };\n    }\n  } else {\n    // different year --- return full date\n    let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n    let durationTime = formatDuration(duration);\n    return {\n      date: `${labels.monthsShort[m1]} ${d1}, ${y1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\n      time: durationTime,\n    };\n  }\n}\n\nfunction createTimestamp() {\n  const date = new Date();\n  const year = date.getFullYear().toString().slice(-2);\n  const month = monthNames[date.getMonth()].toUpperCase();\n  const day = parseInt(date.getDate());\n  return `${month}${day}`;\n}\n\nfunction longerThanDay(date1, date2) {\n  return getDurationSeconds(date1, date2) > 86400;\n}\n\nfunction getDayOrdinal(day) {\n  if (day > 3 && day < 21) return 'th';\n  switch (day % 10) {\n    case 1: return \"st\";\n    case 2: return \"nd\";\n    case 3: return \"rd\";\n    default: return \"th\";\n  }\n}\n\nexport {\n  testDate,\n  getDateFormatted,\n  getDateForStore,\n  getdatearray,\n  formatDateForDisplay,\n  formatDuration,\n  compareDates,\n  createDateFromFormattedString,\n  formatStartEndDate,\n  formatStartEndTime,\n  getDuration,\n  isBeforeDate,\n  isDate,\n  getDateFromAttribute,\n  getTimeFromAttribute,\n  getDateTimeFormatted,\n  getTempDates,\n  generateTempStartEnd,\n  getFormDateObject,\n  sortDates,\n  formatEntryOptionsDate,\n  getDurationSeconds,\n  createTimestamp,\n  longerThanDay,\n  getDayOrdinal,\n};","import calcTime from \"./timeutils\";\n\n/**\n * For a full explanation see readme @grid-engines\n * \n * The weekiew & dayview drag/resize systems are 90% similar with the only difference of course being some additional calculations to drag between days in the weekview.\n * \n * \n * All drag / resize events throughout each view follow these steps;\n * -- capture :\n * document.onmousedown captures the position of cursor & defines variables for start/end points\n * \n * -- relay :\n * document.onmousemove relays the new position to start/end point variables, which in turn relay a new set of styling rules to the element target (entry) \n * \n * -- render :\n * document.onmouseup intitiates all render logic\n * \n */\n\nconst identifiers = {\n  boxnumarr: {\n    week: [\n      'box-one', 'box-two', 'box-three',\n      'box-four', 'box-five', 'box-six',\n      'box-seven', 'box-eight', 'box-nine',\n      'box-ten', 'box-eleven', 'box-twelve',\n      'box-thirteen', 'box-fourteen', 'box-fifteen',\n    ],\n    day: [\n      'dv-box-one', 'dv-box-two', 'dv-box-three',\n      'dv-box-four', 'dv-box-five', 'dv-box-six',\n      'dv-box-seven', 'dv-box-eight', 'dv-box-nine',\n      'dv-box-ten', 'dv-box-eleven', 'dv-box-twelve',\n      'dv-box-thirteen', 'dv-box-fourteen', 'dv-box-fifteen',\n    ],\n  },\n\n  boxClasses: {\n    week: {\n      base: \"box\",\n      ontop: \"box-ontop\",\n      active: \"box-mv-dragactive\",\n      temporary: \"temporary-box\",\n      prepend: \"box-\",\n    },\n    day: {\n      base: \"dv-box\",\n      ontop: \"dv-box-ontop\",\n      active: \"dv-box-mv-dragactive\",\n      temporary: \"dv-temporary-box\",\n      prepend: \"dv-box-\",\n    },\n  },\n\n  boxAttributes: {\n    week: {\n      updatecoord: [\n        \"data-box-id\",\n        \"data-start-time\",\n        \"data-time-intervals\"\n      ],\n      dataIdx: \"box-idx\",\n      dataId: \"data-box-id\",\n      dataCol: \"data-box-col\",\n      prepend: \"data-\",\n      prepentwo: \"data-wv-\"\n    },\n    day: {\n      updatecoord: [\n        \"data-dv-box-id\",\n        \"data-dv-start-time\",\n        \"data-dv-time-intervals\",\n      ],\n      dataIdx: \"data-dv-box-index\",\n      dataId: \"data-dv-box-id\",\n      prepend: \"data-dv-\",\n      prepentwo: \"data-dv-\"\n    },\n  },\n\n  styles: {\n    newBox: {\n      left: \"calc((100% - 0px) * 0 + 0px)\",\n      height: \"12.5px\",\n      width: \"calc((100% - 4px) * 1)\",\n    }\n  }\n};\n\nfunction calcNewLeft(index) {\n  let base = 0.1;\n  let add = 0.05;\n\n  if (index === 0) {\n    return 0;\n  }\n\n  if (index >= 1 && index <= 5) {\n    return (index * add) + base;\n  }\n}\n\n\n// *** I'm using a temporary switch statement to try and fine tune the collision handling for now\nfunction setBoxWidthWeek(box, prepend, dataidx) {\n  const attr = box.getAttribute(dataidx);\n  switch (attr) {\n    case `${prepend}one`:\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n      box.style.width = \"calc((100% - 4px) * 1)\";\n      break;\n    case `${prepend}two`:\n      box.style.left = \"calc((100% - 0px) * 0.2 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.80)\";\n      break;\n    case `${prepend}three`:\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\n      break;\n    case `${prepend}four`:\n      box.style.left = \"calc((100% - 0px) * 0.0 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.44)\";\n      break;\n    case `${prepend}five`:\n      box.style.left = \"calc((100% - 0px) * .5 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\n      break;\n    case `${prepend}six`:\n      box.style.left = \"calc((100% - 0px) * 0.1 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.4)\";\n      break;\n    case `${prepend}seven`:\n      box.style.left = \"calc((100% - 0px) * 0.5 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.5)\";\n      break;\n    case `${prepend}eight`:\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\n      break;\n    case `${prepend}nine`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\n      break;\n    case `${prepend}ten`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eleven`:\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}twelve`:\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}thirteen`:\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fourteen`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fifteen`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    default:\n      break;\n  }\n}\n\nfunction setBoxWidthDay(box, prepend, dataidx) {\n  const attr = box.getAttribute(dataidx);\n  switch (attr) {\n    case `${prepend}one`:\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n      box.style.width = \"calc((100% - 4px) * 1)\";\n      break;\n    case `${prepend}two`:\n      box.style.left = \"calc((100% - 0px) * 0.15 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.85)\";\n      break;\n    case `${prepend}three`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.70)\";\n      break;\n    case `${prepend}four`:\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\n      break;\n    case `${prepend}five`:\n      box.style.left = \"calc((100% - 0px) * 0.60 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.40)\";\n      break;\n    case `${prepend}six`:\n      box.style.left = \"calc((100% - 0px) * 0.75 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\n      break;\n    case `${prepend}seven`:\n      box.style.left = \"calc((100% - 0px) * 0.10 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eight`:\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}nine`:\n      box.style.left = \"calc((100% - 0px) * 0.4 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}ten`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eleven`:\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}twelve`:\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}thirteen`:\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fourteen`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fifteen`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    default:\n      break;\n  }\n}\nfunction handleOverlap(col, view, boxes) {\n\n  const collisions = view === \"day\" ? boxes.checkForCollision() : boxes.checkForCollision(col);\n  // console.log(boxes)\n\n  const identifyBox = identifiers.boxnumarr[view];\n\n  const [baseClass, classPrepend] = [\n    identifiers.boxClasses[view],\n    identifiers.boxClasses[view].prepend,\n  ];\n\n  const [boxIdxAttr, boxIdAttr] = [\n    identifiers.boxAttributes[view].dataIdx,\n    identifiers.boxAttributes[view].dataId,\n  ];\n\n  for (let i = 0; i < collisions.length; i++) {\n    const box = document.querySelector(`[${boxIdAttr}=\"${collisions[i].id}\"]`);\n    let idx = i;\n    if (i >= 15) {\n      idx -= 12;\n    }\n    if (i === 0) {\n      box.setAttribute(\"class\", `${baseClass.base} ${identifyBox[idx]}`);\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\n    } else {\n      box.setAttribute(\"class\", `${baseClass.base} ${baseClass.ontop} ${identifyBox[idx]}`);\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\n    }\n    view === \"day\"\n      ? setBoxWidthDay(box, classPrepend, boxIdxAttr)\n      : setBoxWidthWeek(box, classPrepend, boxIdxAttr);\n  }\n}\n\nfunction setStylingForEvent(clause, wrapper, store) {\n  const sidebar = document.querySelector(\".sidebar\");\n  const resizeoverlay = document.querySelector(\".resize-overlay\");\n\n  switch (clause) {\n    case \"dragstart\":\n      // make sidebar slightly see through if it is open and the user is dragging or resizing (screens smaller than 840px);\n      if (!sidebar.classList.contains(\"hide-sidebar\")) {\n        if (wrapper.offsetLeft === 0) {\n          sidebar.classList.add(\"sidebar--dragged-over\");\n        }\n      }\n      store.addActiveOverlay(\"hide-resize-overlay\");\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n      break;\n    case \"dragend\":\n      store.removeActiveOverlay(\"hide-resize-overlay\");\n      sidebar.classList.remove(\"sidebar--dragged-over\");\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      document.body.style.cursor = \"default\";\n      break;\n    default:\n      break;\n  }\n}\n\nfunction updateBoxCoordinates(box, view, boxes) {\n  let [id, y, h] = identifiers.boxAttributes[view].updatecoord.map((x) => {\n    return box.getAttribute(x);\n  });\n  let x = view === \"week\" ? box.getAttribute(\"data-box-col\") : 1;\n  boxes.updateCoordinates(id, {\n    x: parseInt(x),\n    y: parseInt(y),\n    h: parseInt(h),\n    e: parseInt(y) + parseInt(h),\n  });\n}\n\nfunction setBoxTimeAttributes(box, view) {\n  let start = +box.style.top.split(\"px\")[0];\n  start = start >= 0 ? start / 12.5 : 0;\n  let length = +box.style.height.split(\"px\")[0] / 12.5;\n  let end = start + length;\n  let prepend = identifiers.boxAttributes[view].prepend;\n  box.setAttribute(`${prepend}start-time`, start);\n  box.setAttribute(`${prepend}time-intervals`, length);\n  box.setAttribute(`${prepend}end-time`, end);\n}\n\nfunction createBox(col, entry, view, color) {\n  const baseClass = identifiers.boxClasses[view].base;\n  const attrPrepend = identifiers.boxAttributes[view].prepend;\n  const attrPrependTwo = identifiers.boxAttributes[view].prependtwo;\n  const coord = entry.coordinates;\n\n  const box = document.createElement('div');\n  box.classList.add(baseClass);\n  box.style.backgroundColor = color;\n  box.style.top = `${+coord.y * 12.5}px`;\n  box.style.height = `${+coord.h * 12.5}px`;\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n  box.style.width = \"calc((100% - 4px) * 1)\";\n\n  const boxheader = document.createElement('div');\n  boxheader.classList.add(`${baseClass}__header`);\n  const entryTitle = document.createElement('div');\n  entryTitle.classList.add(`${baseClass}-title`);\n  entryTitle.textContent = entry.title;\n  boxheader.appendChild(entryTitle);\n\n  const boxcontent = document.createElement('div');\n  boxcontent.classList.add(`${baseClass}__content`);\n  const entryTime = document.createElement('span');\n  entryTime.classList.add(`${baseClass}-time`);\n  boxcontent.appendChild(entryTime);\n\n  const resizehandleS = document.createElement('div');\n  resizehandleS.classList.add(`${baseClass}-resize-s`);\n\n  if (col.getAttribute(`${attrPrependTwo}top`) === \"true\") {\n    box.setAttribute(`${attrPrependTwo}start`, coord.x);\n    box.setAttribute(`${attrPrependTwo}end`, coord.x2);\n  } else {\n    box.setAttribute(`${attrPrepend}start-time`, coord.y);\n    box.setAttribute(`${attrPrepend}time-intervals`, coord.h);\n    box.setAttribute(`${attrPrepend}end-time`, +coord.y + +coord.h);\n    if (view === \"week\") {\n      box.setAttribute(\"data-box-col\", coord.x);\n      box.setAttribute(\"box-idx\", 1);\n    } else {\n      box.setAttribute(\"data-dv-box-index\", 1);\n    }\n    entryTime.textContent = calcTime(coord.y, +coord.h);\n  }\n\n  box.setAttribute(`${attrPrepend}box-id`, entry.id);\n  box.setAttribute(`${attrPrepend}box-category`, entry.category);\n  box.append(boxheader, boxcontent, resizehandleS);\n  col.appendChild(box);\n}\n\nfunction createTemporaryBox(box, col, hasSibling, view) {\n  const clone = box.cloneNode(true);\n  clone.classList.add(`${identifiers.boxClasses[view].temporary}`);\n  if (hasSibling) {\n    col.insertBefore(clone, box.nextElementSibling);\n  } else {\n    col.appendChild(clone);\n  }\n}\n\nfunction getBoxDefaultStyle(y, backgroundColor) {\n  const style = identifiers.styles.newBox;\n  return `top:${y}px; left:${style.left}; height:${style.height}; width:${style.width}; background-color:${backgroundColor};`;\n}\n\nfunction resetStyleOnClick(view, box) {\n  box.setAttribute(\"class\", identifiers.boxClasses[view].base);\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n  box.style.width = \"calc((100% - 4px) * 1)\";\n}\n\nfunction createTempBoxHeader(view) {\n  const baseClass = identifiers.boxClasses[view].base;\n  const boxheader = document.createElement('div');\n  const boxtitle = document.createElement('div');\n  boxheader.classList.add(`${baseClass}__header`);\n  boxtitle.classList.add(`${baseClass}-title`);\n  boxtitle.textContent = \"(no title)\";\n  boxheader.appendChild(boxtitle);\n  return boxheader;\n}\n\nfunction startEndDefault(y) {\n  let tempstarthour = Math.floor((y / 12.5) / 4);\n  let tempstartmin = Math.floor((y / 12.5) % 4) * 15;\n  return [\n    tempstarthour,        // start hour\n    tempstartmin,         // start minute\n    tempstarthour,        // end hour\n    +tempstartmin + 15    // end minute\n  ];\n}\n\nfunction calcNewHourFromCoords(h, y) {\n  return Math.floor(((h + y) / 12.5) / 4);\n}\n\nfunction calcNewMinuteFromCoords(h, y) {\n  return Math.floor(((h + y) / 12.5) % 4) * 15;\n}\n\nfunction calcDateOnClick(date, start, length) {\n  let [startDate, endDate] = [new Date(date), new Date(date)];\n  startDate.setHours(Math.floor(+start / 4));\n  startDate.setMinutes((+start * 15) % 60);\n  endDate.setHours(Math.floor((start + length) / 4));\n  endDate.setMinutes(((start + length) * 15) % 60);\n  return [startDate, endDate];\n}\n\nfunction getOriginalBoxObject(box) {\n  return {\n    height: box.style.height,\n    left: box.style.left,\n    width: box.style.width,\n    class: box.getAttribute(\"class\"),\n  };\n}\n\nfunction resetOriginalBox(box, boxorig) {\n  box.setAttribute(\"class\", boxorig.class);\n  box.style.left = boxorig.left;\n  box.style.width = boxorig.width;\n}\n\nexport default handleOverlap;\nexport {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  calcNewHourFromCoords,\n  calcNewMinuteFromCoords,\n  calcDateOnClick,\n  getOriginalBoxObject,\n  resetOriginalBox\n};","/**\n * \n * @param {callback} func \n * @param {number} limit \n * @returns strict debounce \n */\nfunction debounce(func, limit) {\n  let timeoutId;\n  return function (...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(this, args), limit);\n  };\n}\n/**\n * \n * @param {*} e \n * @param {*} element \n * \n * With the exception of popup modals, all events in the app\n * are delegated from their parent element.\n */\nfunction getClosest(e, element) {\n  return e.target.closest(element);\n}\n\nfunction hextorgba(hex, alpha) {\n  let r = 0, g = 0, b = 0, a = alpha;\n  r = \"0x\" + hex[1] + hex[2];\n  g = \"0x\" + hex[3] + hex[4];\n  b = \"0x\" + hex[5] + hex[6];\n  return \"rgba(\" + +r + \",\" + +g + \",\" + +b + \",\" + a + \")\";\n}\n\nfunction generateId() {\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\n}\n\nconst throttle = (fn, wait) => {\n  let inThrottle, lastFn, lastTime;\n  return function () {\n    const context = this,\n      args = arguments;\n    if (!inThrottle) {\n      fn.apply(context, args);\n      lastTime = Date.now();\n      inThrottle = true;\n    } else {\n      clearTimeout(lastFn);\n      lastFn = setTimeout(function () {\n        if (Date.now() - lastTime >= wait) {\n          fn.apply(context, args);\n          lastTime = Date.now();\n        }\n      }, Math.max(wait - (Date.now() - lastTime), 0));\n    }\n  };\n};\n\n\nfunction setTheme(context) {\n  const appBody = document.querySelector(\".body\");\n  const colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\n  const currentScheme = context.getColorScheme();\n  const hasLightMode = appBody.classList.contains(\"light-mode\");\n  const hasContrastMode = appBody.classList.contains(\"contrast-mode\");\n\n  const setColorSchema = () => {\n    if (currentScheme === \"light\" && hasLightMode && !hasContrastMode) {\n      return;\n    } else if (currentScheme === \"dark\" && !hasLightMode && !hasContrastMode) {\n      return;\n    } else if (currentScheme === \"contrast\" && hasContrastMode && !hasLightMode) {\n      return;\n    }\n\n    const setlight = () => {\n      context.setColorScheme(\"light\");\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\n      appBody.classList.remove(\"contrast-mode\");\n      appBody.classList.add(\"light-mode\");\n    };\n\n    const setdark = () => {\n      context.setColorScheme(\"dark\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setcontrast = () => {\n      context.setColorScheme(\"contrast\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.add(\"contrast-mode\");\n    };\n\n    if (currentScheme === \"light\") {\n      setlight();\n      return;\n    }\n\n    if (currentScheme === \"contrast\") {\n      setcontrast();\n      return;\n    }\n\n    if (currentScheme === \"dark\") {\n      setdark();\n      return;\n    }\n  };\n  setColorSchema();\n}\n\n\n\n/**\n * \n * @param {number} popupWidth \n * @param {number} popupHeight \n * @param {array} coords [x: e.clientX, y: e.clientY]\n * @param {array} windowCoords [x: window.innerWidth, y: window.innerHeight]\n * @param {boolean} center should popup be centered ?\n * @param {number} targetWidth if center is true, targetWidth required to center\n * @returns [left position, top position];\n */\nfunction placePopup(popupWidth, popupHeight, coords, windowCoords, center, targetWidth) {\n  const [popupW, popupH] = [popupWidth, popupHeight];\n  const [x, y] = coords;\n  const [winW, winH] = windowCoords;\n\n  let popupX;\n  if (center) {\n    popupX = x - (popupW / 2) + (targetWidth / 2);\n    if (popupWidth + x + 4 >= winW) {\n      popupX = winW - popupW - 4;\n    }\n  } else {\n    popupX = x + popupW > winW ? x - popupW - 6 : x;\n  }\n\n  let popupY = y + popupH > winH ? winH - popupH - 6 : y;\n\n  if (popupX < 0) popupX = Math.abs(popupX);\n  if (popupY < 0) popupY = 56;\n  return [popupX, popupY];\n}\n\nfunction isNumeric(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n\nexport default debounce;\nexport {\n  getClosest,\n  hextorgba,\n  generateId,\n  throttle,\n  setTheme,\n  placePopup,\n  isNumeric\n}; ","let n = 40;\nexport default n;\n\nconst createStatusIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  icon.classList.add(\"lvhi-status--icon\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCategoryIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\");\n  icon.classList.add(\"lvhi-category--icon\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createEditIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createPencilIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L3 16.82V21h4.18L20.41 7.77c.79-.78.79-2.05 0-2.83zm-14 14.12L5 19v-1.36l9.82-9.82 1.41 1.41-9.82 9.83z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createTrashIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M9 8h2v9H9zm4 0h2v9h-2z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCloseIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createCaretDownIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18\");\n  icon.setAttribute(\"width\", \"18\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M7 10l5 5 5-5z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCaretUpIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18\");\n  icon.setAttribute(\"width\", \"18\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0V0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M7 14l5-5 5 5H7z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCaretRightIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"m6 18.167-1.583-1.584L11 10 4.417 3.417 6 1.833 14.167 10Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createCheckIcon = (fill) => {\n  // <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18px\");\n  icon.setAttribute(\"width\", \"18px\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white2)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCheckBoxIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white2)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"m10.6 16.2 7.05-7.05-1.4-1.4-5.65 5.65-2.85-2.85-1.4 1.4ZM5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14ZM5 5v14V5Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createMeatballVertIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white4)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createExpandDownIcon = (fill) => {\n  {/* <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/></svg> */ }\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18px\");\n  icon.setAttribute(\"width\", \"18px\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  // icon.setAttribute(\"fill\", \"\")\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nexport {\n  createStatusIcon,\n  createCategoryIcon,\n  createEditIcon,\n  createPencilIcon,\n  createTrashIcon,\n  createCloseIcon,\n  createCaretDownIcon,\n  createCaretUpIcon,\n  createCaretRightIcon,\n  createCheckIcon,\n  createCheckBoxIcon,\n  createMeatballVertIcon,\n  createExpandDownIcon\n};\n","function formatTime(hours, minutes) {\n  let md;\n  if (minutes === 60) {\n    minutes = 0;\n    hours += 1;\n  }\n  if (+hours === 0) {\n    hours = 12;\n    md = \"am\";\n  } else if (hours < 12) {\n    md = \"am\";\n  } else if (hours === 12) {\n    md = \"pm\";\n  } else if (hours === 24) {\n    md = \"am\";\n    hours -= 12;\n  } else {\n    hours -= 12;\n    md = \"pm\";\n  }\n\n  if (+minutes === 0) {\n    return `${hours}${md}`;\n  } else {\n    return `${hours}:${minutes}${md}`;\n  }\n}\n\nfunction formatStartEndTimes(hours, minutes) {\n  let [startHours, endHours] = hours;\n  let [startMinutes, endMinutes] = minutes;\n\n  let [start, end] = [\n    formatTime(startHours, startMinutes),\n    formatTime(endHours, endMinutes),\n  ];\n\n  if (start.slice(-2) === end.slice(-2)) {\n    start = start.slice(0, -2);\n  }\n\n  return `${start}  ${end}`;\n}\n\nfunction configMinutesForStore(minutes) {\n  return minutes === 0 ? \"00\" : minutes;\n}\n\nfunction calcTime(start, length) {\n  let startHours = Math.floor(+start / 4);\n  let startMinutes = (+start * 15) % 60;\n\n  let endHours = Math.floor((start + length) / 4);\n  let endMinutes = ((start + length) * 15) % 60;\n\n  let startingtime = formatTime(startHours, startMinutes);\n  let endingtime = formatTime(endHours, endMinutes);\n\n  if (startingtime.slice(-2) == endingtime.slice(-2)) {\n    startingtime = startingtime.slice(0, -2);\n  }\n\n  const boxtime = `${startingtime}  ${endingtime}`;\n  return boxtime;\n}\n\nfunction compareTimes(time1, time2) {\n  let [hours1, minutes1] = time1.split(\":\");\n  let [hours2, minutes2] = time2.split(\":\");\n  // get time difference in minutes\n  let diff = (hours2 - hours1) * 60 + (minutes2 - minutes1);\n  let closest;\n\n  // if diff is negative, return the next closest time difference in 15 minute interval\n  if (diff < 0) {\n    closest = 15 * Math.ceil(diff / 15);\n  } else {\n    closest = true;\n  }\n\n  return [diff, closest];\n}\n\n\nexport default calcTime;\nexport {\n  configMinutesForStore,\n  formatStartEndTimes,\n  formatTime,\n  compareTimes\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import context, { datepickerContext } from \"./context/appContext\";\nimport store from \"./context/store\";\nimport setAppDefaults from \"./config/appDefaults\";\nimport renderViews from \"./config/renderViews\";\n\n/*!*************************************!*\\\n// (CSS) \n/*!*************************************!*/\n\n// <html>\nimport \"./styles/root.css\";\n// </html>\n\n// <header>\nimport \"./styles/header.css\";\n// </header>\n\n// <main>\nimport \"./styles/containers.css\";\nimport \"./styles/yearview.css\";\nimport \"./styles/monthview.css\";\nimport \"./styles/weekview.css\";\nimport \"./styles/dayview.css\";\nimport \"./styles/listview.css\";\nimport \"./styles/sidebar.css\";\nimport \"./styles/sbdatepicker.css\";\n// </main>\n\n// <aside>\nimport \"./styles/aside/datepicker.css\";\nimport \"./styles/aside/toast.css\";\nimport \"./styles/aside/goto.css\";\nimport \"./styles/aside/toggleForm.css\";\nimport \"./styles/aside/sidebarSubMenu.css\";\nimport \"./styles/aside/changeViewModule.css\";\nimport \"./styles/aside/editCategoryForm.css\";\nimport \"./styles/aside/form.css\";\nimport \"./styles/aside/timepicker.css\";\nimport \"./styles/aside/deleteCategoryPopup.css\";\nimport \"./styles/aside/entryOptions.css\";\nimport \"./styles/aside/info.css\";\nimport \"./styles/aside/shortcuts.css\";\n// </aside>\n\n/*!*************************************!*/\nsetAppDefaults(context, store);\nrenderViews(context, datepickerContext, store);"],"names":["sidebar","document","querySelector","datepicker","datepickeroverlay","formOverlay","formModalOverlay","entriesFormWrapper","entriesFormHeader","entriesForm","entriesFormBody","titleInput","descriptionInput","startDateInput","endDateInput","startTimeInput","endTimeInput","categoryModal","closeCategoryModalBtn","categoryModalIcon","categoryModalWrapper","selectedCategoryWrapper","selectedCategoryColor","selectedCategoryTitle","formSubmitButton","setEntryForm","context","store","datepickerContext","categories","activeCategories","currentComponent","year","month","day","closetimepicker","timep","timepoverlay","timepcontainer","activeTimeElement","scrollTo","remove","onclick","classList","setEndDateToNextDay","startCurrentDate","getAttribute","split","map","x","parseInt","nextDay","Date","nextDayString","getFullYear","getMonth","getDate","nextDayTitle","setAttribute","textContent","createTimepicker","coords","currentTime","end","endLimit","timepicker","createElement","add","style","top","y","left","timepickerOverlay","timepickerTimesContainer","hours","md","minutes","currenthour","currentmin","currentmd","isSameDay","shouldTestReset","h","m","slice","length","si","count","setnewtime","e","time","target","attr","testhour","testminute","endTestHour","endTestMinute","startCurrentTime","newh","newm","nextHour","getHours","nextHourString","getMinutes","nextHourTitle","setEndDateToNextHour","forEach","hour","houridx","min","timepickerTime","appendChild","body","prepend","getClosest","handleSetDate","type","preventDefault","d","getDateFromAttribute","rect","getBoundingClientRect","datepickerLeft","bott","bottom","datepickerTop","window","innerHeight","addActiveOverlay","setDate","setDateSelected","getDatePicker","getDateFormatViaAttr","dateAttr","getTimeFormatViaAttr","timeAttr","getDateTimeFormatted","setHours","setMinutes","setSeconds","removeErrorMessages","contains","removeAttribute","firstElementChild","focus","removeLastFormEntry","removeLastEntry","clearAllErrors","inputErrElements","querySelectorAll","el","handleFormClose","onmousedown","removeEventListener","delegateFormKeyDown","removeActiveOverlay","reset","value","closeCategoryModal","resetCurrentView","getFormResetHandle","setFormResetHandle","handleSubmissionRender","start","id","entryBefore","getDayEntriesArray","setTimeout","compareEntries","getEntry","handleUndoLastEdit","updateEntry","category","completed","description","title","undoLastFormEdit","handleFormSubmission","startDate","endDate","startTimeAttr","starthour","startminute","endTimeAttr","endhour","endminute","configDatesForStore","validityStatus","status","valid","titlecheck","trim","replace","hasCtg","isDate","isBeforeDate","hasErrors","errors","key","checkFormValidity","JSON","parse","stringify","createEntry","getLastEntryId","errorMessages","blur","components","err","parentElement","svg","fill","handleFormErrors","display","innerText","openCategoryModal","scrollHeight","behavior","height","parent","currentCategory","color","categoryWrapper","width","backgroundColor","categoryDisplayColor","categoryTitle","checkIcon","createCheckIcon","checkIconWrapper","append","createCategoryOptions","handleTimepickerSetup","placePopup","innerWidth","delegateEntryHeader","dragHeader","closeicon","closeBtn","currleft","currtop","margin","opacity","userSelect","right","pointerEvents","leftBefore","topBefore","clientX","clientY","winH","winW","throttlemove","throttle","leftAfter","topAfter","offsetTop","offsetLeft","offsetWidth","offsetHeight","addEventListener","mouseup","dragFormAnywhere","delegateEntryFormEvents","startdate","starttime","enddate","endtime","getCategoryModal","getcloseCategoryModalBtn","getCategoryModalOverlay","inputError","customInputError","resetbtn","submitbtn","childElementCount","handleCategorySelection","setFormInitialValues","catsAct","Object","entries","getAllCtg","getActiveCategoriesKeyPair","getComponent","getYear","getDay","categoryColor","setInitialFormCategory","dateSelected","getMonthName","getDateForStore","temphours","getTimeAndMd","constructor","this","monthNames","headerOffset","form","formBody","formTitleDescription","formStartEndCtg","formsubmitbtn","formCategoryWrapper","formCategorySelect","formCategoryWrapperIcon","formCategoryTitle","formCatgoryIcon","setFormStyle","eX","eY","shouldCenter","centerOffset","setFormSubmitType","configFormTitleDescriptionInput","input","idx","setFormDateInput","date","dateFormatted","dateinput","timeinput","lastElementChild","timeformatted","setFormDatepickerDate","configFormDateInputs","dates","i","dateObj","formatted","configFormCategoryInput","categoryData","firstChild","getConfig","data","submission","name","object","monthsArray","monthsArrayLong","gotoOverlay","goto","gotoInput","inputErrMessage","cancelGoto","submitGoto","createGoTo","removeError","handleGoTo","newdate","arr","haserr","includes","dateInt","tempMonth","isNaN","indexOf","toLowerCase","toString","validateDate","getSidebarState","component","closeGoTo","closeGoToOnEscape","formatStart","FormSetup","setSubmission","setCategory","setDates","getSetup","datepickerBody","datepickerTitle","datepickerChangeDate","headerPrevBtn","headerNextBtn","yearpickerTitle","monthpickerMonths","setDatepicker","hasweek","montharray","getMonthArray","testDateSelected","getDateSelected","checkmonth","checkyear","datepickerKeypressThrottle","flag","yearpickerSetYear","renderPrevMonth","renderNextMonth","handleMonthpicker","curr","next","nextElementSibling","newDateSelected","setSelectedToNextDay","prev","previousElementSibling","lastday","getDaysInMonth","last","setSelectedToPrevDay","closeChangeDateModal","setNewDate","closeDatepicker","setDatepickerHeader","createCells","groupedEntries","getMonthEntryDates","currentWeekStart","getWeek","cell","datename","compareDates","isToday","formattedDate","temp","datepickerDate","activeFormDate","inactiveFormDate","inactiveValue","inactiveDate","inactiveDateType","handleFormDate","renderpicker","setNextMonth","setPrevMonth","monthpickerSetMonth","val","init","newmonth","setMonth","increment","newyear","setYear","dir","openChangeDateModal","formOpen","getActiveOverlay","has","delegateDatepickerEvents","datenumber","navnext","navprev","closeChangeDateBtn","ypNext","ypPrev","mpMonth","setResetDatepickerCallback","colors","values","CatFormHelper","catname","catcolor","errMsg","prevColorIdx","originalName","originalColor","setName","setColor","setPrevColor","getName","getColor","prevColor","setErrMsg","msg","getErrMsg","getOriginalName","getOriginalColor","ctgform","ctgformoverlay","ctgformInput","colorPickerTitle","colorPickerOptions","ctgErrMsg","createCategoryForm","selectedCategory","editing","resetParent","formhelper","createColorOption","selected","colorOption","validateNewCategory","categoryName","trimName","isNumeric","origName","errormsg","closeCategoryForm","updateCtg","updateCtgColor","addNewCtg","fullrenderCtg","getRenderCategoriesCallback","closeCategoryFormOnEsc","gc","element","closest","delegateCtgForm","cancelctgBtn","submitctgBtn","current","option","background","handleColorSelection","currentColor","getright","gettop","placeholder","openCtgForm","entryOptionsOverlay","entryOptionsWrapper","entryOptionsHeaderWrapper","entryOptionsDateHeader","entryOptionsTimeHeader","entryOptionTitle","entryOptionDescription","entryOptionCategoryIcon","entryOptionCategory","getEntryOptionModal","entry","finishSetup","openEditForm","getRenderFormCallback","openForm","closeEntryOptions","openDeleteWarning","deletepopup","deletebtns","deletepopupCancel","deletepopupConfirm","deletepopupText","removeDeletePopup","deleteEntry","proceedDelete","formNegated","handleEntryOptionKD","delegateEntryOptions","editBtn","deleteBtn","istoday","getDateTime","formatEntryOptionsDate","undefined","timeheadertitle","secondsDiff","getTime","daysSince","Math","floor","hourSince","minSince","getCtgColor","setEntryDefaults","setHeader","dateTimeTitle","header","selectElement","btnprev","btnnext","datetimeWrapper","datetimeContent","prevnext","configHeader","borderstyle","componentTitle","borderBottom","paddingRight","setHeaderAttributes","view","toUpperCase","getWeekRange","shortcutsModalOverlay","shortcutsModal","shortcutsModalContent","shortcutsModalClose","notifyShortcutsStatus","handleShortCutsModal","createShortcut","shortcut","shortcutKey","keyone","Array","isArray","or","keytwo","shortcutDescription","descriptionOne","descriptionTwo","handleShortcutsModalClose","closeShortcutsOnKeydown","inp","setStatusIcon","getShortcutsStatus","shortcuts","getShortcuts","action","setShortcutsStatus","handleShortcutsModalOpen","sidebarColTwo","cWrapper","categoriesContainer","categoriesHeader","categoryHeaderCaret","handleSidebarCategories","defaultCtg","getDefaultCtg","updateComponent","renderSidebarDatepickerCtg","renderCategories","ctg","keys","ctgname","active","createCategoryListItem","ctgcolor","row","colone","checkboxWrapper","checkbox","border","label","coltwo","deleteicon","editicon","createCloseIcon","createEditIcon","delegateCategoryEvents","ctgtoggleModal","editctgBtn","deletectgBtn","ctgChck","ctgPlus","toggle","targetcat","targetparent","targetCtg","targetElement","popupBox","popupBoxOverlay","optionEdit","optionTurnOff","optionTurnOn","closeCategoryOptionsMenu","chckbox","handleCloseOnEscapeCtgOptionsMenu","rerender","closeAndRemoveStyle","setAllCategoryStatusExcept","openCategoryOptionsMenu","offsetColor","categoryLength","getCtgLength","noEntries","ord","popupHeader","popupTitle","popupCategoryStats","popupBody","optionsWrapperOne","categoryNames","getAllCtgNames","optionMoveRadio","optionMove","optionMoveTitle","optionMoveSelect","optionsWrapperTwo","optionRemoveRadio","optionRemove","optionRemoveTitle","optionRemoveIcon","createTrashIcon","handleWrapperClick","checked","popupFooter","btncancel","btnproceed","closeDeletePopupOnEscape","closeDeletePopup","deleteCategory","selectedOption","moveCategoryEntriesToNewCategory","removeCategoryAndEntries","createDeleteCategoryPopup","children","cat","setCategoryStatus","setRenderCategoriesCallback","initSidebarCategories","sbdatepicker","sbdatepickerBody","sbdatepickerTitle","sbdatepickerChangeDate","sbyearpickerTitle","sbmonthpickerMonths","setSidebarDatepicker","resetpickerData","renderSelectedDay","sidebarFooter","sbInfoPopup","sbInfoPopupOverlay","selectInfo","closePopupButton","infopopupTitle","infopopupBody","handleSidebarFooter","infoContent","notes","content","privacy","terms","closeInfoPopup","closeInfoPopupOnEscape","setInfoContent","selection","handleSelectInfoChange","openInfoPopup","selectedIndex","onchange","projectNotes","sidebarSubMenuOverlay","sidebarSubMenu","closemenu","appBody","themeRadioBtns","themeRadioOptions","shortcutSwitch","animationsSwitchBtn","notifyDisabledShortcutsIcon","getSidebarSubMenu","closeSubOnEscape","popup","closeSubMenu","getJSONUpload","file","accept","files","reader","FileReader","onload","json","result","setUserUpload","readAsText","click","removeChild","removePopup","handleCalendarJSON","totalEntries","totalCategories","getStoreStats","titleEntries","hasEntries","hasCategories","subtitle","subtitle2","subtitle3","btns","cancelBtn","proceedBtn","console","log","createUploadConfirmationPopup","localStorage","filename","createTimestamp","blob","Blob","href","URL","createObjectURL","link","download","revokeObjectURL","getJSONDownload","toggleShortcuts","toggleShortcutsIcon","setAnimationsIcons","parenticonwrapper","icons","on","off","toggleAnimations","fromicon","setAnimationStatus","delegateSubMenuEvents","downloadjsonBtn","uploadjsonBtn","themebtn","kbShortcutMenu","shortcutSwitchNotifyIcon","animationsSwitch","animationsIcon","getCloseSubMenuBtn","targetinput","getColorScheme","setColorScheme","setTheme","handleThemeChange","themeIdx","shortcutStatus","animationStatus","getAnimationStatus","openSubMenu","toast","createToast","message","undoCallback","closetoast","onkeydown","toastMessage","closeIconWrapper","undoToastWrapper","undoToastMessage","getundo","getclose","HOST","async","loadWorkouts","start_date","end_date","fetch","method","redirect","getPerformances","workout_id","then","response","catch","error","updateWorkoutDate","workout","headers","refreshTrainingPeaks","cb","allWorkouts","getActiveEntries","item","newWorkouts","filter","workoutId","filterStorage","toEntry","syncNewWorkoutsToStorage","workoutToEntryMap","reduce","findWorkoutsInStorage","entry_id","duration","updateWorkoutsInStorage","dailySyncTP","today","is_workout","prevPlanned","workoutDay","alert","tp_body","dvHeaderDayNumber","dvHeaderDayOfWeek","dvHeaderInfo","dvOnTop","dvContainer","dvGrid","dvMainGrid","dvSideGridWrapper","setDayView","boxes","firstY","firstLastDates","bxs","longest","shortest","tempshort","templong","coordinates","h1","h2","m1","m2","tempdate1","tempdate2","formatStartEndTime","gmtOffset","getTimezoneOffset","abs","getGmt","getWeekday","allboxes","getAllBoxes","tempEndCase1","endingToday","startingToday","fulltitle","getDayviewHeaderEntryCount","resetDayview","openDvMore","entr","morepopupoverlay","morepopup","morepopupHeader","morepopupTitle","morepopupClose","morepopupBody","morepopupEntry","morepopupEntryTitle","morepopupCategory","morepopupEntryTime","createMorePopupEntry","closemp","closeMpOnEsc","openStackEntryOnTop","closearg","setup","getFormDateObject","modal","createDvTop","moremessage","dvOnTopGrid","ent","dvOnTopEntry","createStackableEntriesOnTop","handleDayviewClose","createBoxOnDragDay","setStylingForEvent","cursor","tempcategory","getFirstActiveCategoryKeyPair","box","boxheader","createTempBoxHeader","boxcontent","boxtime","boxtimeend","scrolled","scrollTop","startCursorY","pageY","round","getBoxDefaultStyle","startmin","endmin","startEndDefault","movedY","mousemove","movementY","newHeight","calcNewHourFromCoords","calcNewMinuteFromCoords","wordBreak","formatTime","datesData","getTempDates","submitType","openDayviewForm","renderBoxesForGrid","getBoxesTop","getBoxes","createBox","delegateDayView","dvhresizehandle","dvhbox","dvhgrid","dvhboxTop","dvhGrouped","col","boxhasOnTop","boxorig","getOriginalBoxObject","resetStyleOnClick","boxTop","createTemporaryBox","amountScrolled","resetOriginalBox","setBoxTimeAttributes","nextSibling","updateBoxCoordinates","updateStore","resizeBoxNSDay","startTop","boxHeight","toFixed","tempX","tempY","pageX","sX","sY","hasStyles","currentCursorY","newOffsetY","newTop","tempbox","setResetDv","dragEngineDay","dvSideGridCell","createDVSideGridCells","getDayEntries","Day","allDay","setResetPreviousViewCallback","settop","handleScrollToOnInit","listview","listviewBody","setListView","weekDayNames","todayYear","todayMonth","todayDay","getdatearray","createRowGroupHeader","weekname","monthname","rgHeader","rgHeaderDateNumber","rgHeaderDate","createRowGroupCell","datetitle","longerThanDay","tempyear","formatStartEndTimes","rgCell","rgCellColor","rgCellTime","rgCellTitle","resetCellActive","activeCell","delegateListview","headerNum","setComponent","setDayViewLV","hextorgba","rectTop","rectLeft","getRgContextMenu","resetListview","activeEnt","sortBy","acc","datestring","push","earliestDate","formatStartEndDate","tempdate","dow","wn","mn","rgheader","sort","a","b","rgContent","rg","createRowGroups","initListView","resizeoverlay","monthWrapper","setMonthView","boxquery","renderSidebarDatepickerMonth","handleOverlay","setDayViewViaMonth","desc","getHeight","boxtitle","boxsubtitle","boxdesc","createCell","cellDate","cellCoordinates","dayofmonth","cellContent","daynumberAndMonth","daynumber","createCellHeader","toptotal","groupedBxs","groupedDiv","groupedTitle","createGroupedCell","getTop","resetMonthview","populateCells","monthentries","getMonthEntries","getGroupedMonthEntries","dayEntries","dayHasEntry","getDateFormatted","getCoordinatesFromCell","configureForStorage","newCell","clone","tempEntry","diff","getDurationSeconds","endDay","configClonedBoxForDrop","resetCellOnDrop","transition","dragEngineMonth","startDragTime","now","targetModal","originalCellLength","cellX","cellY","cloneNode","cellRect","cellWidth","parseFloat","cellHeight","wrapperLeft","boxRect","boxWidth","hasFiveWeeks","startcursorx","startcursory","movedX","lastX","lastY","gaveStyles","changeCursor","newX","multX","newY","multY","timeDiff","newCellX","newCellY","newCellContent","boxmoved","handleMonthviewEditFormClose","openFormOnClickMV","groupedCell","configGroupedCellOnDrop","insertBefore","newGroupedCell","createGroupedCellOnDrop","closeMoreModalOnEscape","closeMoreModal","mm","createMoreModal","moreModalEntries","getMoreModalEntries","modalHeight","rectWidth","maxH","modalHeader","modalHeaderTitle","parentDate","createDateFromFormattedString","dowspan","daynspan","modalHeaderClose","modalContent","modalEntry","modalEntryTitle","createMoreModalBox","renderDayViewViaModal","once","tempcell","handleMonthviewFormClose","createEntryOnEmptyTarget","cellWrapper","generateTempStartEnd","tempctg","getActiveCategories","tempdefaultctg","tempcurrentctg","tempBox","configNewBoxInsertion","delegateMonthEvents","monthviewBox","monthviewBoxHeader","groupedBox","groupedBoxItem","closeGroupedBox","stopPropagation","openDayView","targetCellIdx","targetCell","cloned","lastChild","moreModal","newLength","dragOutOfModal","delegateNewBox","main","container","weekviewHeader","weekviewHeaderDayNumber","weekviewGrid","weekviewSideGrid","topCols","cols","setWeekView","weekArray","getWeekArray","getWeekEntries","Week","resetWeekviewBoxes","createBoxesTop","len","taskicons","icon","celltitle","cellexpand","createExpandDownIcon","createAllDayModal","dayofweek","entriesoffset","modalheader","modaltitle","getDayOrdinal","closeAlldayModalBtn","modalcontent","closealldayonEsc","closealldaymodal","handleCloseCallback","cellcontent","cellIcons","cellendDate","cellcategoryTitle","createMeatballVertIcon","createAllDayModalCell","getCloseAdBtn","getMeatballBtn","targetrect","getWeekViewContextMenu","getcol","handleWeekviewFormClose","dragEngineWeek","originalColumn","currentColumn","tempstartY","startCursorX","direction","currentCursorX","leftColX","rightColX","newOffsetX","setResetWv","droppedCol","getBoxesByColumn","createBoxOnDrag","colIdx","openWeekviewForm","delegateGridEvents","getBoxResizeHandle","getBox","getWeekCol","getAllDayCol","class","resizeBoxNS","colidx","colentries","getBoxesByColumnTop","openAllDayModal","renderDataForGrid","boxt","getBoxesTopLengths","k","renderBoxes","getColumnsWithMultipleBoxes","delegateWvHeader","yr","mo","da","wvSideGridCell","createWVSideGridCells","hasToday","hasSelected","dayNumbers","ymd","getToday","ty","tm","td","num","configureDaysOfWeek","yearviewGrid","setYearView","createMonthCell","prevmonth","daysInPrevMonth","currentMonth","daysInMonth","firstDayOfMonth","cellHeader","cellHeaderRowOne","cellHeaderWeekDayNames","weekday","cellBody","createyvcell","classname","daywrapper","populateMonths","handleDaySelection","tempy","tempm","tempd","delegateYearEvents","resetYearview","getGroupedYearEntries","getYearEntries","renderMonthCells","currentmonth","initYearview","setAppDefaults","colorSchemeMeta","getElementsByName","headerLogo","toggleForm","sbToggleForm","sbToggleSubBtn","dateTimeWrapper","dateTimeBtn","sbDatepicker","sbDatepickerBody","sbCategoriesWrapper","selectOverlay","optionswrapper","options","sbFooter","sbCategories","viewsContainer","yearwrapper","monthwrapper","collapsebtn","renderViews","currentScheme","fullRender","renderSidebarDatepicker","getPreviousDay","setPrevDay","getNextDay","setNextDay","getPreviousWeek","setPrevWeek","getNextWeek","setNextWeek","getPreviousMonth","getNextMonth","getPreviousYear","setPrevYear","getNextYear","setNextYear","handleTransition","keyframeDirection","callback","removeslide","overflowX","slide","handleForm","handleToggleSubmenu","handleBtnMainMenu","marginLeft","resetdatepicker","getResetDatepickerCallback","handleBtnToday","handleBtnPrev","handleBtnNext","closeOptionsModal","renderOption","initialRender","comp","handleCollapse","activeIndex","setOptionStyle","activeElement","handleSelect","getKeyPressThrottled","toggleSidebarState","toggleChangeview","handleHeaderDelegation","btnMainMenu","btnToday","btnPrev","btnNext","dateTime","search","settings","select","refresh","newDatepickerLeft","perc","handleDatePickerBtn","lk","lk2","handleGlobalKeydown","hasActiveOverlay","collapse","componentBody","componentBodytoggle","eyeIcons","setRenderFormCallback","setRenderSidebarCallback","setSidebarState","appinit","yearComponent","monthComponent","weekComponent","dayComponent","listComponent","prev1","prev2","setViews","views","resetPrevView","getResetPreviousViewCallback","hideViews","initView","labels","Context","colorScheme","sidebarState","gmt","daySelected","monthSelected","yearSelected","monthArray","week","setDateDefaults","getItem","setLocalYear","setLocalMonth","setLocalDay","setLocalDateSelected","setSchemaDefaults","setLocalColorScheme","setLocalComponent","setLocalSidebarState","setDefaults","static","setItem","state","getAllMethodNames","getOwnPropertyNames","getPrototypeOf","getLocalColorScheme","getLocalComponent","getLocalSidebarState","setDay","prevDay","prevWeek","prevMonth","nextWeek","nextMonth","getLocalDateSelected","getLocalDay","getLocalMonth","getLocalYear","d1","d2","monthsShort","getWeekNumber","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","ceil","monthsLong","getMonthArrayStartDay","getMonthArrayStart","monthArrayStart","getMonthArrayEndDay","getMonthArrayEnd","handleFourWeeks","monthArrayEnd","testDate","DatepickerContext","setLocalPickerYear","setLocalPickerMonth","setLocalPickerDay","setLocalPickerDateSelected","getLocalPickerDateSelected","getLocalPickerDay","getLocalPickerMonth","getLocalPickerYear","Store","userUpload","default","blue","activeOverlay","Set","handleRenders","reconfig","calendars","previous","resize","render","list","keyboardShortcuts","keyboardShortcutsStatus","setStoreForTesting","setStore","activeStore","addEntry","args","find","getEntries","getEntriesByCtg","pop","entry1","entry2","assign","searchBy","searchtype","localeCompare","getFirstAndLastEntry","sorted","generateCoordinates","startMin","total","x2","activeEntries","entryDate","targetDate","montharr","grouped","yearentries","setCtg","getFirstActiveCategory","backup","getAllCtgColors","getCategoryStatus","hasOwnProperty","hasctg","newCategory","newName","getCtgIndex","newColor","oldName","hasColor","n","isFinite","fromEntries","setShortCut","overlay","size","o","validateUserUpload","err1","validation","validated","clear","location","reload","getUserUpload","setFormRenderHandle","setResizeHandle","setDataReconfigCallback","getDataReconfigCallback","getResizeHandle","getFormRenderHandle","getRenderSidebarCallback","Entry","generateId","CoordinateEntry","allDayEntries","boxesTop","setAllBoxes","tempEntries","addBox","addBoxTop","getLength","getBoxesTopByDay","c","columns","getEntriesByTitle","updateCoordinates","sortByY","checkForCollision","overlaps","j","e1","e2","boxstart","boxend","starthours","startminutes","endhours","endminutes","getEntriesEndingOnDay","boxEntry","tops","heights","updateFlag","getFlag","getPrevTop","Workout","tpWworkout","_format_time","totalTimePlanned","structure","s","String","padStart","monthsShortLower","monthsLongLower","weekdaysLong","weekdaysShort","weekdaysNarrow","red","orange","green","purple","grey","createDate","pad","prototype","toCustomISO","getSeconds","getMilliseconds","formatDateForDisplay","hm","date1","date2","formatDuration","seconds","res","join","startday","startmonth","startyear","endday","endmonth","endyear","tempstartyear","tempendyear","getDuration","dateString","dateArray","attribute","getTimeFromAttribute","minute","setmin","sortDates","y1","y2","min1","min2","useTempDate","tempdateone","durationTime","formatDurationHourMin","identifiers","boxnumarr","boxClasses","base","ontop","temporary","boxAttributes","updatecoord","dataIdx","dataId","dataCol","prepentwo","styles","newBox","setBoxWidthWeek","dataidx","setBoxWidthDay","clause","wrapper","baseClass","attrPrepend","attrPrependTwo","prependtwo","coord","entryTitle","entryTime","resizehandleS","hasSibling","tempstarthour","tempstartmin","calcDateOnClick","collisions","identifyBox","classPrepend","boxIdxAttr","boxIdAttr","hex","alpha","r","g","random","substring","fn","wait","inThrottle","lastFn","lastTime","arguments","clearTimeout","apply","max","hasLightMode","hasContrastMode","setColorSchema","popupWidth","popupHeight","windowCoords","center","targetWidth","popupW","popupH","popupX","popupY","func","limit","timeoutId","createStatusIcon","createElementNS","pathone","pathtwo","createCategoryIcon","createPencilIcon","createCaretDownIcon","createCaretUpIcon","createCaretRightIcon","createCheckBoxIcon","startHours","endHours","startMinutes","endMinutes","configMinutesForStore","compareTimes","time1","time2","hours1","minutes1","hours2","minutes2","startingtime","endingtime","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","defineProperty","enumerable","get","obj","prop","call","Symbol","toStringTag"],"sourceRoot":""}